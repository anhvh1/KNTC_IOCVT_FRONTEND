"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[1575],{73858:(e,n,a)=>{a.d(n,{E:()=>l});var t=a(8118),i=a.n(t);const l=(e,n)=>i()({method:"POST",url:e,data:n,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}}).catch((e=>{const{status:n,statusText:a}=e.response;return{Status:0,Message:n||a?"".concat(n," - ").concat(a):"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra"}}))},2637:(e,n,a)=>{a.d(n,{A:()=>o});a(82483);var t,i=a(57528),l=a(22953);a(6535);const d=l.Ay.div(t||(t=(0,i.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 10px 0;\n  gap: 10px;\n  width: 100%;\n"])));var c=a(56723);const o=e=>(0,c.jsx)(d,{className:"wrapper-top",children:e.children})},67466:(e,n,a)=>{a.d(n,{D:()=>i});var t=a(82483);function i(e){const[n,a]=(0,t.useState)(0);return[n,()=>{a(n+1)}]}},41575:(e,n,a)=>{a.r(n),a.d(n,{default:()=>z});var t=a(82483),i=a(82402),l=(a(8118),a(92378)),d=a(53773),c=a(57820),o=a(33713),r=a.n(o),s=a(94690),h=a.n(s),u=a(53660),g=a(34045),p=a(81538),v=a(64684),A=a(67353),m=a(53615),f=a(98456),C=a(79948),x=a(93445),D=a(72741),y=a(53397),S=a(27957),T=a(91012),j=a(69973),w=a(18682),L=(a(67777),a(18570)),I=a(56723);const{Item:M}=C.A,k=e=>{const[n,a]=(0,t.useState)([]),[l,d]=(0,t.useState)(!1),[r,s]=(0,t.useState)([]),{ListSideBar:h}=(0,i.d4)((e=>e.ListSideBar)),[u,g]=(0,t.useState)([]),{useForm:p}=C.A,[v]=p();(0,i.wA)();(0,t.useEffect)((()=>{}),[]);const A=e=>{c.A.danhSachCacCapDonVi({CapID:e}).then((e=>{e.data.Status>0&&g(e.data.Data)}))};(0,t.useEffect)((()=>{const{dataModalAddEdit:n}=e;if(n){var a,t;const{DanhSachHuongDan:e,Data:c}=n;v&&v.setFieldsValue({...c});if(null!==(a=n.Data)&&void 0!==a&&a.TenFileGoc){var i,l;const e={TenFileGoc:null===(i=n.Data)||void 0===i?void 0:i.TenFileGoc,FileUrl:null===(l=n.Data)||void 0===l?void 0:l.UrlFile};s([e])}var d;if(null!==n&&void 0!==n&&null!==(t=n.Data)&&void 0!==t&&t.CapID)A(null===n||void 0===n||null===(d=n.Data)||void 0===d?void 0:d.CapID)}}),[]);const m=(e,n,a)=>{const t=[...a];s(t)},f=(e,n,a)=>{var t;const i=null===(t=(0,L.VD)("data_config"))||void 0===t?void 0:t.fileLimit,l=e.size/1024/1024<i,d=[];return null===a||void 0===a||a.forEach((e=>{r.filter((n=>n.TenFileGoc===e.name)).length&&d.push(e)})),l?((e,n,a)=>{const t=new FileReader;t.addEventListener("load",(()=>n(t.result,e,a))),t.readAsDataURL(e)})(e,n,a):x.Ay.error("File \u0111\xednh k\xe8m ph\u1ea3i nh\u1ecf h\u01a1n ".concat(i,"MB")),!1},{confirmLoading:D,visible:k,onCancel:E,actions:F,danhSachCacCap:b}=e;return(0,I.jsx)(w.A,{title:"add"===F?"Th\xeam m\u1edbi h\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng":"C\u1eadp nh\u1eadt h\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng",width:o.MODAL_NORMAL,visible:k,onCancel:E,footer:[(0,I.jsx)(y.Ay,{onClick:E,children:"H\u1ee7y"},"back"),(0,I.jsx)(y.Ay,{loading:D,onClick:n=>{n.preventDefault(),v.validateFields().then((n=>{if(r.length<1)return x.Ay.destroy(),void x.Ay.warning("Ch\u01b0a ch\u1ecdn file \u0111\xednh k\xe8m");const a={...n,TenFileGoc:r[0].name},{onCreate:t}=e;t(a,r[0])}))},type:"primary",children:"L\u01b0u"})],children:(0,I.jsxs)(C.A,{form:v,children:["add"!==F?(0,I.jsx)(M,{name:"HuongDanSuDungID",hidden:!0,...o.REQUIRED}):null,(0,I.jsx)(M,{label:"Ch\u1ecdn c\u1ea5p",...o.ITEM_LAYOUT,name:"CapID",...o.REQUIRED,children:(0,I.jsx)(j.Ay,{allowClear:!0,placeholder:"Ch\u1ecdn c\u1ea5p",onChange:e=>A(e),children:null===b||void 0===b?void 0:b.map((e=>(0,I.jsx)(j.c$,{value:e.Cap,children:e.TenCap})))})}),(0,I.jsx)(M,{label:"Ch\u1ee9c n\u0103ng",...o.ITEM_LAYOUT,name:"MaChucNang",...o.REQUIRED,children:(0,I.jsx)(j.Ay,{placeholder:"Ch\u1ecdn ch\u1ee9c n\u0103ng",children:u.map((e=>{var n,a;return(0,I.jsx)(j.JM,{label:e.TenMenu,children:null===e||void 0===e||null===(n=e.Children)||void 0===n||null===(a=n.filter((e=>e)))||void 0===a?void 0:a.map((e=>{if(e)return(0,I.jsx)(j.c$,{disabled:!(null!==e&&void 0!==e&&e.ViewOnly),value:null===e||void 0===e?void 0:e.key,children:null===e||void 0===e?void 0:e.TenMenu},null===e||void 0===e?void 0:e.MaMenu)}))},e.MaMenu)}))})}),(0,I.jsx)(M,{label:"Ti\xeau \u0111\u1ec1 h\u01b0\u1edbng d\u1eabn",name:"TieuDe",...o.REQUIRED,...o.ITEM_LAYOUT,children:(0,I.jsx)(S.A,{})}),(0,I.jsx)(M,{label:"Link",name:"Link",...o.ITEM_LAYOUT,children:(0,I.jsx)(S.A,{})}),(0,I.jsxs)(M,{label:"File h\u01b0\u1edbng d\u1eabn",...o.ITEM_LAYOUT,children:[(0,I.jsx)(T.A,{showUploadList:!1,actions:!1,beforeUpload:(e,n)=>{f(e,m,n)},accept:".pdf",disabled:l,children:(0,I.jsx)(y.Ay,{type:"primary",loading:l,className:"btn-upload",children:"Ch\u1ecdn file t\u1eeb li\u1ec7u t\u1eeb m\xe1y t\xednh"})}),r&&null!==r&&void 0!==r&&r.length?r.map(((e,n)=>(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("p",{children:(0,I.jsx)("a",{target:"_bank",href:null===e||void 0===e?void 0:e.FileUrl,children:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.TenFileGoc)})})}))):""]}),(0,I.jsx)("div",{})]})})};var E=a(2370),F=a(73858),b=a(32549),N=a(21428),H=a(38674),U=a(84979),R=a(67466),O=a(2637);const z=(0,i.Ng)((function(e){return{...e.QLHuongDanSuDung,FileLimit:(0,L.op)("fileLimit",10)}}),d.A)((e=>{document.title="Qu\u1ea3n l\xfd h\u01b0\u1edbng d\u1eabn s\u1eed d\u1ee5ng";const[n,a]=(0,t.useState)(l.parse(e.location.search)),[o,s]=(0,t.useState)(!1),[C,y]=(0,R.D)(),[T,w]=(0,t.useState)(!1),{ListSideBar:M}=(0,i.d4)((e=>e.ListSideBar)),[z,V]=(0,t.useState)({}),[_,B]=(0,t.useState)([]),[G,Y]=(0,t.useState)(""),P=(0,i.wA)();(0,t.useEffect)((()=>{P(d.A.getInitData(n)),P(f.A.getList()),(async()=>{try{const e=await c.A.danhSachCacCapDonVi();B(e.data.Data)}catch(e){}})()}),[]),(0,t.useEffect)((()=>{(0,L._Y)(n),e.getList(n)}),[n]);const Q=(e,t)=>{let i={...n},l={value:e,property:t},d=(0,L.D5)(i,l,null);a(d)},K=()=>{V({}),w(!0),y(),Y("add")},$=()=>{w(!1),V({})},{DanhSachHuongDan:J,TotalRow:X,role:q}=e,W=n.PageNumber?parseInt(n.PageNumber):1,Z=n.PageSize?parseInt(n.PageSize):(0,L.WT)(),ee=[{title:"STT",align:"center",width:"5%",render:(e,n,a)=>(0,I.jsx)("span",{children:(W-1)*Z+(a+1)})},{title:"T\xean ch\u1ee9c n\u0103ng",dataIndex:"TenChucNang",width:"25%"},{title:"Ti\xeau \u0111\u1ec1 h\u01b0\u1edbng d\u1eabn",dataIndex:"TieuDe",width:"30%",render:(e,n,a)=>(0,I.jsx)("span",{style:{whiteSpace:"pre"},children:e})},{title:"C\u1ea5p",dataIndex:"TenChucNang",width:"10%",render:(e,n,a)=>{var t;return(0,I.jsx)("span",{children:n.CapID?null===_||void 0===_||null===(t=_.find((e=>e.Cap===n.CapID)))||void 0===t?void 0:t.TenCap:null})}},{title:"Ng\xe0y c\u1eadp nh\u1eadt",dataIndex:"NgayCapNhat",width:"15%",align:"center",render:e=>h()(e).format("DD/MM/YYYY")},{title:"Thao t\xe1c",dataIndex:"NgayCapNhat",width:"10%",align:"center",render:(e,a,t)=>(0,I.jsxs)("div",{className:"action-btn",children:[q.edit?(0,I.jsx)(N.A,{onClick:()=>(e=>{V({Data:e,DanhSachHuongDan:[]}),w(!0),y(),Y("edit")})(a)}):null,q.delete?(0,I.jsx)(H.A,{onClick:()=>{return e=a.HuongDanSuDungID,void D.A.confirm({title:"X\xf3a d\u1eef li\u1ec7u",content:" B\u1ea1n c\xf3 mu\u1ed1n x\xf3a file t\xe0i li\u1ec7u h\u01b0\u1edbng d\u1eabn n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{c.A.xoaHuongDan({ListId:[e]}).then((e=>{e.data.Status>0?(x.Ay.success("X\xf3a th\xe0nh c\xf4ng"),P(d.A.getList(n)),P(d.A.getGuild())):D.A.error({title:"L\u1ed7i",content:e.data.Message})})).catch((e=>{D.A.error(r().API_ERROR)}))}});var e}}):null,(0,I.jsx)(U.A,{onClick:()=>(e=>{D.A.confirm({title:"T\u1ea3i file h\u01b0\u1edbng d\u1eabn",content:"B\u1ea1n c\xf3 mu\u1ed1n t\u1ea3i file h\u01b0\u1edbng d\u1eabn?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:async()=>{const n=await c.A.downloadFile({HuongDanSuDungID:e.HuongDanSuDungID});if(n&&n.data.Status>0){const e=n.data.Data;if(e.UrlFile&&""!==e.UrlFile){const n=document.createElement("a");n.href=e.UrlFile,n.download=e.TenFileGoc,n.target="_blank",n.click()}}}})})(a)})]})}],{FileLimit:ne}=e;return(0,I.jsxs)(u.A,{children:[(0,I.jsxs)(O.A,{children:[(0,I.jsx)(g.A,{children:"t\xe0i li\u1ec7u h\u01b0\u1edbng d\u1eabn"}),(0,I.jsx)(p.A,{children:q.add?(()=>{const{FileLimit:n}=e;return(0,I.jsx)("span",{children:(0,I.jsxs)(E.A,{type:"primary",onClick:K,children:[(0,I.jsx)(b.A,{}),"Th\xeam m\u1edbi"]})})})():""})]}),(0,I.jsxs)(v.A,{children:[(0,I.jsxs)(A.A,{children:[(0,I.jsx)(j.Ay,{allowClear:!0,onChange:e=>Q(e,"NhomChucNang"),defaultValue:n.NhomChucNang?n.NhomChucNang:void 0,placeholder:"Ch\u1ecdn nh\xf3m ch\u1ee9c n\u0103ng",style:{width:200},children:M.map((e=>(0,I.jsx)(j.c$,{value:e.MenuID.toString(),children:e.TenMenu},e.MenuID)))}),(0,I.jsx)(j.Ay,{allowClear:!0,onChange:e=>Q(e,"CapID"),defaultValue:n.CapID?n.CapID:void 0,style:{width:"200px"},placeholder:"Ch\u1ecdn c\u1ea5p",children:null===_||void 0===_?void 0:_.map((e=>{var n;return(0,I.jsx)(j.c$,{value:null===(n=e.Cap)||void 0===n?void 0:n.toString(),children:e.TenCap})}))}),(0,I.jsx)(S.A.Search,{allowClear:!0,defaultValue:n.Keyword,placeholder:"T\xecm ki\u1ebfm theo t\xean ch\u1ee9c n\u0103ng",onSearch:e=>Q(e,"Keyword"),style:{width:300}})]}),(0,I.jsx)(m.Ay,{columns:ee,dataSource:J,loading:e.TableLoading,onChange:(e,t,i)=>{let l={...n},d={pagination:e,filters:t,sorter:i},c=(0,L.D5)(l,null,d);a(c)},pagination:{showSizeChanger:!0,showTotal:(e,n)=>"T\u1eeb ".concat(n[0]," \u0111\u1ebfn ").concat(n[1]," tr\xean ").concat(e," k\u1ebft qu\u1ea3"),total:X,current:W,pageSize:Z}})]}),(0,I.jsx)(k,{confirmLoading:o,visible:T,onCancel:$,onCreate:(e,a)=>{if(s(!0),"add"===G){const t=new FormData;t.append("files",a),t.append("HuongDanSuDungModelStr",JSON.stringify(e)),(0,F.E)(c.y.themhuongdan,t).then((e=>{s(!1),e.data.Status>0?(x.Ay.success("Th\xeam th\xe0nh c\xf4ng"),$(),P(d.A.getList(n)),P(d.A.getGuild())):(x.Ay.destroy(),x.Ay.error(e.data.Message))})).catch((e=>{x.Ay.destroy(),x.Ay.error(e.toString())}))}else if("edit"===G){const t=new FormData;t.append("HuongDanSuDungModelStr",JSON.stringify(e)),a.name&&t.append("files",a),(0,F.E)(c.y.suahuongdan,t).then((e=>{s(!1),e.data.Status>0?(x.Ay.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),$(),P(d.A.getList(n)),P(d.A.getGuild())):(x.Ay.destroy(),x.Ay.error(e.data.Message))})).catch((e=>{x.Ay.destroy(),x.Ay.error(e.toString())}))}},dataModalAddEdit:z,danhSachCacCap:_,FileLimit:ne,actions:d.A},C)]})}))},21428:(e,n,a)=>{a.d(n,{A:()=>o});var t=a(58168),i=a(82483);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var d=a(56594),c=function(e,n){return i.createElement(d.A,(0,t.A)({},e,{ref:n,icon:l}))};const o=i.forwardRef(c)},32549:(e,n,a)=>{a.d(n,{A:()=>o});var t=a(58168),i=a(82483);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};var d=a(56594),c=function(e,n){return i.createElement(d.A,(0,t.A)({},e,{ref:n,icon:l}))};const o=i.forwardRef(c)}}]);