"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[2651],{82859:(a,n,e)=>{e.d(n,{A:()=>c});var t=e(65828),o=e(18570),i=e(54686),h=e.n(i),s=e(56723);const c=a=>{const{onFilter:n,filterData:e}=a;return(0,s.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,s.jsx)(t.lr,{placeholder:"T\u1eeb ng\xe0y",format:"DD/MM/YYYY",value:e.TuNgay?h()(e.TuNgay,"YYYY/MM/DD"):null,onChange:(a,e)=>n(a?(0,o.Yq)(a):null,"TuNgay"),disabledDate:a=>(0,o.IH)(a,e.DenNgay)}),(0,s.jsx)(t.lr,{value:e.DenNgay?h()(e.DenNgay,"YYYY/MM/DD"):null,onChange:(a,e)=>n(a?(0,o.Yq)(a):null,"DenNgay"),placeholder:"\u0110\u1ebfn ng\xe0y",format:"DD/MM/YYYY",disabledDate:a=>(0,o.IH)(e.TuNgay,a,2)})]})}},47453:(a,n,e)=>{e.r(n),e.d(n,{default:()=>m});var t,o=e(93445),i=(e(65828),e(82483)),h=e(82402),s=e(52449),c=e(53660),r=e(34045),u=(e(81538),e(14486)),l=e(64684),d=(e(67353),e(53615),e(74405),e(69973),e(57528));const D=e(22953).Ay.div(t||(t=(0,d.A)(["\n  .ant-tabs-nav::before {\n    display: none !important;\n  }\n  .ant-tabs-nav-wrap div:first-child {\n    transform: none !important;\n  }\n  .ant-tabs-ink-bar {\n    display: none;\n  }\n  .ant-tabs-ink-bar-animated {\n    display: none;\n  }\n  .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n  .ant-tabs-tab {\n    padding: 10px 0;\n  }\n  .ant-tabs .ant-tabs-tab {\n  }\n  .ant-tabs .ant-tabs-tab + .ant-tabs-tab {\n    margin: 0 !important;\n  }\n  .ant-tabs__title {\n    width: 200px;\n    /* height: 35px; */\n    background: #eaf1fb;\n    color: #000;\n    padding: 10px 0;\n    height: 36px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-left: 1px solid #0b57d0;\n  }\n  .ant-tabs-tab-active .ant-tabs__title {\n    background: rgb(40, 120, 215) !important;\n    color: #fff;\n    background: #94cef7;\n    font-weight: 600;\n  }\n"])));e(54686),e(33713);var y=e(18570),S=e(67466),g=e(92378),p=e(84988),f=e(71126),T=(e(94690),e(32870),e(96328)),A=(e(82859),e(2637)),b=e(56723);const m=(0,h.Ng)((function(a){return{...a.TiepNhanDon,role:(0,y.vh)(a.Auth.role,"tiep-nhan-don")}}),s.A)((a=>{document.title="Ti\u1ebfp nh\u1eadn \u0111\u01a1n";const[n,e]=(0,i.useState)(g.parse(a.location.search)),[t,s]=(0,i.useState)({}),[d,m]=(0,i.useState)(!1),[F,v]=(0,i.useState)(""),[x,M]=(0,S.D)(),[C,Y]=(0,i.useState)(!0),[K,L]=(0,i.useState)(!1),N=(0,T.W6)(),H=(0,h.wA)(),{DanhSachTiepNhanDon:I,tableLoading:w,DanhSachLoaiKhieuTo:k,DanhSachQuocTich:j,DanhSachDanToc:X,DanhSachTinh:E,DanhSachHuyen:Q,DanhSachXa:_,DanhSachChucVu:G,isDone:q,DanhSachHinhThucDaGiaiQuyet:B,DanhSachCanBoXuLy:J,DanhSachTenFile:O,DanhSachCap:P,DanhSachCoQuan:U}=a;(0,i.useEffect)((()=>{(0,y._Y)(n)}),[n]),(0,i.useEffect)((()=>{q&&p.A.GetSTTHoSo().then((a=>{n.tabsKey&&Number(n.tabsKey);a.data.Status>0&&(v("add"),s({SoDonThu:a.data.Data}),M(),Y(!1))}))}),[q]),(0,i.useEffect)((()=>{if(!w)if(Number(n.XuLyDonID)){const a=n.XuLyDonID;v("edit"),p.A.ChiTietDonThu({XuLyDonID:a}).then((a=>{a.data.Status>0?(s(a.data.Data?a.data.Data:{}),M(),m(!0),Y(!1)):(o.Ay.destroy(),o.Ay.error(a.data.Message))})).catch((a=>{o.Ay.destroy(),o.Ay.error(a.toString())}))}else p.A.GetSTTHoSo().then((a=>{a.data.Status>0&&(v("add"),s({SoDonThu:a.data.Data,isReload:!0}),M(),Y(!1))}))}),[w]),(0,i.useEffect)((()=>{a.getData()}),[]);const V=()=>{s({}),m(!1),M()};return(0,b.jsxs)(c.A,{children:[(0,b.jsx)(A.A,{children:(0,b.jsx)(r.A,{children:"Ti\u1ebfp nh\u1eadn \u0111\u01a1n"})}),(0,b.jsxs)(l.A,{isFullHeight:!0,children:[(0,b.jsx)(D,{}),(0,b.jsx)(u.A,{TiepNhanDon:!0,visible:d,dataEdit:t,action:F,loading:C,onCreate:async a=>{if(L(!0),a.XuLyDonID)if(a.DanhSachHoSoTaiLieu){const n=[];async function e(a,e){for(const h of a)if(!h.FileID){const a=new FormData;a.append("files",h),a.append("FileDinhKemStr",JSON.stringify({FileType:e.FileType,TenFile:(null===e||void 0===e?void 0:e.TenFile)||e.name}));try{const i=await p.A.UploadFile(a);var t;if(i.data.Status>0)e.DanhSachFileDinhKemID.push(null===(t=i.data.Data[0])||void 0===t?void 0:t.FileID),n.push(i.data.Data[0]);else L(!1),o.Ay.destroy(),o.Ay.warning(i.data.Message)}catch(i){console.error("Error uploading file:",i)}}}if(null!==a&&void 0!==a&&a.DanhSachHoSoTaiLieu)for(const t of a.DanhSachHoSoTaiLieu)t.DanhSachFileDinhKemID=[],null!==t&&void 0!==t&&t.FileDinhKem&&t&&await e(t.FileDinhKem,t);Promise.all(n).then((n=>{p.A.SuaDonThu(a).then((a=>{L(!1),a.data.Status>0?(o.Ay.destroy(),o.Ay.success(a.data.Message),V(),N.push("xu-ly-don-thu"),H(f.A.changeCurrent("xu-ly-don-thu"))):(o.Ay.destroy(),o.Ay.error("".concat(a.data.Message)))})).catch((a=>{o.Ay.destroy(),o.Ay.error("".concat(a.toString()))}))}))}else delete a.FileDinhKem,p.A.SuaDonThu(a).then((a=>{L(!1),a.data.Status>0?(o.Ay.destroy(),o.Ay.success(a.data.Message),V(),N.push("xu-ly-don-thu"),H(f.A.changeCurrent("xu-ly-don-thu"))):(o.Ay.destroy(),o.Ay.error("".concat(a.data.Message)))})).catch((a=>{o.Ay.destroy(),o.Ay.error("".concat(a.toString()))}));else if(a.DanhSachHoSoTaiLieu){const i=[];async function h(a,n){for(const h of a)if(!h.FileID){const a=new FormData;a.append("files",h),a.append("FileDinhKemStr",JSON.stringify({FileType:n.FileType,TenFile:(null===n||void 0===n?void 0:n.TenFile)||n.name}));try{const t=await p.A.UploadFile(a);var e;if(t.data.Status>0)n.DanhSachFileDinhKemID.push(null===(e=t.data.Data[0])||void 0===e?void 0:e.FileID),i.push(t.data.Data[0]);else L(!1),o.Ay.destroy(),o.Ay.warning(t.data.Message)}catch(t){console.error("Error uploading file:",t)}}}if(null!==a&&void 0!==a&&a.DanhSachHoSoTaiLieu)for(const s of a.DanhSachHoSoTaiLieu)s.DanhSachFileDinhKemID=[],null!==s&&void 0!==s&&s.FileDinhKem&&s&&await h(s.FileDinhKem,s);Promise.all(i).then((n=>{p.A.ThemMoiDonThu(a).then((a=>{L(!1),a&&a.data&&1===a.data.Status?(o.Ay.success(a.data.Message),V(),N.push("xu-ly-don-thu"),H(f.A.changeCurrent("xu-ly-don-thu"))):o.Ay.error("".concat(a&&a.data?a.data.Message:"L\u1ed7i h\u1ec7 th\u1ed1ng"))}))}))}else p.A.ThemMoiDonThu(a).then((a=>{L(!1),a&&a.data&&1===a.data.Status?(o.Ay.success(a.data.Message),V(),N.push("xu-ly-don-thu"),H(f.A.changeCurrent("xu-ly-don-thu"))):o.Ay.error("".concat(a&&a.data?a.data.Message:"L\u1ed7i h\u1ec7 th\u1ed1ng"))}))},onCancel:V,dataSource:I,DanhSachLoaiKhieuTo:k,DanhSachQuocTich:j,DanhSachDanToc:X,DanhSachTinh:E,DanhSachCoQuan:U,DanhSachHuyen:Q,DanhSachXa:_,DanhSachCap:P,DanhSachChucVu:G,DanhSachHinhThucDaGiaiQuyet:B,DanhSachCanBoXuLy:J,DanhSachTenFile:O,LoaiKhieuTo1ID:n.tabsKey?n.tabsKey:1,loadingSave:K},x)]})]})}))}}]);