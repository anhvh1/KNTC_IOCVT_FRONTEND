"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[4645],{97979:(a,e,t)=>{t.r(e),t.d(e,{default:()=>w});var u,n=t(57528),i=t(82483),l=t(53660),o=(t(53615),t(34045)),d=(t(81538),t(64684)),r=t(67353),s=t(46184),k=t(93445),h=t(65828),c=t(37735),g=t(54686),y=t.n(g),D=(t(30090),t(27302),t(15109)),v=t(82402),C=t(92378),p=t(18570),A=t(94690),q=t.n(A),S=t(22953),x=t(53361),T=t(33713),N=t(2637),f=t(56723);const b=S.Ay.div(u||(u=(0,n.A)([""]))),w=a=>{var e,t;const u=a.location.pathname.slice(a.location.pathname.lastIndexOf("/")+1),n=(0,p.VD)("user"),g=null===n||void 0===n?void 0:n.isAdmin,[A,S]=(0,i.useState)(C.parse(a.location.search)),[w,I]=(0,i.useState)(1),{ThongTinBaoCao:m,tableLoading:Y}=(0,v.d4)((a=>a.KKDLDauKy)),{DanhSachCoQuan:K}=(0,v.d4)((a=>a.DMCoQuan)),[j,L]=(0,i.useState)({}),[M,Q]=(0,i.useState)(!1),[E,R]=(0,i.useState)({}),[B,P]=(0,i.useState)([]),F=a=>{switch(a){case"ke-khai-du-lieu-dau-ky-tcd01":return"K\xea khai s\u1ed1 li\u1ec7u k\u1ebft qu\u1ea3 ti\u1ebfp c\xf4ng d\xe2n th\u01b0\u1eddng xuy\xean, \u0111\u1ecbnh k\u1ef3 v\xe0 \u0111\u1ed9t xu\u1ea5t";case"ke-khai-du-lieu-dau-ky-tcd02":return"K\xea khai s\u1ed1 li\u1ec7u \u0111\u1ea7u k\u1ef3 k\u1ebft qu\u1ea3 ph\xe2n lo\u1ea1i, x\u1eed l\xfd \u0111\u01a1n qua ti\u1ebfp c\xf4ng d\xe2n";case"ke-khai-du-lieu-dau-ky-xld01":return"K\xea khai s\u1ed1 li\u1ec7u \u0111\u1ea7u k\u1ef3 k\u1ebft qu\u1ea3 x\u1eed l\xfd \u0111\u01a1n";case"ke-khai-du-lieu-dau-ky-xld02":return"K\xea khai s\u1ed1 li\u1ec7u \u0111\u1ea7u k\u1ef3 k\u1ebft qu\u1ea3 x\u1eed l\xfd \u0111\u01a1n khi\u1ebfu n\u1ea1i";case"ke-khai-du-lieu-dau-ky-xld03":return"K\xea khai s\u1ed1 li\u1ec7u \u0111\u1ea7u k\u1ef3 k\u1ebft qu\u1ea3 x\u1eed l\xfd \u0111\u01a1n t\u1ed1 c\xe1o";case"ke-khai-du-lieu-dau-ky-xld04":return"K\xea khai s\u1ed1 li\u1ec7u \u0111\u1ea7u k\u1ef3 k\u1ebft qu\u1ea3 x\u1eed l\xfd \u0111\u01a1n ki\u1ebfn ngh\u1ecb ph\u1ea3n \xe1nh";case"ke-khai-du-lieu-dau-ky-kqgq01":return"K\xea khai s\u1ed1 li\u1ec7u \u0111\u1ea7u k\u1ef3 k\u1ebft qu\u1ea3 gi\u1ea3i quy\u1ebft thu\u1ed9c th\u1ea9m quy\u1ec1n";case"ke-khai-du-lieu-dau-ky-kqgq02":return"K\xea khai s\u1ed1 li\u1ec7u \u0111\u1ea7u k\u1ef3 k\u1ebft qu\u1ea3 thi h\xe0nh quy\u1ebft \u0111\u1ecbnh gi\u1ea3i quy\u1ebft khi\u1ebfu n\u1ea1i";case"ke-khai-du-lieu-dau-ky-kqgq03":return"K\xea khai s\u1ed1 li\u1ec7u \u0111\u1ea7u k\u1ef3 k\u1ebft qu\u1ea3 gi\u1ea3i quy\u1ebft t\u1ed1 c\xe1o thu\u1ed9c th\u1ea9m quy\u1ec1n";case"ke-khai-du-lieu-dau-ky-kqgq04":return"K\xea khai s\u1ed1 li\u1ec7u \u0111\u1ea7u k\u1ef3 k\u1ebft qu\u1ea3 th\u1ef1c hi\u1ec7n k\u1ebft lu\u1eadn n\u1ed9i dung t\u1ed1 c\xe1o"}};document.title=F(u);const V=(0,v.wA)();(0,i.useEffect)((()=>{const a=(a=>{switch(a){case"ke-khai-du-lieu-dau-ky-tcd01":return 1;case"ke-khai-du-lieu-dau-ky-tcd02":return 2;case"ke-khai-du-lieu-dau-ky-xld01":return 3;case"ke-khai-du-lieu-dau-ky-xld02":return 4;case"ke-khai-du-lieu-dau-ky-xld03":return 5;case"ke-khai-du-lieu-dau-ky-xld04":return 6;case"ke-khai-du-lieu-dau-ky-kqgq01":return 7;case"ke-khai-du-lieu-dau-ky-kqgq02":return 8;case"ke-khai-du-lieu-dau-ky-kqgq03":return 9;case"ke-khai-du-lieu-dau-ky-kqgq04":return 10}})(u),e={...A,LoaiBaoCao:a,NgaySuDung:A.DenNgay?A.DenNgay:q()().format("YYYY/MM/DD")};S(e),V(D.A.getCoQuan())}),[]),(0,i.useLayoutEffect)((()=>{V(D.A.clearData())}),[]),(0,i.useEffect)((()=>{(0,p._Y)(A)}),[A]),(0,i.useEffect)((()=>{V(c.A.getInitData())}),[]);const _=(a,e)=>{let t=A,u={value:a,property:e},n=(0,p.D5)(t,u,null);S(n)},H=()=>{const a=A.NgaySuDung?(0,p.Yq)(A.NgaySuDung):null;V(D.A.getData({...A,NgaySuDung:a}))},{CoQuanID:$,NgaySuDung:G}=A,O=g?$&&G&&(null===m||void 0===m||null===(e=m.DataTable)||void 0===e?void 0:e.TableData):G&&(null===m||void 0===m||null===(t=m.DataTable)||void 0===t?void 0:t.TableData);return(0,f.jsx)(b,{children:(0,f.jsxs)(l.A,{children:[(0,f.jsx)(N.A,{children:(0,f.jsx)(o.A,{children:F(u)})}),(0,f.jsxs)(d.A,{children:[(0,f.jsx)(r.A,{Step:w,isLeft:!0,children:1===w?(0,f.jsxs)(f.Fragment,{children:[g?(0,f.jsx)(h.f7,{showSearch:!0,treeData:K,onChange:a=>_(a,"CoQuanID"),style:{width:400},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ecdn \u0111\u01a1n v\u1ecb",allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title"}):null,(0,f.jsx)(h.lr,{style:{width:"200px"},placeholder:"Ng\xe0y s\u1eed d\u1ee5ng",value:null!==A&&void 0!==A&&A.NgaySuDung?y()(null===A||void 0===A?void 0:A.NgaySuDung,"YYYY/MM/DD"):null,format:"DD/MM/YYYY",onChange:(a,e)=>_(a?(0,p.Yq)(a):null,"NgaySuDung")}),(0,f.jsx)(h.$n,{onClick:H,children:"T\u1ea1o B\xe1o C\xe1o"}),(0,f.jsx)(h.$n,{style:{float:"right"},type:"primary",disabled:!O,onClick:()=>{const a=A.NgaySuDung.split("/"),e="".concat(a[2],"-").concat(a[0],"-").concat(a[1]),t=[...B],u=t.find((a=>(null===a||void 0===a?void 0:a.CoQuanID)===Number(null===A||void 0===A?void 0:A.CoQuanID)?Number(null===A||void 0===A?void 0:A.CoQuanID):Number(null===n||void 0===n?void 0:n.CoQuanID)));u&&(u.NgaySuDung=e,u.LoaiBaoCao=A.LoaiBaoCao),t.forEach(((a,e)=>{a.DataArr&&a.DataArr.forEach(((a,u)=>{var n,i,l;(null===a||void 0===a?void 0:a.TypeEdit)===T.TYPEEDIT.Number?t[e].DataArr[u].Content=null!==a&&void 0!==a&&a.Content?(l=null===a||void 0===a||null===(n=a.Content)||void 0===n?void 0:n.toString())?null===l||void 0===l?void 0:l.replace(".","").replace(",","."):"":null:t[e].DataArr[u].Content=null!==a&&void 0!==a&&a.Content?null===a||void 0===a||null===(i=a.Content)||void 0===i?void 0:i.toString():null}))})),x.A.SaveReport(t).then((a=>{a.data.Status>0?(k.Ay.destroy(),k.Ay.success(a.data.Message),V(D.A.getData({...A}))):(k.Ay.destroy(),k.Ay.warning(a.data.Message))})).catch((a=>{k.Ay.destroy(),k.Ay.warning(a.toString())}))},children:"L\u01b0u b\xe1o c\xe1o"})]}):null}),(0,f.jsx)("div",{className:"unit-report",dangerouslySetInnerHTML:{__html:null===m||void 0===m?void 0:m.DonViTinh}}),(0,f.jsx)(s.A,{title:!1,setThongTinBaoCaoChiTiet:L,setListChangeRowReport:P,ListChangeRowReport:B,setLoadingDetailsReport:Q,ThongTinBaoCaoChiTiet:j,DetailsReportPayload:E,loadingDetailsReport:M,handleCreateReport:H,GetChiTietDonThu:async(a,e,t,u,n)=>{var i,l;const o=null!==A&&void 0!==A&&A.NgaySuDung?(0,p.Yq)(A.NgaySuDung):"";1===w?null===m||void 0===m||null===(i=m.DataTable)||void 0===i||i.TableData:2===w&&(null===j||void 0===j||null===(l=j.DataTable)||void 0===l||l.TableData);let d=[];return R({CapID:a,Index:e,CoQuanID:t}),"set"===u?(Q(!0),x.A.ChiTietDonThu({NgaySuDung:o,CapID:a,Index:e,CoQuanID:t}).then((a=>{if(Q(!1),a.data.Status>0){const e={...a.data.Data};L(e)}else k.Ay.destroy(),k.Ay.warning(a.data.Message)})).catch((a=>{Q(!1),k.Ay.destroy(),k.Ay.warning(a.toString())}))):"get"===u&&(Q(!0),await x.A.ChiTietDonThu({NgaySuDung:o,CapID:a,Index:e,CoQuanID:t,PageNumber:n}).then((a=>{Q(!1),a.data.Status>0?d=a.data.Data.DataTable.TableData:(k.Ay.destroy(),k.Ay.warning(a.data.Message))})).catch((a=>{Q(!1),k.Ay.destroy(),k.Ay.warning(a.toString())}))),"get"===u?d:[]},onRollBack:()=>{I(1),L({})},ThongTinBaoCao:m,tableLoading:Y,setStep:I,Step:w,isViewDetail:!1})]})]})})}}}]);