"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[4140,2782],{2637:(a,n,e)=>{e.d(n,{A:()=>r});e(82483);var t,l=e(57528),c=e(22953);e(6535);const i=c.Ay.div(t||(t=(0,l.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 10px 0;\n  gap: 10px;\n  width: 100%;\n"])));var h=e(56723);const r=a=>(0,h.jsx)(i,{className:"wrapper-top",children:a.children})},67466:(a,n,e)=>{e.d(n,{D:()=>l});var t=e(82483);function l(a){const[n,e]=(0,t.useState)(0);return[n,()=>{e(n+1)}]}},64140:(a,n,e)=>{e.r(n),e.d(n,{default:()=>V});var t=e(72741),l=e(93445),c=e(256),i=e(53374),h=e(82483),r=e(82402),o=e(53660),s=e(34045),u=e(81538),d=e(64684),p=e(67353),C=e(53615),g=e(65828),x=e(18570),f=e(67466),m=e(92378),S=e(73465),D=(e(94690),e(33713)),T=e(79948),v=e(22238),y=e(38674),Q=e(56723);const{Item:j,useForm:I}=T.A,A=a=>{const[n]=I(),[e,l]=(0,h.useState)(1),{dataEdit:c,loading:i,visible:r,action:o}=a,[s,u]=(0,h.useState)([]),[d,p]=(0,h.useState)([{},{}]);(0,h.useEffect)((()=>{c.DanhSachCoQuan||v.A.GetAllCoQuan().then((a=>{if(a.data.Status>0){u(a.data.Data);const n=[...d];n.forEach(((e,t)=>{n[t].DanhSachCoQuan=a.data.Data,n[t].TrangThai=1})),p(n)}}))}),[]),(0,h.useEffect)((()=>{if(c&&c.DanhSachCoQuan){u(c.DanhSachCoQuanCu?c.DanhSachCoQuanCu:[]);const a=[],e=[...c.DanhSachCoQuan].filter((a=>a.CoQuanCuID||a.CoQuanMoiID)).map((a=>({CoQuanID:!0===a.laSapNhap?a.CoQuanCuID:a.CoQuanMoiID,TrangThai:a.TrangThai}))),t=e.map((a=>a.CoQuanID));e.forEach((n=>{if(n.CoQuanID){const e=t.filter((a=>a!==n.CoQuanID));a.push({DanhSachCoQuan:c.DanhSachCoQuanCu.filter((a=>!e.includes(a.CoQuanID))),CoQuanID:n.CoQuanID,TrangThai:n.TrangThai})}}));const i={};a.forEach(((a,n)=>i["CoQuanID_".concat(n)]=a.CoQuanID)),n&&n.setFieldsValue({...c,...i,laSapNhap:!0===c.laSapNhap?1:2}),p(a),c.laSapNhap&&l(1),c.laSapNhap||l(2)}}),[]);const{disabled:C}=a;return(0,Q.jsx)(g.aF,{title:"C\u1ea5u h\xecnh chia t\xe1ch, s\xe1t nh\u1eadp c\u01a1 quan",width:1e3,visible:r,onCancel:a.onCancel,footer:[(0,Q.jsx)(g.$n,{onClick:a.onCancel,children:"H\u1ee7y"},"back"),C?null:(0,Q.jsx)(g.$n,{htmlType:"submit",type:"primary",form:"formmonhoc",loading:i,onClick:async e=>{e.preventDefault();const t=await n.validateFields();t.laSapNhap=1===t.laSapNhap,t.laSapNhap?t.DanhSachCoQuan=d.map((a=>({...a,CoQuanCuID:a.CoQuanID,DanhSachCoQuan:[]}))):t.DanhSachCoQuan=d.map((a=>({...a,CoQuanMoiID:a.CoQuanID,DanhSachCoQuan:[]}))),a.onCreate(t)},children:"L\u01b0u"},"submit")],children:(0,Q.jsxs)(T.A,{form:n,initialValues:{laSapNhap:1,TrangThai:1},children:[(0,Q.jsx)(j,{label:"Ch\u1ecdn Tr\u1ea1ng th\xe1i",name:"laSapNhap",className:"ant-form-title__left",...D.REQUIRED,children:(0,Q.jsxs)(g.l6,{onChange:a=>{l(a)},disabled:C,children:[(0,Q.jsx)(g.c$,{value:1,children:"S\xe1t nh\u1eadp"}),(0,Q.jsx)(g.c$,{value:2,children:"Chia t\xe1ch"})]})}),(0,Q.jsx)("div",{className:"btn-right",style:{textAlign:"right",marginTop:"10px"},children:(0,Q.jsx)(g.$n,{type:"primary",onClick:()=>{const a=[...d],n=a.filter((a=>a.CoQuanID)).map((a=>({CoQuanID:a.CoQuanID}))),e=[];n.forEach((a=>e.push(a.CoQuanID))),a.push({DanhSachCoQuan:s.filter((a=>!e.includes(a.CoQuanID))),TrangThai:1}),p(a)},disabled:C,children:"Th\xeam c\u01a1 quan"})}),1!==e?(0,Q.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"auto 300px",alignItems:"end",gap:"10px"},children:[(0,Q.jsx)(j,{label:"C\u01a1 quan c\u0169",className:"ant-form-title__left",name:"CoQuanCuID",...D.REQUIRED,children:(0,Q.jsx)(g.l6,{disabled:C,children:s.map((a=>(0,Q.jsx)(g.c$,{value:a.CoQuanID,children:a.TenCoQuan})))})}),(0,Q.jsx)(j,{className:"ant-form-title__left",name:"TrangThai",children:(0,Q.jsxs)(g.l6,{disabled:C,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i",style:{width:"100%"},children:[(0,Q.jsx)(g.c$,{value:1,children:"T\u1ea1m d\u1eebng"}),(0,Q.jsx)(g.c$,{value:2,children:"Ho\u1ea1t \u0111\u1ed9ng"})]})})]}):null,d?d.map(((a,n)=>{var l;return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)("p",{style:{marginTop:"10px"},children:1===e?"C\u01a1 quan c\u0169":"C\u01a1 quan m\u1edbi"}),(0,Q.jsxs)("div",{gutter:[10],style:{display:"grid",gridTemplateColumns:1===e?"60% auto 100px":"auto 100px",gap:"10px",alignItems:"center"},children:[(0,Q.jsx)(j,{style:{marginBottom:0},name:"CoQuanID_".concat(n),...D.REQUIRED,children:(0,Q.jsx)(g.l6,{disabled:C,style:{width:"100%"},onChange:a=>((a,n)=>{const e=[...d];e[n].CoQuanID=a;const t=e.filter(((a,e)=>n!==e)),l=e.filter((a=>a.CoQuanID)).map((a=>({CoQuanID:a.CoQuanID})));t.forEach((a=>{const n=l.filter((n=>n.CoQuanID!==a.CoQuanID)),e=[];n.forEach((a=>e.push(a.CoQuanID))),a.DanhSachCoQuan&&(a.DanhSachCoQuan=s.filter((a=>!e.includes(a.CoQuanID))))})),p(e)})(a,n),value:a.CoQuanID,children:null===(l=a.DanhSachCoQuan)||void 0===l?void 0:l.map((a=>(0,Q.jsx)(g.c$,{value:a.CoQuanID,children:a.TenCoQuan})))})}),2!==e?(0,Q.jsxs)(g.l6,{disabled:C,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i",style:{width:"100%"},value:a.TrangThai,onChange:a=>((a,n)=>{const e=[...d];e[n].TrangThai=a,p(e)})(a,n),children:[(0,Q.jsx)(g.c$,{value:1,children:"T\u1ea1m d\u1eebng"}),(0,Q.jsx)(g.c$,{value:2,children:"Ho\u1ea1t \u0111\u1ed9ng"})]}):null,(0,Q.jsx)("div",{style:{textAlign:"right"},children:(0,Q.jsxs)(g.$n,{disabled:C,onClick:()=>((a,n)=>{t.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a c\u01a1 quan n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{const e=[...d],t=e.filter(((a,e)=>n!==e));a&&t.forEach(((n,e)=>{n.DanhSachCoQuan.push({...s.find((n=>n.CoQuanID===a))})})),e.splice(n,1),p(e)}})})(a.CoQuanID,n),type:"danger",children:[(0,Q.jsx)(y.A,{}),"X\xf3a"]})})]})]})})):null,2!==e?(0,Q.jsx)(j,{label:"C\u01a1 quan m\u1edbi",className:"ant-form-title__left",name:"CoQuanMoiID",...D.REQUIRED,children:(0,Q.jsx)(g.l6,{disabled:C,children:s.map((a=>(0,Q.jsx)(g.c$,{value:a.CoQuanID,children:a.TenCoQuan})))})}):null]})})};var w=e(58168);const N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M926 164H94c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V196c0-17.7-14.3-32-32-32zm-40 632H134V236h752v560zm-658.9-82.3c3.1 3.1 8.2 3.1 11.3 0l172.5-172.5 114.4 114.5c3.1 3.1 8.2 3.1 11.3 0l297-297.2c3.1-3.1 3.1-8.2 0-11.3l-36.8-36.8a8.03 8.03 0 00-11.3 0L531 565 416.6 450.5a8.03 8.03 0 00-11.3 0l-214.9 215a8.03 8.03 0 000 11.3l36.7 36.9z"}}]},name:"fund",theme:"outlined"};var b=e(56594),M=function(a,n){return h.createElement(b.A,(0,w.A)({},a,{ref:n,icon:N}))};const k=h.forwardRef(M);var q=e(2782),E=e(26716),H=e(54686),z=e.n(H);const{Item:_,useForm:L}=T.A,R=a=>{const[n,e]=(0,h.useState)({}),[t,l]=(0,h.useState)({});(0,h.useEffect)((()=>{var a;a=t,S.A.DanhSachCauHinhLichSu(a).then((a=>{a.data.Status>0&&e({DanhSachCauHinhLichSu:a.data.Data,TotalRow:a.data.TotalRow})}))}),[t]);const c=t.PageNumber?parseInt(t.PageNumber):1,i=t.PageSize?parseInt(t.PageSize):(0,x.WT)(),r=[{title:"STT",width:"5%",align:"center",render:(a,n,e)=>(0,Q.jsx)("span",{children:(c-1)*i+(e+1)})},{title:"T\xean c\u01a1 quan m\u1edbi",dataIndex:"TenCoQuanMoi",align:"left",width:30,render:(a,n,e)=>(0,Q.jsx)("p",{dangerouslySetInnerHTML:{__html:n.TenCoQuanMoi}})},{title:"T\xean c\u01a1 quan c\u0169",dataIndex:"TenChiaTachSapNhap",align:"left",width:30,render:(a,n,e)=>(0,Q.jsx)("p",{dangerouslySetInnerHTML:{__html:n.TenCoQuanCu}})},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"ChiaTachSapNhap",align:"left",width:30},{title:"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",width:"15%",align:"center",dataIndex:"TenNguoiThucHien"},{title:"Ng\xe0y th\u1ef1c hi\u1ec7n",align:"left",width:30,render:(a,n,e)=>(0,Q.jsx)("p",{children:n.NgayThucHien?z()(n.NgayThucHien).format("DD/MM/YYYY"):null})}],{visible:o,onCancel:s,loading:u}=a;return(0,Q.jsxs)(g.aF,{title:"L\u1ecbch s\u1eed c\u1ea5u h\xecnh chia t\xe1ch, s\xe1t nh\u1eadp c\u01a1 quan",width:1e3,visible:o,onCancel:a.onCancel,footer:[(0,Q.jsx)(g.$n,{onClick:a.onCancel,children:"\u0110\xf3ng"},"back")],children:[(0,Q.jsx)(p.A,{children:(0,Q.jsx)(g.NJ,{defaultValue:t.Keyword,placeholder:"Nh\u1eadp t\xean c\u01a1 quan",style:{width:300},onSearch:a=>((a,n)=>{let e={...t},c={value:a,property:n},i=(0,x.D5)(e,c,null);l(i)})(a,"Keyword")})}),(0,Q.jsx)(C.Ay,{columns:r,dataSource:n.DanhSachCauHinhLichSu,onChange:(a,n,e)=>{let c=t,i={pagination:a,filters:n,sorter:e},h=(0,x.D5)(c,null,i);l(h)},minHeight:400,pagination:{showSizeChanger:!0,showTotal:(a,n)=>"T\u1eeb ".concat(n[0]," \u0111\u1ebfn ").concat(n[1]," tr\xean ").concat(a," k\u1ebft qu\u1ea3"),total:n.TotalRow,current:c,pageSize:i},rowKey:a=>a.ChiaTachSapNhapID})]})};var $=e(2637);const V=(0,r.Ng)((function(a){return{...a.DanhMucChiaTachSapNhap,role:(0,x.vh)(a.Auth.role,"chia-tach-sap-nhap")}}),i.A)((a=>{document.title="Danh M\u1ee5c Chia T\xe1ch S\xe1p Nh\u1eadp";const[n,e]=(0,h.useState)(m.parse(a.location.search)),[i,r]=(0,h.useState)({}),[D,T]=(0,h.useState)(!1),[v,j]=(0,h.useState)(""),[I,w]=(0,f.D)(),[N,b]=(0,f.D)(),[M,H]=(0,h.useState)(!1),[z,_]=(0,h.useState)([]),[L,V]=(0,h.useState)(!1),[K,P]=(0,h.useState)(!1);(0,h.useEffect)((()=>{(0,x._Y)(n),a.getList(n)}),[n]),(0,h.useEffect)((()=>{a.getList(n)}),[]);const B=()=>{j(""),_([]),r({}),T(!1)},F=e=>(0,Q.jsxs)("div",{className:"action-btn",children:[null!==U&&void 0!==U&&U.edit?(0,Q.jsx)(c.A,{title:"Chi ti\u1ebft c\u1ea5u h\xecnh chia t\xe1ch, s\xe1p nh\u1eadp c\u01a1 quan",children:(0,Q.jsx)(k,{onClick:()=>{return a=e,void S.A.DanhSachCoQuanCu().then((n=>{n.data.Status>0?(r({...a,DanhSachCoQuanCu:n.data.Data}),w(),T(!0),P(!0)):(l.Ay.destroy(),l.Ay.error(n.data.Message))})).catch((a=>{l.Ay.destroy(),l.Ay.error(a.toString())}));var a}})}):"",null!==U&&void 0!==U&&U.delete?(0,Q.jsx)(c.A,{title:"X\xf3a",children:(0,Q.jsx)(y.A,{onClick:()=>{return delete(c=e).NguoiThucHienID,delete c.NgayThucHien,void t.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a c\u01a1 quan n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{V(!0),S.A.XoaChiaTachSapNhap(c).then((e=>{e.data.Status>0?(V(!1),a.getList(n),l.Ay.destroy(),l.Ay.success(e.data.Message)):(l.Ay.destroy(),l.Ay.error(e.data.Message))})).catch((a=>{l.Ay.destroy(),l.Ay.error(a.toString())}))}});var c}})}):""]}),{DanhSachChiaTachSapNhap:X,TotalRow:Y,role:U}=a,J=n.PageNumber?parseInt(n.PageNumber):1,O=n.PageSize?parseInt(n.PageSize):(0,x.WT)(),W=[{title:"STT",width:"5%",align:"center",render:(a,n,e)=>(0,Q.jsx)("span",{children:(J-1)*O+(e+1)})},{title:"T\xean c\u01a1 quan m\u1edbi",dataIndex:"TenCoQuanMoi",align:"left",width:30,render:(a,n,e)=>(0,Q.jsx)("p",{dangerouslySetInnerHTML:{__html:n.TenCoQuanMoi}})},{title:"T\xean c\u01a1 quan c\u0169",dataIndex:"TenChiaTachSapNhap",align:"left",width:30,render:(a,n,e)=>(0,Q.jsx)("p",{dangerouslySetInnerHTML:{__html:n.TenCoQuanCu}})},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"ChiaTachSapNhap",align:"left",width:30},{title:"Thao t\xe1c",width:"15%",align:"center",render:(a,n)=>F(n)}];return(0,Q.jsxs)(o.A,{children:[(0,Q.jsxs)($.A,{children:[(0,Q.jsx)(s.A,{children:"Danh M\u1ee5c chia t\xe1ch, s\xe1p nh\u1eadp c\u01a1 quan"}),(0,Q.jsxs)(u.A,{children:[U&&U.add?(0,Q.jsxs)(g.$n,{type:"primary",onClick:()=>{j("add"),r({}),w(),T(!0),P(!1)},children:[(0,Q.jsx)(q.A,{}),"Th\xeam th\xf4ng tin"]}):null,(0,Q.jsxs)(g.$n,{type:"primary",onClick:()=>{b(),H(!0)},children:[(0,Q.jsx)(E.A,{}),"Xem l\u1ecbch s\u1eed"]})]})]}),(0,Q.jsxs)(d.A,{children:[(0,Q.jsx)(p.A,{children:(0,Q.jsx)(g.NJ,{defaultValue:n.Keyword,placeholder:"Nh\u1eadp t\xean c\u01a1 quan",style:{width:300},onSearch:a=>((a,t)=>{let l=n,c={value:a,property:t},i=(0,x.D5)(l,c,null);e(i),_([])})(a,"Keyword"),allowClear:!0})}),(0,Q.jsx)(C.Ay,{columns:W,dataSource:X,onChange:(a,t,l)=>{let c=n,i={pagination:a,filters:t,sorter:l},h=(0,x.D5)(c,null,i);e(h),_([])},pagination:{showSizeChanger:!0,showTotal:(a,n)=>"T\u1eeb ".concat(n[0]," \u0111\u1ebfn ").concat(n[1]," tr\xean ").concat(a," k\u1ebft qu\u1ea3"),total:Y,current:J,pageSize:O},rowKey:a=>a.ChiaTachSapNhapID})]}),(0,Q.jsx)(A,{visible:D,dataEdit:i,action:v,loading:L,onCreate:e=>{V(!0),S.A.CapNhatChiaTachSapNhap(e).then((e=>{V(!1),e.data.Status>0?(l.Ay.destroy(),l.Ay.success(e.data.Message),B(),a.getList(n)):(V(!1),l.Ay.destroy(),l.Ay.error(e.data.Message))})).catch((a=>{V(!1),l.Ay.destroy(),l.Ay.error(a.toString())}))},onCancel:B,DanhSachChiaTachSapNhap:X,disabled:K},I),(0,Q.jsx)(R,{visible:M,onCancel:()=>{H(!1)}},N)]})}))},38674:(a,n,e)=>{e.d(n,{A:()=>r});var t=e(58168),l=e(82483);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var i=e(56594),h=function(a,n){return l.createElement(i.A,(0,t.A)({},a,{ref:n,icon:c}))};const r=l.forwardRef(h)},26716:(a,n,e)=>{e.d(n,{A:()=>r});var t=e(58168),l=e(82483);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M956 686.5l-.1-.1-.1-.1C911.7 593 843.4 545 752.5 545s-159.2 48.1-203.4 141.3v.1a42.92 42.92 0 000 36.4C593.3 816 661.6 864 752.5 864s159.2-48.1 203.4-141.3c5.4-11.5 5.4-24.8.1-36.2zM752.5 800c-62.1 0-107.4-30-141.1-95.5C645 639 690.4 609 752.5 609c62.1 0 107.4 30 141.1 95.5C860 770 814.6 800 752.5 800z"}},{tag:"path",attrs:{d:"M697 705a56 56 0 10112 0 56 56 0 10-112 0zM136 232h704v253h72V192c0-17.7-14.3-32-32-32H96c-17.7 0-32 14.3-32 32v520c0 17.7 14.3 32 32 32h352v-72H136V232z"}},{tag:"path",attrs:{d:"M724.9 338.1l-36.8-36.8a8.03 8.03 0 00-11.3 0L493 485.3l-86.1-86.2a8.03 8.03 0 00-11.3 0L251.3 543.4a8.03 8.03 0 000 11.3l36.8 36.8c3.1 3.1 8.2 3.1 11.3 0l101.8-101.8 86.1 86.2c3.1 3.1 8.2 3.1 11.3 0l226.3-226.5c3.2-3.1 3.2-8.2 0-11.3z"}}]},name:"fund-view",theme:"outlined"};var i=e(56594),h=function(a,n){return l.createElement(i.A,(0,t.A)({},a,{ref:n,icon:c}))};const r=l.forwardRef(h)},2782:(a,n,e)=>{e.d(n,{A:()=>r});var t=e(58168),l=e(82483);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};var i=e(56594),h=function(a,n){return l.createElement(i.A,(0,t.A)({},a,{ref:n,icon:c}))};const r=l.forwardRef(h)}}]);