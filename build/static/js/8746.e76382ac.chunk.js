"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[8746,2782],{74405:(e,n,t)=>{t.d(n,{$:()=>h,A:()=>o});var a,i=t(26418),l=t(57528),c=t(22953),r=t(6535);const s=(e=>(0,c.Ay)(e)(a||(a=(0,l.A)(["\n  &.ant-checkbox-wrapper {\n    font-size: 13px;\n    color: ",";\n\n    .ant-checkbox {\n      top: inherit;\n    }\n\n    .ant-checkbox-checked .ant-checkbox-inner,\n    .ant-checkbox-indeterminate .ant-checkbox-inner {\n      background-color: ",";\n      border-color: ",";\n    }\n\n    .ant-checkbox:hover .ant-checkbox-inner,\n    .ant-checkbox-input:focus + .ant-checkbox-inner {\n      border-color: ",";\n    }\n\n    &:hover {\n      .ant-checkbox-inner {\n        border-color: ",";\n      }\n    }\n  }\n"])),(0,r.palette)("text",1),(0,r.palette)("primary",0),(0,r.palette)("primary",0),(0,r.palette)("primary",0),(0,r.palette)("primary",0)))(i.A),h=i.A.Group,o=s},2637:(e,n,t)=>{t.d(n,{A:()=>s});t(82483);var a,i=t(57528),l=t(22953);t(6535);const c=l.Ay.div(a||(a=(0,i.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 10px 0;\n  gap: 10px;\n  width: 100%;\n"])));var r=t(56723);const s=e=>(0,r.jsx)(c,{className:"wrapper-top",children:e.children})},67466:(e,n,t)=>{t.d(n,{D:()=>i});var a=t(82483);function i(e){const[n,t]=(0,a.useState)(0);return[n,()=>{t(n+1)}]}},88746:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Y});var a=t(57528),i=t(25617),l=t(93445),c=t(72741),r=t(37825),s=t(17018),h=t(82483),o=t(82402),d=t(53660),u=t(34045),p=t(81538),m=t(64684),T=t(67353),g=t(53615),x=t(74405),A=t(33713),f=t(2145),y=t(65828),D=t(18570),b=t(67466),j=t(92378),v=t(94690),S=t.n(v),k=t(79948),w=t(91012),L=t(256),F=(t(8118),t(38675)),I=(t(18682),t(38674)),N=t(56723);const{Item:C,useForm:M}=k.A,E=e=>{const[n]=M(),[t,a]=(0,h.useState)(),{dataEdit:i,loading:c,visible:r,action:s,DanhSachLoaiThuTuc:o}=e,[d,u]=(0,h.useState)([]),[p,m]=(0,h.useState)([]),[T,g]=(0,h.useState)(!1);(0,h.useEffect)((()=>{i&&i.TrinhTuThuTucID&&n&&n.setFieldsValue({...i}),i&&i.DanhSachFileDinhKem&&u(i.DanhSachFileDinhKem)}),[]);const f=(e,n,t)=>{var a;const i=null===(a=(0,D.VD)("data_config"))||void 0===a?void 0:a.fileLimit,c=e.size/1024/1024<i,r=[];return t.forEach((e=>{d.filter((n=>n.TenFileGoc===e.name)).length&&r.push(e)})),c?b(e,n,t):l.Ay.error("File \u0111\xednh k\xe8m ph\u1ea3i nh\u1ecf h\u01a1n ".concat(i,"MB")),!1},b=(e,n,t)=>{const a=new FileReader;a.addEventListener("load",(()=>n(a.result,e,t))),a.readAsDataURL(e)},j=(e,n,t)=>{const a=[...d,...t];u(a),g(!1)},v=(e,n,t)=>{const a=n.name.slice(n.name.lastIndexOf(".")+1);if(["png","jpg","jpeg"].includes(a)){m([n])}else l.Ay.destroy(),l.Ay.warning("Vui l\xf2ng \u0111\xednh k\xe8m file \u1ea3nh")};return(0,N.jsx)(y.aF,{title:"".concat("edit"===s?"C\u1eadp nh\u1eadt":"Th\xeam","  tr\xecnh t\u1ef1 th\u1ee7 t\u1ee5c"),width:600,visible:r,onCancel:e.onCancel,footer:[(0,N.jsx)(y.$n,{onClick:e.onCancel,loading:c,children:"H\u1ee7y"},"back"),(0,N.jsx)(y.$n,{htmlType:"submit",type:"primary",form:"formquoctich",loading:c,onClick:async t=>{t.preventDefault(),n.validateFields().then((n=>{const t={...n};t.DanhSachHoSoTaiLieu=d,t.DanhSachThumbnail=p,e.onCreate(t)}))},children:"L\u01b0u"},"submit")],children:(0,N.jsxs)(k.A,{form:n,name:"formbieumau",initialValues:{TrangThai:1,CapID:4,DuocSuDung:!0},children:["edit"===s?(0,N.jsx)(C,{name:"TrinhTuThuTucID",hidden:!0}):"",(0,N.jsx)(C,{label:"Ti\xeau \u0111\u1ec1 ",name:"TieuDe",...A.ITEM_LAYOUT,rules:[A.REQUIRED],children:(0,N.jsx)(y.pd,{})}),(0,N.jsx)(C,{label:"N\u1ed9i dung th\u1ee7 t\u1ee5c",name:"NoiDung",...A.ITEM_LAYOUT,rules:[A.REQUIRED],children:(0,N.jsx)(y.TM,{})}),(0,N.jsxs)(C,{label:"File Thumbnail",...A.ITEM_LAYOUT,rules:[A.REQUIRED],children:[(0,N.jsx)(w.A,{showUploadList:!1,beforeUpload:(e,n)=>f(e,v,n),accept:".png, .jpeg",disabled:c,children:(0,N.jsxs)(y.$n,{loading:c,className:"btn-upload",children:[(0,N.jsx)(F.A,{})," Upload"]})}),p?p.map(((e,n)=>(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,N.jsx)("p",{children:(0,N.jsx)("a",{children:e.name})}),(0,N.jsx)(I.A,{onClick:()=>(e=>{const n=[...p];n.splice(e,1),m(n)})(n)})]}))):null]}),(0,N.jsx)(C,{label:"Hi\u1ec3n th\u1ecb",name:"Public",...A.ITEM_LAYOUT,valuePropName:"checked",children:(0,N.jsx)(x.A,{defaultChecked:null===i||void 0===i?void 0:i.Public})}),(0,N.jsx)("div",{className:"wrapper-file",children:(0,N.jsx)(w.A,{showUploadList:!1,multiple:!0,beforeUpload:(e,n)=>f(e,j,n),disabled:c,children:(0,N.jsx)(y.$n,{type:"primary",loading:c,className:"btn-upload",children:"Ch\u1ecdn file t\u1eeb li\u1ec7u t\u1eeb m\xe1y t\xednh"})})}),d&&null!==d&&void 0!==d&&d.length?(0,N.jsx)("div",{style:{marginTop:"10px"},className:"box-file",children:(0,N.jsxs)("table",{children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{style:{width:"5%"},children:"STT"}),(0,N.jsx)("th",{style:{width:"30%"},children:"File \u0111\xednh k\xe8m"}),(0,N.jsx)("th",{style:{width:"10%",textAlign:"center"},children:"Thao t\xe1c"})]})}),(0,N.jsx)("tbody",{children:d.map(((e,n)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{style:{textAlign:"center"},children:n+1}),(0,N.jsx)("td",{children:(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.TenFile)}),(0,N.jsx)("td",{style:{textAlign:"center"},children:(0,N.jsx)("span",{children:(0,N.jsx)(L.A,{title:"X\xf3a file",children:(0,N.jsx)(I.A,{onClick:()=>deteleFile(e,n)})})})})]})))})]})}):"",T?(0,N.jsx)("span",{style:{color:"red",marginLeft:"5px"},children:"Vui l\xf2ng ch\u1ecdn file \u0111\xednh k\xe8m"}):""]})})};var P,z,U,K=t(21428),R=t(2782),q=t(22953),V=t(2637);const{Option:H}=i.A,O=(q.Ay.div(P||(P=(0,a.A)(["\n  display: 'flex';\n"]))),q.Ay.div(z||(z=(0,a.A)(["\n  .ant-space-item {\n    font-size: 20px;\n  }\n  .ant-space-item:hover {\n    cursor: pointer;\n  }\n  .ant-table-tbody > tr > td a {\n    color: black !important;\n  }\n"]))));const Y=(0,o.Ng)((function(e){return{...e.QLTrinhTuThuTuc,role:(0,D.vh)(e.Auth.role,"ql-trinh-tu-thu-tuc")}}),s.A)((e=>{document.title="Qu\u1ea3n l\xfd tr\xecnh t\u1ef1 th\u1ee7 t\u1ee5c";const[n,t]=(0,h.useState)(j.parse(e.location.search)),[i,s]=(0,h.useState)({}),[o,v]=(0,h.useState)({}),[k,w]=(0,h.useState)(!1),[L,F]=(0,h.useState)(""),[C,M]=(0,b.D)(),[P,z]=(0,h.useState)([]),[H,Y]=(0,h.useState)(!1),[B,Q]=(0,h.useState)();q.Ay.div(U||(U=(0,a.A)(["\n    float: right;\n  "])));(0,h.useEffect)((()=>{(0,D._Y)(n),e.getList(n)}),[n]),(0,h.useEffect)((()=>{e.getList(n)}),[]);const $=()=>{F(""),z([]),s({}),w(!1)},_=a=>(0,N.jsx)(O,{children:(0,N.jsxs)(r.A,{size:"middle",children:[(0,N.jsx)(K.A,{onClick:()=>(e=>{const n=e;F("edit"),f.A.ChiTietBieuMau({TrinhTuThuTucID:n}).then((e=>{e.data.Status>0?(s(e.data.Data),M(),w(!0)):(l.Ay.destroy(),l.Ay.error(e.data.Message))})).catch((e=>{l.Ay.destroy(),l.Ay.error(e.toString())}))})(a.TrinhTuThuTucID)}),(0,N.jsx)(I.A,{onClick:()=>{var i;i=a.TrinhTuThuTucID,c.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a bi\u1ec3u m\u1eabu n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{f.A.XoaBieuMau({ListID:[i]}).then((a=>{a.data.Status>0?(e.getList({...n,PageNumber:Math.ceil((X-1)/n.PageSize)<n.PageNumber?Math.ceil((X-1)/n.PageSize):n.PageNumber}),l.Ay.destroy(),l.Ay.success(a.data.Message),t({...n,PageNumber:Math.ceil((X-1)/n.PageSize)<n.PageNumber?Math.ceil((X-1)/n.PageSize):n.PageNumber})):(l.Ay.destroy(),l.Ay.error(a.data.Message))})).catch((e=>{l.Ay.destroy(),l.Ay.error(e.toString())}))}})}})]})}),{DanhSachTrinhTuThuTuc:J,TotalRow:X,role:G,DanhSachLoaiThuTuc:W}=e,Z=n.PageNumber?parseInt(n.PageNumber):1,ee=n.PageSize?parseInt(n.PageSize):(0,D.WT)(),ne=[{title:"STT",width:"5%",align:"center",render:(e,n,t)=>(0,N.jsx)("span",{children:(Z-1)*ee+(t+1)})},{title:"Ti\xeau \u0111\u1ec1",dataIndex:"TieuDe",align:"left",width:"20%"},{title:"N\u1ed9i dung",dataIndex:"NoiDung",align:"left",width:"45%"},{title:"Ng\xe0y t\u1ea1o",dataIndex:"NgayTao",align:"center",width:"10%",render:(e,n)=>n.NgayTao?S()(n.NgayTao).format("DD/MM/YYYY"):null},{title:"T\xean ng\u01b0\u1eddi t\u1ea1o",dataIndex:"TenNguoiTao",align:"center",width:"10%",render:(e,n)=>(0,N.jsx)("p",{children:n.TenNguoiTao})},{title:"Hi\u1ec3n th\u1ecb",dataIndex:"Public",align:"center",width:"10%",render:(e,n)=>(0,N.jsx)(x.A,{checked:n.Public})},{title:"Thao t\xe1c",width:"10%",align:"center",render:(e,n)=>_(n)}];return(0,N.jsxs)(d.A,{children:[(0,N.jsxs)(V.A,{children:[(0,N.jsx)(u.A,{children:"Qu\u1ea3n l\xfd tr\xecnh t\u1ef1 th\u1ee7 t\u1ee5c"}),(0,N.jsx)(p.A,{children:G.add?(0,N.jsxs)(y.$n,{type:"primary",onClick:()=>{F("add"),s({}),M(),w(!0)},children:[(0,N.jsx)(R.A,{}),"Th\xeam th\u1ee7 t\u1ee5c"]}):null})]}),(0,N.jsxs)(m.A,{children:[(0,N.jsx)(T.A,{children:(0,N.jsx)(y.NJ,{allowClear:!0,defaultValue:n.Keyword,placeholder:"Nh\u1eadp n\u1ed9i dung c\u1ea7n t\xecm ki\u1ebfm ",style:{width:300},onSearch:e=>((e,a)=>{let i=n,l={value:e,property:a},c=(0,D.D5)(i,l,null);t(c),z([])})(e,"Keyword")})}),(0,N.jsx)(g.Ay,{columns:ne,dataSource:J,onChange:(e,a,i)=>{let l=n,c={pagination:e,filters:a,sorter:i},r=(0,D.D5)(l,null,c);t(r),z([])},pagination:{showSizeChanger:!0,showTotal:(e,n)=>"T\u1eeb ".concat(n[0]," \u0111\u1ebfn ").concat(n[1]," tr\xean ").concat(e," k\u1ebft qu\u1ea3"),total:X,current:Z,pageSize:ee}})]}),(0,N.jsx)(E,{visible:k,dataEdit:i,action:L,loading:H,onCreate:t=>{Y(!0);const a={FileType:A.LoaiFileDinhKem.FileTrinhTuThuTuc},i={FileType:A.LoaiFileDinhKem.FileThumbnail};t.DanhSachFileDinhKemID=[];const c=[];t.DanhSachHoSoTaiLieu&&t.DanhSachHoSoTaiLieu.map((async(e,n)=>{if(!e.FileID){const n=new FormData;n.append("files",e),n.append("FileDinhKemStr",JSON.stringify({...a})),c.push(f.A.UploadFile(n).then((e=>{var n;if(e.data.Status>0)return t.DanhSachFileDinhKemID.push(null===(n=e.data.Data[0])||void 0===n?void 0:n.FileID),e.data.Data[0]})))}})),t.DanhSachThumbnail&&t.DanhSachThumbnail.map((async(e,n)=>{if(!e.FileID){const n=new FormData;n.append("files",e),n.append("FileDinhKemStr",JSON.stringify({...i})),c.push(f.A.UploadFile(n).then((e=>{var n;if(e.data.Status>0)return t.DanhSachFileDinhKemID.push(null===(n=e.data.Data[0])||void 0===n?void 0:n.FileID),e.data.Data[0]})))}})),Promise.all(c).then((a=>{f.A.LuuTrinhTuThuTuc(t).then((t=>{t&&t.data&&1===t.data.Status?(l.Ay.success(t.data.Message),$(),M(),Y(!1),e.getList({...n})):l.Ay.error("".concat(t&&t.data?t.data.Message:"L\u1ed7i h\u1ec7 th\u1ed1ng"))}))}))},onCancel:$,DanhSachTrinhTuThuTuc:J,DanhSachLoaiThuTuc:W},C)]})}))},21428:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(58168),i=t(82483);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var c=t(56594),r=function(e,n){return i.createElement(c.A,(0,a.A)({},e,{ref:n,icon:l}))};const s=i.forwardRef(r)},2782:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(58168),i=t(82483);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};var c=t(56594),r=function(e,n){return i.createElement(c.A,(0,a.A)({},e,{ref:n,icon:l}))};const s=i.forwardRef(r)},38675:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(58168),i=t(82483);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"};var c=t(56594),r=function(e,n){return i.createElement(c.A,(0,a.A)({},e,{ref:n,icon:l}))};const s=i.forwardRef(r)}}]);