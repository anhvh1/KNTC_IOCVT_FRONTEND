"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[766],{74405:(e,a,n)=>{n.d(a,{$:()=>r,A:()=>o});var t,l=n(26418),i=n(57528),s=n(22953),d=n(6535);const h=(e=>(0,s.Ay)(e)(t||(t=(0,i.A)(["\n  &.ant-checkbox-wrapper {\n    font-size: 13px;\n    color: ",";\n\n    .ant-checkbox {\n      top: inherit;\n    }\n\n    .ant-checkbox-checked .ant-checkbox-inner,\n    .ant-checkbox-indeterminate .ant-checkbox-inner {\n      background-color: ",";\n      border-color: ",";\n    }\n\n    .ant-checkbox:hover .ant-checkbox-inner,\n    .ant-checkbox-input:focus + .ant-checkbox-inner {\n      border-color: ",";\n    }\n\n    &:hover {\n      .ant-checkbox-inner {\n        border-color: ",";\n      }\n    }\n  }\n"])),(0,d.palette)("text",1),(0,d.palette)("primary",0),(0,d.palette)("primary",0),(0,d.palette)("primary",0),(0,d.palette)("primary",0)))(l.A),r=l.A.Group,o=h},2637:(e,a,n)=>{n.d(a,{A:()=>h});n(82483);var t,l=n(57528),i=n(22953);n(6535);const s=i.Ay.div(t||(t=(0,l.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 10px 0;\n  gap: 10px;\n  width: 100%;\n"])));var d=n(56723);const h=e=>(0,d.jsx)(s,{className:"wrapper-top",children:e.children})},58385:(e,a,n)=>{n.r(a),n.d(a,{default:()=>W});var t,l,i,s=n(82483),d=n(82402),h=(n(92378),n(37735)),r=n(30090),o=n(33713),c=n.n(o),u=n(69973),m=n(53660),p=n(34045),x=n(81538),A=n(64684),C=n(67353),D=n(53615),j=(n(22724),n(79948)),y=n(63419),v=n(88701),g=n(65828),T=n(74405),f=(n(76161),n(18570)),I=n(50343),b=n(57528),Q=n(22953);const S=Q.Ay.div(t||(t=(0,b.A)(["\n  .ant-tree\n    .ant-tree-treenode:not(.ant-tree .ant-tree-treenode-disabled).filter-node\n    .ant-tree-title {\n    color: red;\n  }\n  span.ant-tree-iconEle.ant-tree-icon__customize {\n    display: none !important;\n  }\n"]))),k=Q.Ay.div(l||(l=(0,b.A)(["\n  @media (min-width: 1024px) {\n    .checkbox-coquan {\n      width: 88%;\n      float: right;\n    }\n  }\n"]))),E=Q.Ay.div(i||(i=(0,b.A)(["\n  width: 100%;\n  .mg-top {\n    margin-top: 20px;\n    height: calc(100vh - 265px);\n    overflow: scroll;\n  }\n"]))),M={colFull:{xs:24,sm:24,md:24,lg:24,xl:24},colHaft:{xs:24,sm:24,md:24,lg:12,xl:12},colThirt:{xs:24,sm:24,md:12,lg:8,xl:8},colCustom1:{xs:24,sm:24,md:12,lg:9,xl:9},colCustom2:{xs:24,sm:24,md:12,lg:7,xl:7},colCustom3:{xs:24,sm:24,md:12,lg:8,xl:8},formItem1:{labelCol:{xs:3,sm:3,md:3,lg:3,xl:3},wrapperCol:{xs:21,sm:21,md:21,lg:21,xl:21},labelAlign:"left"},formItem2:{labelCol:{xs:6,sm:6,md:6,lg:6,xl:6},wrapperCol:{xs:18,sm:18,md:18,lg:18,xl:18},labelAlign:"left"},formItem3:{labelCol:{xs:9,sm:9,md:9,lg:9,xl:9},wrapperCol:{xs:16,sm:16,md:16,lg:16,xl:16}},formItem2_1:{labelCol:{xs:6,sm:6,md:6,lg:6,xl:6},wrapperCol:{xs:18,sm:18,md:18,lg:18,xl:18}},formItem3_1:{labelCol:{xs:8,sm:8,md:8,lg:8,xl:8},wrapperCol:{xs:15,sm:15,md:15,lg:15,xl:15}},formItem3_3:{labelCol:{xs:5,sm:5,md:5,lg:5,xl:5},wrapperCol:{xs:18,sm:18,md:18,lg:18,xl:18}}};var w=n(56723);const{Item:N,useForm:R}=j.A,H=e=>{var a,n,t,l;let{visible:i,onCancel:d,dataModalAdd:h,onCreate:c,DanhSachCoQuan:m}=e;const[p]=R(),[x,A]=(0,s.useState)([]),[C,D]=(0,s.useState)([]),[f,b]=(0,s.useState)({tinh:[],huyen:[],xa:[]});(0,s.useEffect)((()=>{var e,a;if(h){const e=h.CoQuanChaID;let a;const n=(e,t)=>{e.forEach((e=>{e.Children?e.ID===t?a=e.Ten:n(e.Children,t):e.ID===t&&(a=e.Ten)}))};n(m,e)}p.setFieldsValue({...h,TenCoQuanCha:null!==h&&void 0!==h&&h.CoQuanChaID?h.TenCoQuanCha:null===(e=m[0])||void 0===e?void 0:e.Ten,TinhID:null!==h&&void 0!==h&&null!==(a=h.Data)&&void 0!==a&&a.TinhID?h.Data.TinhID:null}),r.A.danhSachCacCapDonVi().then((e=>A(e.data.Data))),r.A.danhSachThamQuyen().then((e=>D(e.data.Data))),I.A.danhSachDiaGioi().then((e=>b((a=>({...a,tinh:e.data.Data})))))}),[]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(g.aF,{open:i,title:"Th\xeam c\u01a1 quan \u0111\u01a1n v\u1ecb",onCancel:d,width:"900px",footer:[(0,w.jsx)(g.$n,{onClick:d,children:"H\u1ee7y"},"back"),(0,w.jsx)(g.$n,{type:"primary",htmlType:"submit",onClick:async e=>{var a;e.preventDefault();const n=await p.validateFields();for(const t in n)n[t]||delete n[t];c({...n,CoQuanChaID:null!==h&&void 0!==h&&h.CoQuanChaID?h.CoQuanChaID:null===(a=m[0])||void 0===a?void 0:a.ID})},form:"myForm",children:"L\u01b0u"},"submit")],children:(0,w.jsxs)(j.A,{form:p,id:"myForm",initialValues:{TenCoQuanCha:(null===(a=m[0])||void 0===a?void 0:a.Ten)||"",CQCoHieuLuc:!1,QTVanThuTiepDan:!1,CapUBND:!1,QTVanThuTiepNhanDon:!1,CapThanhTra:!1,SuDungQuyTrinh:!1,SuDungPM:!1,SuDungQuyTrinhGQ:!1,TinhID:null,HuyenID:null,XaID:null},children:[(0,w.jsxs)(y.A,{justify:"space-between",gutter:[32,8],children:[(0,w.jsx)(v.A,{...M.colFull,children:(0,w.jsx)(N,{label:"C\u01a1 quan cha",name:"TenCoQuanCha",rules:[o.REQUIRED],...M.formItem1,children:(0,w.jsx)(u.Ay,{disabled:!0,children:(0,w.jsx)(u.c$,{children:null===h||void 0===h?void 0:h.TenCoQuanCha})})})}),(0,w.jsx)(v.A,{...M.colHaft,children:(0,w.jsx)(N,{label:"M\xe3 c\u01a1 quan",name:"MaCQ",rules:[o.REQUIRED],...M.formItem2,children:(0,w.jsx)(g.mS,{})})}),(0,w.jsx)(v.A,{...M.colHaft,children:(0,w.jsx)(N,{label:"T\xean c\u01a1 quan",name:"TenCoQuan",rules:[o.REQUIRED],labelAlign:"left",...M.formItem2,children:(0,w.jsx)(g.pd,{})})}),(0,w.jsx)(v.A,{...M.colHaft,children:(0,w.jsx)(N,{label:"C\u1ea5p",name:"CapID",rules:[o.REQUIRED],...M.formItem2,children:(0,w.jsx)(u.Ay,{children:null===x||void 0===x?void 0:x.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.Cap,children:e.TenCap},a)))})})}),(0,w.jsx)(v.A,{...M.colHaft,children:(0,w.jsx)(N,{label:"Th\u1ea9m quy\u1ec1n",name:"ThamQuyenID",rules:[o.REQUIRED],...M.formItem2,children:(0,w.jsx)(u.Ay,{children:null===C||void 0===C?void 0:C.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.ThamQuyenID,children:e.TenThamQuyen},a)))})})})]}),(0,w.jsxs)(y.A,{justify:"space-between",gutter:[10,8],children:[(0,w.jsx)(v.A,{...M.colThirt,children:(0,w.jsx)(N,{label:"T\u1ec9nh",name:"TinhID",labelAlign:"left",...M.formItem3,children:(0,w.jsx)(u.Ay,{onChange:e=>{e?I.A.danhSachDiaGioi({ID:e,Cap:2}).then((e=>b((a=>({...a,huyen:e.data.Data}))))):(b((e=>({...e,huyen:[],xa:[]}))),p.setFieldsValue({HuyenID:null,XaID:null}))},listHeight:100,allowClear:!0,children:null===(n=f.tinh)||void 0===n?void 0:n.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.ID,children:e.Ten},a)))})})}),(0,w.jsx)(v.A,{...M.colThirt,children:(0,w.jsx)(N,{label:"Huy\u1ec7n",name:"HuyenID",labelAlign:"right",...M.formItem3,children:(0,w.jsx)(u.Ay,{allowClear:!0,name:"HuyenID",listHeight:100,onChange:e=>{e?I.A.danhSachDiaGioi({ID:e,Cap:3}).then((e=>b((a=>({...a,xa:e.data.Data}))))):(b((e=>({...e,xa:[]}))),p.setFieldsValue({XaID:null}))},children:null===(t=f.huyen)||void 0===t?void 0:t.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.ID,children:e.Ten},a)))})})}),(0,w.jsx)(v.A,{...M.colThirt,children:(0,w.jsx)(N,{label:"X\xe3",name:"XaID",labelAlign:"right",...M.formItem3,children:(0,w.jsx)(u.Ay,{listHeight:100,allowClear:!0,children:null===(l=f.xa)||void 0===l?void 0:l.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.ID,children:e.Ten},a)))})})})]}),(0,w.jsx)(k,{children:(0,w.jsxs)(y.A,{className:"checkbox-coquan",children:[(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(N,{name:"CQCoHieuLuc",valuePropName:"checked",label:"",children:(0,w.jsx)(T.A,{children:"C\u01a1 quan c\xf3 hi\u1ec7u l\u1ef1c"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(N,{name:"QTVanThuTiepDan",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"Quy tr\xecnh c\xe1n b\u1ed9 ti\u1ebfp d\xe2n"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(N,{name:"CapUBND",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"C\u01a1 quan c\u1ea5p UBND"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(N,{name:"QTVanThuTiepNhanDon",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"Quy tr\xecnh v\u0103n th\u01b0 ti\u1ebfp nh\u1eadn \u0111\u01a1n"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(N,{name:"CapThanhTra",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"C\u01a1 quan c\u1ea5p thanh tra"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(N,{name:"SuDungQuyTrinh",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"S\u1eed d\u1ee5ng quy tr\xecnh ti\u1ebfp c\xf4ng d\xe2n, x\u1eed l\xed \u0111\u01a1n ph\u1ee9c t\u1ea1p"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(N,{name:"SuDungPM",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"C\u01a1 quan thu\u1ed9c h\u1ec7 th\u1ed1ng ph\u1ea7n m\u1ec1m"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(N,{name:"SuDungQuyTrinhGQ",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"S\u1eed d\u1ee5ng quy tr\xecnh gi\u1ea3i quy\u1ebft ph\u1ee9c t\u1ea1p"})})})]})})]})})})},L=s.memo(H),{Item:q,useForm:K}=j.A,P=e=>{var a,n,t;let{visible:l,onCancel:i,dataModalEdit:d,onCreate:h}=e;const[c]=K(),[m,p]=(0,s.useState)([]),[x,A]=(0,s.useState)([]),[C,D]=(0,s.useState)({tinh:[],huyen:[],xa:[]}),[f,b]=(0,s.useState)();(0,s.useEffect)((()=>{var e;r.A.danhSachCacCapDonVi().then((e=>p(e.data.Data))),r.A.danhSachThamQuyen().then((e=>A(e.data.Data))),I.A.danhSachDiaGioi().then((e=>{var a,n,t,l;(D((a=>({...a,tinh:e.data.Data}))),null!==d&&void 0!==d&&null!==(a=d.Data)&&void 0!==a&&a.TinhID)&&(Q(null===d||void 0===d||null===(n=d.Data)||void 0===n?void 0:n.TinhID),null!==d&&void 0!==d&&null!==(t=d.Data)&&void 0!==t&&t.HuyenID&&S(null===d||void 0===d||null===(l=d.Data)||void 0===l?void 0:l.HuyenID))})),r.A.chiTietCoQuan({ID:null===d||void 0===d||null===(e=d.Data)||void 0===e?void 0:e.CoQuanChaID}).then((e=>{var a,n,t,l;b(null===(a=e.data.Data)||void 0===a?void 0:a.TenCoQuan),c.setFieldsValue({...d.Data,TenCoQuanCha:null===e||void 0===e||null===(n=e.data.Data)||void 0===n?void 0:n.TenCoQuan,HuyenID:null!==(t=d.Data)&&void 0!==t&&t.HuyenID?d.Data.HuyenID:null,XaID:null!==(l=d.Data)&&void 0!==l&&l.XaID?d.Data.XaID:null})}))}),[]);const Q=(e,a)=>{e?I.A.danhSachDiaGioi({ID:e,Cap:2}).then((e=>{D((a=>({...a,huyen:e.data.Data})))})):(D((e=>({...e,huyen:[],xa:[]}))),c.setFieldsValue({HuyenID:null,XaID:null}))},S=e=>{e?I.A.danhSachDiaGioi({ID:e,Cap:3}).then((e=>{D((a=>({...a,xa:e.data.Data})))})):(D((e=>({...e,xa:[]}))),c.setFieldsValue({XaID:null}))};return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(g.aF,{open:l,title:"S\u1eeda c\u01a1 quan \u0111\u01a1n v\u1ecb",onCancel:i,width:"900px",footer:[(0,w.jsx)(g.$n,{onClick:i,children:"H\u1ee7y"},"back"),(0,w.jsx)(g.$n,{type:"primary",htmlType:"submit",onClick:async e=>{e.preventDefault();const a=await c.validateFields();for(const n in a)a[n]||delete a[n];h({...a,CoQuanChaID:d.Data.CoQuanChaID,CoQuanID:d.CoQuanID})},form:"myForm",children:"L\u01b0u"},"submit")],children:(0,w.jsxs)(j.A,{form:c,id:"myForm",initialValues:{CQCoHieuLuc:!1,QTVanThuTiepDan:!1,CapUBND:!1,QTVanThuTiepNhanDon:!1,CapThanhTra:!1,SuDungQuyTrinh:!1,SuDungPM:!1,SuDungQuyTrinhGQ:!1,TinhID:null,HuyenID:null,XaID:null},children:[(0,w.jsxs)(y.A,{justify:"space-between",gutter:[32,8],children:[(0,w.jsx)(v.A,{...M.colFull,children:(0,w.jsx)(q,{label:"C\u01a1 quan cha",name:"TenCoQuanCha",rules:[o.REQUIRED],...M.formItem1,children:(0,w.jsx)(u.Ay,{disabled:!0,children:(0,w.jsx)(u.c$,{children:f})})})}),(0,w.jsx)(v.A,{...M.colHaft,children:(0,w.jsx)(q,{label:"M\xe3 c\u01a1 quan",name:"MaCQ",rules:[o.REQUIRED],...M.formItem2,children:(0,w.jsx)(g.mS,{})})}),(0,w.jsx)(v.A,{...M.colHaft,children:(0,w.jsx)(q,{label:"T\xean c\u01a1 quan",name:"TenCoQuan",rules:[o.REQUIRED],labelAlign:"left",...M.formItem2,children:(0,w.jsx)(g.pd,{})})}),(0,w.jsx)(v.A,{...M.colHaft,children:(0,w.jsx)(q,{label:"C\u1ea5p",name:"CapID",rules:[o.REQUIRED],...M.formItem2,children:(0,w.jsx)(u.Ay,{children:null===m||void 0===m?void 0:m.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.Cap,children:e.TenCap},a)))})})}),(0,w.jsx)(v.A,{...M.colHaft,children:(0,w.jsx)(q,{label:"Th\u1ea9m quy\u1ec1n",name:"ThamQuyenID",rules:[o.REQUIRED],...M.formItem2,children:(0,w.jsx)(u.Ay,{children:null===x||void 0===x?void 0:x.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.ThamQuyenID,children:e.TenThamQuyen},a)))})})})]}),(0,w.jsxs)(y.A,{justify:"space-between",gutter:[10,8],children:[(0,w.jsx)(v.A,{...M.colThirt,children:(0,w.jsx)(q,{label:"T\u1ec9nh",name:"TinhID",labelAlign:"left",...M.formItem3,children:(0,w.jsx)(u.Ay,{onChange:Q,listHeight:100,allowClear:!0,children:null===(a=C.tinh)||void 0===a?void 0:a.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.ID,children:e.Ten},a)))})})}),(0,w.jsx)(v.A,{...M.colThirt,children:(0,w.jsx)(q,{label:"Huy\u1ec7n",name:"HuyenID",labelAlign:"right",...M.formItem3,children:(0,w.jsx)(u.Ay,{allowClear:!0,name:"HuyenID",listHeight:100,onChange:S,children:null===(n=C.huyen)||void 0===n?void 0:n.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.ID,children:e.Ten},a)))})})}),(0,w.jsx)(v.A,{...M.colThirt,children:(0,w.jsx)(q,{label:"X\xe3",name:"XaID",labelAlign:"right",...M.formItem3,children:(0,w.jsx)(u.Ay,{listHeight:100,allowClear:!0,children:null===(t=C.xa)||void 0===t?void 0:t.map(((e,a)=>(0,w.jsx)(u.c$,{value:e.ID,children:e.Ten},a)))})})})]}),(0,w.jsx)(k,{children:(0,w.jsxs)(y.A,{className:"checkbox-coquan",children:[(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(q,{name:"CQCoHieuLuc",valuePropName:"checked",label:"",children:(0,w.jsx)(T.A,{children:"C\u01a1 quan c\xf3 hi\u1ec7u l\u1ef1c"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(q,{name:"QTVanThuTiepDan",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"Quy tr\xecnh c\xe1n b\u1ed9 ti\u1ebfp d\xe2n"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(q,{name:"CapUBND",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"C\u01a1 quan c\u1ea5p UBND"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(q,{name:"QTVanThuTiepNhanDon",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"Quy tr\xecnh v\u0103n th\u01b0 ti\u1ebfp nh\u1eadn \u0111\u01a1n"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(q,{name:"CapThanhTra",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"C\u01a1 quan c\u1ea5p thanh tra"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(q,{name:"SuDungQuyTrinh",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"S\u1eed d\u1ee5ng quy tr\xecnh ti\u1ebfp c\xf4ng d\xe2n, x\u1eed l\xed \u0111\u01a1n ph\u1ee9c t\u1ea1p"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(q,{name:"SuDungPM",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"C\u01a1 quan thu\u1ed9c h\u1ec7 th\u1ed1ng ph\u1ea7n m\u1ec1m"})})}),(0,w.jsx)(v.A,{span:12,children:(0,w.jsx)(q,{name:"SuDungQuyTrinhGQ",valuePropName:"checked",children:(0,w.jsx)(T.A,{children:"S\u1eed d\u1ee5ng quy tr\xecnh gi\u1ea3i quy\u1ebft ph\u1ee9c t\u1ea1p"})})})]})})]})})})},F=s.memo(P);var V=n(41236),U=n(93445),$=n(72741),X=n(84950),_=n(59827),G=n(27957),B=n(2370),O=n(2782);var z=n(2637);const{TreeNode:Y}=V.A;class J extends s.Component{constructor(e){super(e),this.danhSachCacCap=async()=>{try{const e=await r.A.danhSachCacCapDonVi();this.setState({...this.state,danhSachCacCap:e.data.Data})}catch(e){}},this.componentDidMount=()=>{this.props.getInitData(this.state.filterData),this.danhSachCacCap()},this.onFilter=(e,a)=>{let n={...this.state.filterData},t={value:e,property:a},l=(0,f.D5)(n,t,null);this.setState({filterData:l},(()=>{let e=this.state.filterData.Keyword?this.state.filterData.Keyword:"";(0,f._Y)({Keyword:e}),this.props.getList(this.state.filterData)})),this.setState({filterData:l},(()=>{let e=this.state.filterData.Cap?this.state.filterData.Cap:"";(0,f._Y)({Cap:e}),this.props.getList(this.state.filterData)}))},this.deleteData=e=>{this.props.role.delete?$.A.confirm({title:"X\xf3a d\u1eef li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a c\u01a1 quan \u0111\u01a1n v\u1ecb n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{r.A.xoaCoQuan(e).then((e=>{e.data.Result.Status>0?(this.props.getList(this.state.filterData),U.Ay.destroy(),U.Ay.success(e.data.Result.Message)):$.A.error({title:"L\u1ed7i",content:e.data.Result.Message})})).catch((e=>{$.A.error(c().API_ERROR)}))}}):(U.Ay.destroy(),U.Ay.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n ch\u1ee9c n\u0103ng n\xe0y"))},this.showModalAdd=(e,a)=>{if(this.props.role.add)if(e)r.A.chiTietCoQuan({ID:e}).then((n=>{if(n.data.Status>0){let t=this.state.modalKey+1,l=n.data.Data;this.setState({visibleModalAdd:!0,dataModalAdd:{Data:l,CoQuanChaID:e,TenCoQuanCha:a},confirmLoading:!1,modalKey:t})}else $.A.error({title:"L\u1ed7i",content:n.data.Message})})).catch((e=>{$.A.error(c().API_ERROR)}));else{let n=this.state.modalKey+1;this.setState({visibleModalAdd:!0,dataModalAdd:{CoQuanChaID:e,TenCoQuanCha:a},confirmLoading:!1,modalKey:n})}else U.Ay.destroy(),U.Ay.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n ch\u1ee9c n\u0103ng n\xe0y")},this.hideModalAdd=()=>{this.setState({visibleModalAdd:!1,dataModalAdd:null})},this.submitModalAdd=e=>{this.setState({confirmLoading:!0},(()=>{r.A.themCoQuan(e).then((e=>{e.data.Status>0?(U.Ay.destroy(),U.Ay.success("Th\xeam th\xe0nh c\xf4ng"),this.hideModalAdd(),this.props.getList(this.state.filterData)):(this.setState({confirmLoading:!1}),$.A.error({title:"L\u1ed7i",content:e.data.Message}))})).catch((e=>{$.A.error(c().API_ERROR)}))}))},this.showModalEdit=(e,a)=>{this.props.role.edit?r.A.chiTietCoQuan({ID:e}).then((n=>{if(n.data.Status>0){let t=this.state.modalKey+1,l=n.data.Data;this.setState({visibleModalEdit:!0,dataModalEdit:{Data:l,CoQuanID:e,TenCoQuanCha:a},confirmLoading:!1,modalKey:t})}else $.A.error({title:"L\u1ed7i",content:n.data.Message})})).catch((e=>{$.A.error(c().API_ERROR)})):(U.Ay.destroy(),U.Ay.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n ch\u1ee9c n\u0103ng n\xe0y"))},this.hideModalEdit=()=>{this.setState({visibleModalEdit:!1})},this.submitModalEdit=e=>{this.setState({confirmLoading:!0},(()=>{r.A.suaCoQuan(e).then((e=>{e.data.Status>0?(U.Ay.destroy(),U.Ay.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.hideModalEdit(),this.props.getList(this.state.filterData)):(this.setState({confirmLoading:!1}),$.A.error({title:"L\u1ed7i",content:e.data.Message}))})).catch((e=>{$.A.error(c().API_ERROR)}))}))},this.onExpandNode=(e,a)=>{let n=a.nativeEvent.target.outerHTML.toString(),t=a.nativeEvent.target.parentElement.className.toString(),l=n.includes("ant-dropdown-menu"),i=t.includes("ant-dropdown-menu");if(!l&&!i){let n=a.node.props.eventKey.toString();if(n&&!a.node.props.isLeaf){let a=[...this.state.expandedKeys],t=a.indexOf(n);t>-1?a.splice(t,1):a=this.state.expandedKeys.concat([n]),this.setState({expandedKeys:a}),this.setState({setKey:e})}}},this.renderTreeNodes=e=>null===e||void 0===e?void 0:e.map((e=>{let a=(0,w.jsxs)(X.A,{children:[e.Cap<=4||6===e.Cap||7===e.Cap?(0,w.jsx)(X.A.Item,{onClick:()=>this.showModalAdd(e.ID,e.Ten,e.Cap),children:(0,w.jsx)("span",{children:"Th\xeam \u0111\u01a1n v\u1ecb"})}):null,(0,w.jsx)(X.A.Item,{onClick:()=>this.showModalEdit(e.ID,e.Ten,e.Cap),children:(0,w.jsx)("span",{children:"S\u1eeda"})}),(0,w.jsx)(X.A.Item,{onClick:()=>this.deleteData(e.ID),disabled:!!e.children,children:(0,w.jsx)("span",{children:"X\xf3a"})})]}),n=(0,w.jsx)("div",{children:(0,w.jsx)(_.A,{overlay:a,placement:"bottomLeft",trigger:["contextMenu"],children:(0,w.jsx)("span",{className:"title-tree",style:e.ID===this.props.styled?{color:"red"}:{},children:e.title})})});return e.children?(0,w.jsx)(Y,{title:n,isLeaf:e.isLeaf,children:e.children,dataRef:e,children:this.renderTreeNodes(e.children)},e.key):(0,w.jsx)(Y,{title:n,isLeaf:e.isLeaf,children:e.children,dataRef:e},e.key)})),this.renderContent=()=>{if(this.state.DanhSachCoQuan.length){const e=this.filterTreeNode(this.state.DanhSachCoQuan);return(0,w.jsx)(S,{children:(0,w.jsx)(V.A,{showLine:!0,filterTreeNode:e=>1===e.props.dataRef.Highlight,onSelect:this.onExpandNode,onExpand:this.onExpandNode,defaultExpandedKeys:this.state.setKey,expandedKeys:this.state.filterData.Keyword?this.props.expandedKeys:this.state.expandedKeys,children:this.renderTreeNodes(e)})})}return(0,w.jsx)(D.ab,{loading:this.props.TableLoading})},this.filterTreeNode=e=>e,this.renderActionAdd=()=>(0,w.jsxs)("span",{children:[(0,w.jsxs)(B.A,{type:"primary",onClick:()=>this.showModalAdd("","",""),className:"d-none",children:[(0,w.jsx)(O.A,{}),"Th\xeam m\u1edbi"]}),(0,w.jsx)(L,{confirmLoading:this.state.confirmLoading,visible:this.state.visibleModalAdd,onCancel:this.hideModalAdd,onCreate:this.submitModalAdd,dataModalAdd:this.state.dataModalAdd,DanhSachCoQuan:this.state.DanhSachCoQuan},this.state.modalKey)]}),this.renderActionEdit=()=>(0,w.jsx)("span",{children:(0,w.jsx)(F,{confirmLoading:this.state.confirmLoading,visible:this.state.visibleModalEdit,onCancel:this.hideModalEdit,onCreate:this.submitModalEdit,dataModalEdit:this.state.dataModalEdit},this.state.modalKey)}),document.title="Danh m\u1ee5c c\u01a1 quan \u0111\u01a1n v\u1ecb";this.state={setKey:[],expandedKeys:[],filterData:{...""},treeKey:0,modalKey:0,DanhSachCoQuan:[],confirmLoading:!1,visibleModalAdd:!1,dataModalAdd:null,visibleModalEdit:!1,dataModalEdit:{DanhSachTinh:[],Data:null},danhSachCacCap:[]}}componentDidUpdate(e,a,n){if(e.DanhSachCoQuan!==this.props.DanhSachCoQuan){let e=this.state.treeKey+1;this.setState({DanhSachCoQuan:this.props.DanhSachCoQuan,treeKey:e})}}render(){var e;const{role:a}=this.props;(0,f.b5)("user",{}).VaiTro;return(0,w.jsxs)(m.A,{children:[(0,w.jsxs)(z.A,{children:[(0,w.jsx)(p.A,{children:"DANH M\u1ee4C C\u01a0 QUAN, \u0110\u01a0N V\u1eca"}),(0,w.jsxs)(x.A,{children:[this.renderActionAdd(),null!==a&&void 0!==a&&a.edit?this.renderActionEdit():""]})]}),(0,w.jsx)(E,{children:(0,w.jsxs)(A.A,{className:"box",children:[(0,w.jsxs)(C.A,{children:[(0,w.jsx)(u.Ay,{allowClear:!0,style:{width:"200px"},defaultValue:this.state.filterData.Cap,placeholder:"Ch\u1ecdn c\u1ea5p",onChange:e=>this.onFilter(e,"Cap"),children:null===(e=this.state.danhSachCacCap)||void 0===e?void 0:e.map((e=>(0,w.jsx)(u.c$,{value:e.Cap,children:e.TenCap})))}),(0,w.jsx)(G.A.Search,{allowClear:!0,defaultValue:this.state.filterData.Keyword,placeholder:"T\xecm ki\u1ebfm theo t\xean c\u01a1 quan, \u0111\u01a1n v\u1ecb",onSearch:e=>this.onFilter(e,"Keyword"),style:{width:300}})]}),(0,w.jsx)("div",{style:{userSelect:"none"},className:"mg-top",children:this.renderContent()},this.state.treeKey)]})})]})}}const W=(0,d.Ng)((function(e){return{...e.DMCoQuan,role:(0,f.vh)(e.Auth.role,"danh-muc-co-quan")}}),h.A)(J)},88701:(e,a,n)=>{n.d(a,{A:()=>t});const t=n(1011).A},63419:(e,a,n)=>{n.d(a,{A:()=>t});const t=n(53749).A}}]);