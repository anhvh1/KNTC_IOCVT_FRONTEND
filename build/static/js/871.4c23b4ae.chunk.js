"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[871,2782],{2637:(e,n,a)=>{a.d(n,{A:()=>d});a(82483);var t,i=a(57528),l=a(22953);a(6535);const r=l.Ay.div(t||(t=(0,i.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 10px 0;\n  gap: 10px;\n  width: 100%;\n"])));var c=a(56723);const d=e=>(0,c.jsx)(r,{className:"wrapper-top",children:e.children})},67466:(e,n,a)=>{a.d(n,{D:()=>i});var t=a(82483);function i(e){const[n,a]=(0,t.useState)(0);return[n,()=>{a(n+1)}]}},30871:(e,n,a)=>{a.r(n),a.d(n,{default:()=>X});var t=a(51074),i=a(27957),l=a(72741),r=a(93445),c=a(256),d=a(34045),s=a(81538),h=a(65828),o=a(7025),u=a(37735),g=a(16950),A=a(21428),m=a(38674),x=a(65935),y=a(2782),v=a(64684),T=a(67353),D=a(53615),p=a(53660),j=a(82483),L=a(18570),C=a(92378),S=a(33713),M=a(79948),f=a(30180),w=a(26418),I=a(94690),N=a.n(I),b=a(82402),E=a(54255),_=a(56723);const{Item:Y,useForm:k}=M.A,Q=e=>{const[n]=k(),{dataEdit:a,loading:t,visible:i,action:l,DanhSachCoQuan:r=[],DanhSachChucVu:c=[]}=e,[d,s]=(0,j.useState)(""),[o,u]=(0,j.useState)(!1),[g,A]=(0,j.useState)([]),[m,x]=(0,j.useState)("");(0,j.useEffect)((()=>{if(a&&a.CanBoID){const e=N()(a.NgaySinh).format("DD/MM/YYYY");n&&n.setFieldsValue({...a,NgaySinh:a&&a.NgaySinh?N()(e,"DD/MM/YYYY"):"",XemTaiLieuMat:!(null===a||void 0===a||!a.XemTaiLieuMat||1!==(null===a||void 0===a?void 0:a.XemTaiLieuMat))||0,QuanTriDonVi:!(null===a||void 0===a||!a.QuanTriDonVi||1!==(null===a||void 0===a?void 0:a.QuanTriDonVi))||0,QuyenKy:!(null===a||void 0===a||!a.QuyenKy||1!==(null===a||void 0===a?void 0:a.QuyenKy))||0,ChuTichUBND:1===(null===a||void 0===a?void 0:a.ChuTichUBND)})}E.A.danhSachNhomAll().then((e=>{e.data.Status>0&&A(e.data.Data)}))}),[]);return(0,_.jsx)(h.aF,{title:"".concat("edit"===l?"S\u1eeda":"Th\xeam"," th\xf4ng tin ng\u01b0\u1eddi d\xf9ng"),width:700,visible:i,onCancel:e.onCancel,footer:[(0,_.jsx)(h.$n,{onClick:e.onCancel,children:"H\u1ee7y"},"back"),(0,_.jsx)(h.$n,{htmlType:"submit",type:"primary",form:"formmonhoc",loading:t,onClick:async a=>{a.preventDefault(),await n.validateFields().then((n=>{n.LaCanBo=o,n.XemTaiLieuMat=null!==n&&void 0!==n&&n.XemTaiLieuMat?1:0,n.QuanTriDonVi=null!==n&&void 0!==n&&n.QuanTriDonVi?1:0,n.QuyenKy=null!==n&&void 0!==n&&n.QuyenKy?1:0,n.NgaySinh=(0,L.Yq)(n.NgaySinh);const a={...n};a.ChuTichUBND=!0===n.ChuTichUBND?1:(n.ChuTichUBND,0),a.TenNguoiDung=m,(0,L.oy)(a),e.onCreate(a)}))},children:"L\u01b0u"},"submit")],children:(0,_.jsxs)(M.A,{form:n,name:"formmonhoc",initialValues:{TrangThaiID:0},children:["edit"===l?(0,_.jsx)(Y,{name:"CanBoID",hidden:!0}):"","edit"===l?(0,_.jsx)(Y,{name:"NguoiDungID",hidden:!0}):"",(0,_.jsx)(Y,{label:"T\xean ng\u01b0\u1eddi d\xf9ng",name:"TenNguoiDung",rules:[{...S.REQUIRED}],...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(h.pd,{value:m,onChange:e=>{(e=>{let n=(0,L.hf)(e);n=n.trim().replace(/\s+/g,""),x(n)})(e.target.value);let a=(0,L.hf)(e.target.value);a=a.trim().replace(/\s{2,}/g," "),n&&n.setFieldsValue({SSOID:a})}})}),(0,_.jsx)(Y,{label:"SSOID",name:"SSOID",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(h.pd,{})}),(0,_.jsx)(Y,{label:"T\xean c\xe1n b\u1ed9",name:"TenCanBo",rules:[{...S.REQUIRED}],...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(h.pd,{})}),(0,_.jsx)(Y,{label:"Ng\xe0y sinh",name:"NgaySinh",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(f.A,{onChange:(e,n)=>{s(e)},format:"DD/MM/YYYY",placeholder:"",style:{width:"100%"}})}),(0,_.jsx)(Y,{label:"Gi\u1edbi t\xednh",name:"GioiTinh",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsxs)(h.l6,{placeholder:"Ch\u1ecdn gi\u1edbi t\xednh",style:{width:"100%"},children:[(0,_.jsx)(h.c$,{value:1,children:"Nam"},1),(0,_.jsx)(h.c$,{value:0,children:"N\u1eef"},0),(0,_.jsx)(h.c$,{value:2,children:"Kh\xe1c"},2)]})}),(0,_.jsx)(Y,{label:"\u0110\u1ecba ch\u1ec9",name:"DiaChi",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(h.pd,{})}),(0,_.jsx)(Y,{label:"T\xean c\u01a1 quan",name:"CoQuanID",rules:[{...S.REQUIRED}],...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(h.f7,{showSearch:!0,treeData:r,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ecdn c\u01a1 quan",allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title"})}),(0,_.jsx)(Y,{label:"Nh\xf3m ng\u01b0\u1eddi d\xf9ng",name:"DanhSachNhomNguoiDungID",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(h.l6,{style:{width:"100%"},mode:"multiple",children:null===g||void 0===g?void 0:g.map((e=>(0,_.jsx)(h.c$,{value:e.NhomNguoiDungID,children:e.TenNhom},e.NhomNguoiDungID)))})}),(0,_.jsx)(Y,{label:"Ch\u1ee9c v\u1ee5",name:"ChucVuID",rules:[{...S.REQUIRED}],...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(h.l6,{style:{width:"100%"},children:null===c||void 0===c?void 0:c.map((e=>(0,_.jsx)(h.c$,{value:e.ChucVuID,children:e.TenChucVu},e.ChucVuID)))})}),(0,_.jsx)(Y,{label:"Email",name:"Email",rules:[{type:"email",message:"Vui l\xf2ng nh\u1eadp \u0111\xfang \u0111\u1ecbnh d\u1ea1ng "}],...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(h.pd,{type:"email"})}),(0,_.jsx)(Y,{label:"\u0110i\u1ec7n tho\u1ea1i",name:"DienThoai",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(h.pd,{})}),(0,_.jsx)(Y,{label:"Quy\u1ec1n k\xfd",name:"QuyenKy",valuePropName:"checked",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(w.A,{})}),(0,_.jsx)(Y,{label:"Vai tr\xf2",name:"RoleID",rules:[{...S.REQUIRED}],...S.ITEM_LAYOUT_SMALL,children:(0,_.jsxs)(h.l6,{style:{width:"100%"},placeholder:"Ch\u1ecdn vai tr\xf2",children:[(0,_.jsx)(h.c$,{value:1,children:"L\xe3nh \u0111\u1ea1o \u0111\u01a1n v\u1ecb"},1),(0,_.jsx)(h.c$,{value:2,children:"Tr\u01b0\u1edfng ph\xf2ng"},2),(0,_.jsx)(h.c$,{value:3,children:"Chuy\xean vi\xean"},3)]})}),(0,_.jsx)(Y,{label:"Qu\u1ea3n tr\u1ecb \u0111\u01a1n v\u1ecb",name:"QuanTriDonVi",valuePropName:"checked",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(w.A,{})}),(0,_.jsx)(Y,{label:"Ch\u1ee7 t\u1ecbch UBND",name:"ChuTichUBND",valuePropName:"checked",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(w.A,{})}),(0,_.jsx)(Y,{label:"Xem t\xe0i li\u1ec7u m\u1eadt",name:"XemTaiLieuMat",valuePropName:"checked",...S.ITEM_LAYOUT_SMALL,children:(0,_.jsx)(w.A,{})}),(0,_.jsx)(Y,{label:"Tr\u1ea1ng th\xe1i",name:"TrangThaiID",rules:[{...S.REQUIRED}],...S.ITEM_LAYOUT_SMALL,children:(0,_.jsxs)(h.l6,{style:{width:"100%"},placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i",children:[(0,_.jsx)(h.c$,{value:1,children:"Ngh\u1ec9 h\u01b0u"},1),(0,_.jsx)(h.c$,{value:0,children:"\u0110ang l\xe0m"},0),(0,_.jsx)(h.c$,{value:2,children:"Chuy\u1ec3n c\xf4ng t\xe1c"},2),(0,_.jsx)(h.c$,{value:3,children:"Ngh\u1ec9 vi\u1ec7c"},3)]})})]})})};var U,B=a(67466),O=a(57528);const V=a(22953).Ay.div(U||(U=(0,O.A)(["\n /* margin-top: 100px;\n    .wrapper-topbar {\n        display: flex;\n        .wrapper-topbar__items{\n            display: flex;\n            align-items: center;\n            p {\n                margin-right: 20px;\n            }\n        }\n    }\n    .action-btn {\n    .anticon {\n      margin-right: 10px;\n      font-size: 25px;\n      \n      &:last-child {\n        margin-right: 0;\n      }\n    }\n    \n    a {\n      color: inherit !important;\n      margin-right: 10px;\n    }\n  }\n  @media only screen and (max-width: 730px) { \n    .wrapper-topbar {\n      flex-direction: column;\n    }\n  } */\n"])));var R=a(50865),q=a(7665),K=a(2637);const{Sider:$}=t.A,{Search:z}=i.A,X=(0,b.Ng)((e=>({auth:e.Auth.user})))((e=>{document.title="Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng";const[n,a]=(0,j.useState)(C.parse(e.location.search)),[t,i]=(0,j.useState)(!1),[S,M]=(0,B.D)(),[f,w]=(0,j.useState)({}),[I,E]=(0,j.useState)(!1),[Y,k]=(0,j.useState)(""),U=(0,b.d4)((e=>(0,L.vh)(e.Auth.role,"quan-ly-nguoi-dung"))),[O,$]=(0,j.useState)([]),{DanhSachCoQuan:X}=(0,b.d4)((e=>e.DMCoQuan)),H=(0,b.wA)(),{ListNguoiDung:P,TotalRow:F,tableLoading:G}=(0,b.d4)((e=>e.QLNguoiDung));(0,j.useEffect)((()=>{H(u.A.getInitData()),H(g.A.getList({})),R.A.GetAllChucVu().then((e=>{e.data.Status>0&&$(e.data.Data)}))}),[]),(0,j.useEffect)((()=>{(0,L._Y)(n),H(o.A.getList(n))}),[n]);const W=()=>{k(""),w({}),i(!1)},J=(e,t)=>{let i=n,l={value:e,property:t},r=(0,L.D5)(i,l,null);a(r)},Z=e=>(0,_.jsxs)("div",{className:"action-btn",children:[U&&U.edit?(0,_.jsx)(c.A,{title:"S\u1eeda",children:(0,_.jsx)(A.A,{onClick:()=>{return n=e.CanBoID,k("edit"),void q.A.DetailsUser({CanBoID:n}).then((e=>{e.data.Status>0?(w(e.data.Data),i(!0),M()):(r.Ay.destroy(),r.Ay.warning(e.data.Message))})).catch((e=>{r.Ay.destroy(),r.Ay.warning(e.toString())}));var n}})}):"",U&&U.delete?(0,_.jsx)(c.A,{title:"X\xf3a",children:(0,_.jsx)(m.A,{onClick:()=>{return a=e.CanBoID,void l.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a d\u1eef li\u1ec7u c\u1ee7a ng\u01b0\u1eddi d\xf9ng n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{q.A.DeleteUser({ListID:[a]}).then((e=>{e.data.Status>0?(H(o.A.getList(n)),r.Ay.destroy(),r.Ay.success(e.data.Message)):(r.Ay.destroy(),r.Ay.error(e.data.Message))})).catch((e=>{r.Ay.destroy(),r.Ay.error(e.toString())}))}});var a}})}):"",U&&U.edit?(0,_.jsx)(c.A,{title:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u",children:(0,_.jsx)(x.A,{onClick:()=>{return a=e.NguoiDungID,void l.A.confirm({title:"\u0110\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u",content:"B\u1ea1n c\xf3 mu\u1ed1n \u0111\u1eb7t l\u1ea1i m\u1eadt kh\u1ea9u cho ng\u01b0\u1eddi d\xf9ng n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{q.A.ResetPassword({NguoiDungID:a}).then((e=>{e.data.Status>0?(H(o.A.getList(n)),r.Ay.destroy(),r.Ay.success(e.data.Message)):(r.Ay.destroy(),r.Ay.error(e.data.Message))})).catch((e=>{r.Ay.destroy(),r.Ay.error(e.toString())}))}});var a}})}):""]}),ee=[{title:"STT",align:"center",width:5,render:(e,n,a)=>(0,_.jsx)("span",{children:(ne-1)*ae+(a+1)})},{title:"T\xean c\xe1n b\u1ed9",dataIndex:"TenCanBo",width:14},{title:"T\xean ng\u01b0\u1eddi d\xf9ng",dataIndex:"TenNguoiDung",width:14},{title:"Ng\xe0y sinh",dataIndex:"NgaySinh",align:"center",width:14,render:(e,n,a)=>e?N()(e).format("DD/MM/YYYY"):""},{title:"Gi\u1edbi t\xednh",dataIndex:"GioiTinh",width:5,render:(e,n,a)=>1===n.GioiTinh?"Nam":2===n.GioiTinh?"Kh\xe1c":0===n.GioiTinh?"N\u1eef":""},{title:"\u0110\u1ecba ch\u1ec9",dataIndex:"DiaChi",align:"center",width:14},{title:"C\u01a1 quan",dataIndex:"TenCoQuan",align:"center",width:14},{title:"Quy\u1ec1n k\xfd",dataIndex:"QuyenKy",align:"center",width:15,render:(e,n,a)=>1===n.QuyenKy?"C\xf3":"Kh\xf4ng"},{title:"Xem t\xe0i li\u1ec7u m\u1eadt",dataIndex:"XemTaiLieuMat",align:"center",width:15,render:(e,n,a)=>1===n.XemTaiLieuMat?"C\xf3":"Kh\xf4ng"},{title:"Thao t\xe1c",align:"center",width:13,render:(e,n)=>Z(n)}],ne=n.PageNumber?parseInt(n.PageNumber):1,ae=n.PageSize?parseInt(n.PageSize):(0,L.WT)();return(0,_.jsx)(V,{children:(0,_.jsxs)(p.A,{children:[(0,_.jsxs)(K.A,{children:[(0,_.jsx)(d.A,{children:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng"}),(0,_.jsx)(s.A,{children:U.add?(0,_.jsxs)(h.$n,{onClick:()=>{k("add"),w({}),M(),i(!0)},children:[(0,_.jsx)(y.A,{}),"Th\xeam"]}):null})]}),(0,_.jsxs)(v.A,{children:[(0,_.jsxs)(T.A,{children:[(0,_.jsxs)(h.l6,{placeholder:"Xem t\u1ea5t c\u1ea3 c\xe1n b\u1ed9",style:{width:200},onChange:e=>J(e,"LoaiCanBo"),allowClear:!0,children:[(0,_.jsx)(h.c$,{value:1,children:"Xem t\u1ea5t c\u1ea3 c\xe1n b\u1ed9"},1),(0,_.jsx)(h.c$,{value:0,children:"C\xe1n b\u1ed9 qu\u1ea3n tr\u1ecb \u0111\u01a1n v\u1ecb"},0)]}),(0,_.jsx)(h.f7,{showSearch:!0,treeData:X,onChange:e=>J(e,"CoQuanID"),style:{width:400},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ecdn c\u01a1 quan",allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title",defaultValue:n.CoQuanID}),(0,_.jsx)(z,{placeholder:"Nh\u1eadp t\xean c\xe1n b\u1ed9, ng\u01b0\u1eddi d\xf9ng ho\u1eb7c c\u01a1 quan c\u1ea7n t\xecm ki\u1ebfm",onSearch:e=>J(e,"keyword"),style:{width:350},defaultValue:n.Keyword,allowClear:!0})]}),(0,_.jsx)(D.Ay,{columns:ee,dataSource:P,loading:G,onChange:(e,t,i)=>{let l=n,r={pagination:e,filters:t,sorter:i},c=(0,L.D5)(l,null,r);a(c)},pagination:{showSizeChanger:!0,showTotal:(e,n)=>"T\u1eeb ".concat(n[0]," \u0111\u1ebfn ").concat(n[1]," tr\xean ").concat(e," k\u1ebft qu\u1ea3"),total:F,current:ne,pageSize:ae}})]}),(0,_.jsx)(Q,{visible:t,onCancel:W,dataEdit:f,onCreate:e=>{E(!0),"add"===Y?(delete e.CanBoID,q.A.AddUser(e).then((e=>{E(!1),e.data.Status>0?(r.Ay.destroy(),r.Ay.success("Th\xeam c\xe1n b\u1ed9 th\xe0nh c\xf4ng"),W(),H(o.A.getList(n))):(r.Ay.destroy(),r.Ay.error(e.data.Message))})).catch((e=>{E(!1),r.Ay.destroy(),r.Ay.error(e.toString())}))):"edit"===Y&&q.A.EditUser(e).then((e=>{E(!1),e.data.Status>0?(r.Ay.destroy(),r.Ay.success("C\u1eadp nh\u1eadt c\xe1n b\u1ed9 th\xe0nh c\xf4ng"),W(),H(o.A.getList(n))):(r.Ay.destroy(),r.Ay.error(e.data.Message))})).catch((e=>{E(!1),r.Ay.destroy(),r.Ay.error(e.toString())}))},loading:I,action:Y,DanhSachCoQuan:X,DanhSachChucVu:O},S)]})})}))},38674:(e,n,a)=>{a.d(n,{A:()=>d});var t=a(58168),i=a(82483);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var r=a(56594),c=function(e,n){return i.createElement(r.A,(0,t.A)({},e,{ref:n,icon:l}))};const d=i.forwardRef(c)},21428:(e,n,a)=>{a.d(n,{A:()=>d});var t=a(58168),i=a(82483);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var r=a(56594),c=function(e,n){return i.createElement(r.A,(0,t.A)({},e,{ref:n,icon:l}))};const d=i.forwardRef(c)},2782:(e,n,a)=>{a.d(n,{A:()=>d});var t=a(58168),i=a(82483);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};var r=a(56594),c=function(e,n){return i.createElement(r.A,(0,t.A)({},e,{ref:n,icon:l}))};const d=i.forwardRef(c)},65935:(e,n,a)=>{a.d(n,{A:()=>d});var t=a(58168),i=a(82483);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"};var r=a(56594),c=function(e,n){return i.createElement(r.A,(0,t.A)({},e,{ref:n,icon:l}))};const d=i.forwardRef(c)}}]);