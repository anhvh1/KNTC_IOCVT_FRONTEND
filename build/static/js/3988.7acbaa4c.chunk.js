"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[3988],{58828:(i,n,e)=>{e.r(n),e.d(n,{default:()=>ki});var a,t=e(82483),l=e(82402),o=e(53660),s=e(54686),h=e.n(s),d=(e(80401),e(92378)),c=e(93445),r=e(256),u=e(65828),x=e(27603),m=e(34045),g=e(81538),p=e(64684),y=e(67353),T=e(53615),D=e(74405),S=e(69973),j=e(57528),v=e(22953);const f=v.Ay.div(a||(a=(0,j.A)(["\n  .ant-tabs-nav::before {\n    display: none !important;\n  }\n  .ant-tabs-nav-wrap div:first-child {\n    transform: none !important;\n  }\n  .ant-tabs-ink-bar {\n    display: none;\n  }\n  .ant-tabs-ink-bar-animated {\n    display: none;\n  }\n  .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n  .ant-tabs-tab {\n    padding: 10px 0;\n  }\n  .ant-tabs .ant-tabs-tab {\n  }\n  .ant-tabs .ant-tabs-tab + .ant-tabs-tab {\n    margin: 0 !important;\n  }\n  .ant-tabs__title {\n    width: 200px;\n    /* height: 35px; */\n    background: #eaf1fb;\n    color: #000;\n    padding: 10px 0;\n    height: 36px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-left: 1px solid #0b57d0;\n  }\n  .ant-tabs-tab-active .ant-tabs__title {\n    background: rgb(40, 120, 215) !important;\n    color: #fff;\n    background: #94cef7;\n    font-weight: 600;\n  }\n"])));var C,L=e(27957),b=e(33713),H=e(18570),A=e(67466),M=e(74450),N=e(79948),w=e(72741),k=e(63419),F=e(88701),I=e(2370);const Q=v.Ay.div(C||(C=(0,j.A)(["\n  .ant-form-title__left {\n    margin-bottom: 0;\n    .ant-form-item-row {\n      display: grid !important;\n    }\n    .ant-form-item-label {\n      text-align: left;\n    }\n    .ant-form-item-row {\n      width: 100%;\n    }\n    .ant-form-item-control-input-content {\n      width: 100%;\n      /* width: 450px; */\n      input {\n        height: 30px;\n      }\n    }\n  }\n  .tile-content {\n    font-weight: 600;\n    margin-bottom: 10px;\n  }\n  .item-info + .item-info {\n    margin-top: 10px;\n  }\n  .item-info {\n    span {\n      font-weight: 600;\n    }\n  }\n  .box-file {\n    table {\n      border-collapse: collapse;\n    }\n    table th,\n    table td {\n      border: 1px solid #d7d7d7;\n    }\n  }\n  .file-item {\n    padding: 5px;\n  }\n  .file {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    p {\n      font-weight: 600;\n    }\n  }\n\n  .ant-form-title__left {\n    margin-bottom: 0;\n    .ant-form-item-row {\n      display: grid !important;\n    }\n    .ant-form-item-label {\n      text-align: left;\n    }\n    .ant-form-item-row {\n      width: 100%;\n    }\n    .ant-form-item-control-input-content {\n      width: 100%;\n      /* width: 450px; */\n      input {\n        height: 30px;\n      }\n    }\n  }\n\n  .group-title {\n    margin-top: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    .title-content__breadCum {\n      font-size: 14px;\n      font-weight: 600;\n    }\n    button {\n      width: 80px !important;\n      height: 25px !important;\n    }\n  }\n  .wrapper-user {\n    margin-top: 10px;\n    .title {\n      display: grid;\n      grid-template-columns: 45.5% auto;\n      /* justify-content: space-between; */\n      p {\n        font-size: 13px;\n      }\n    }\n  }\n  .groups-user {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    .wrapper-select {\n      display: grid;\n      grid-template-columns: 450px 450px auto;\n      gap: 30px;\n      align-items: center;\n    }\n  }\n  .btn-delete {\n    justify-self: end;\n    justify-items: end;\n    button {\n      width: 80px;\n      height: 25px;\n    }\n  }\n\n  .file-wrapper {\n    margin-top: 30px;\n    .file-wrapper__top {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      p {\n        font-size: 13px;\n        font-weight: bold;\n      }\n    }\n    .file-wrapper__content {\n      table {\n        margin-top: 10px;\n        width: 100%;\n        border-collapse: collapse;\n        thead th {\n          border: 1px solid #797979;\n        }\n        tbody td {\n          border: 1px solid #797979;\n        }\n      }\n    }\n  }\n  .info-wrapper {\n    margin-top: 30px;\n  }\n  .user-report {\n    margin-top: 30px;\n  }\n  .ant-picker {\n    height: 30px;\n    width: 100%;\n  }\n"])));e(94690);var X=e(93474),K=e(87734),_=e(21428),B=e(38674),G=e(56723);const{Item:Y}=N.A;class E extends t.Component{constructor(i){super(i),this.deteleFile=(i,n)=>{const{DanhSachHoSoTaiLieu:e}=this.state;i.FileDinhKemID?w.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a file \u0111\xednh k\xe8m n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{i.TrangThai=0;const n=[...e],a=n.indexOf(i);n.splice(a,1),this.setState({DanhSachHoSoTaiLieu:n,isFalseFile:!1,messErr:""})}}):(e.splice(n,1),this.setState({DanhSachHoSoTaiLieu:e,isFalseFile:!1,messErr:""}))},this.onOk=async()=>{const{DanhSachHoSoTaiLieu:i}=this.state,{onCreate:n,dataEdit:e}=this.props;this.formRef.current.validateFields().then((a=>{const t={DanhSachHoSoTaiLieu:i,...a,type:null===e||void 0===e?void 0:e.type};n(t)})).catch((i=>console.log("errr",i)))},this.showModalHoSoTaiLieu=i=>{if(i||0===i){const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=e+1;this.setState({keyModalHoSoTaiLieu:a,visibleModalHoSoTaiLieu:!0,dataModalHoSoTaiLieu:{...n[i],index:i}})}else{const{DanhSachHoSoTaiLieu:i,keyModalHoSoTaiLieu:n}=this.state,e=n+1;this.setState({keyModalHoSoTaiLieu:e,visibleModalHoSoTaiLieu:!0})}},this.closeModalHoSoTaiLieu=i=>{this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:{}})},this.closeModalTrinhDuyet=()=>{this.setState({visibleModalTrinhDuyet:!1})},this.deleteHoSoTaiLieu=i=>{w.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state;n.splice(i,1),c.Ay.destroy(),c.Ay.success("X\xf3a th\xe0nh c\xf4ng")}})},this.submitModalHoSoTaiLieu=i=>{const{index:n}=i;if(n||0===n){const{DanhSachHoSoTaiLieu:e}=this.state,a=[...e];a.splice(n,1,i),this.setState({visibleModalHoSoTaiLieu:!1,DanhSachHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("C\u1eadp nh\u1eadt h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}else{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=[...n];a.push(i),this.setState({visibleModalHoSoTaiLieu:!1,DanhSachHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("Th\xeam m\u1edbi h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}},this.handleChangeQuyetDinhGiaiQuyet=(0,H.pk)(((i,n,e,a)=>{const{DanhSachQuyetDinhGiaiQuyet:t}=this.state,l=[...t];a?(l[n][a][e]=i,this.setState({DanhSachQuyetDinhGiaiQuyet:l})):(l[n][e]=i,this.setState({DanhSachQuyetDinhGiaiQuyet:l}))})),this.state={DanhSachHoSoTaiLieu:[],dataModalHoSoTaiLieu:{},DanhSachQuyetDinhGiaiQuyet:[],keyModalHoSoTaiLieu:0,visibleModalHoSoTaiLieu:!1,keyModalTrinhDuyet:0,visibleModalTrinhDuyet:!1,fileView:{},fileKey:0,loading:!1,isFile:!1},this.formRef=t.createRef()}componentDidMount(){const{dataEdit:i}=this.props;i&&i.HuongGiaiQuyetID&&(this.formRef&&this.formRef.current.setFieldsValue({...i}),this.setState({DanhSachHoSoTaiLieu:i.DanhSachHoSoTaiLieu}))}render(){var i;const{dataEdit:n,title:e,visible:a,onCreate:t,fileKey:l,onCancel:o,DanhSachTenFile:s,DanhSachHuongXuLy:d,DanhSachCanBoXuLy:c,DanhSachLoaiKetQua:x,DanhSachCoQuan:m,loading:g}=this.props,{ListFileDinhKem:p,isFile:y,DanhSachHoSoTaiLieu:T,visibleModalTrinhDuyet:D,DanhSachQuyetDinhGiaiQuyet:S}=this.state,j=null!==(i=this.props.dataEdit)&&void 0!==i&&i.isViewDetails?this.props.dataEdit.isViewDetails:null;return(0,G.jsx)(u.aF,{title:n&&1===n.type?"Ban h\xe0nh quy\u1ebft \u0111\u1ecbnh giao x\xe1c minh":2===n.type?"Ban h\xe0nh quy\u1ebft \u0111\u1ecbnh gi\u1ea3i quy\u1ebft":"",visible:a,className:"center-modal__footer",footer:[(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(I.A,{type:"primary",onClick:()=>this.onOk(!0),loading:g,children:[(0,G.jsx)(K.A,{})," Ban h\xe0nh"]}),(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>o(),children:"H\u1ee7y"})]})],width:800,onCancel:()=>o(),children:(0,G.jsx)(Q,{children:(0,G.jsxs)(N.A,{ref:this.formRef,children:[(0,G.jsxs)("div",{className:"content-wrapper",children:[(0,G.jsx)("p",{className:"tile-content",children:"Th\xf4ng tin quy\u1ebft \u0111\u1ecbnh gi\u1ea3i quy\u1ebft"}),(0,G.jsx)(k.A,{gutter:[30,0],children:(0,G.jsx)(F.A,{md:24,span:24,children:(0,G.jsx)(Y,{label:"N\u1ed9i dung ban h\xe0nh",name:1===n.type?"NoiDungBanHanh":"NoiDungGiaiQuyet",className:"ant-form-title__left",children:(0,G.jsx)(u.TM,{style:{width:"100%"}})})})}),(0,G.jsxs)("div",{className:"file",children:[(0,G.jsx)("p",{children:"H\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)(I.A,{type:"primary",onClick:()=>this.showModalHoSoTaiLieu(),children:"Th\xeam h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"})]}),T&&null!==T&&void 0!==T&&T.length?(0,G.jsx)("div",{style:{marginTop:"10px"},className:"box-file",children:(0,G.jsxs)("table",{children:[(0,G.jsx)("thead",{children:(0,G.jsxs)("tr",{children:[(0,G.jsx)("th",{style:{width:"5%"},children:"STT"}),(0,G.jsx)("th",{style:{width:"30%"},children:"T\xean h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)("th",{style:{width:"30%"},children:"File \u0111\xednh k\xe8m"}),(0,G.jsx)("th",{style:{width:"25%"},children:"Ng\xe0y c\u1eadp nh\u1eadt"}),j?null:(0,G.jsx)("th",{style:{width:"15%",textAlign:"center"},children:"Thao t\xe1c"})]})}),T.map(((i,n)=>(0,G.jsxs)("tbody",{children:[(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:n+1}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.TenFile)}),(0,G.jsx)("td",{children:(0,G.jsx)("div",{className:"group-file",children:i.FileDinhKem[0]?(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileDinhKem[0].FileUrl,target:"_blank",children:i.FileDinhKem[0].name||i.FileDinhKem[0].TenFile})}):null})}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(0,G.jsx)("p",{children:h()().format("DD/MM/YYYY")})}),j?null:(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:(0,G.jsxs)("div",{className:"action-btn",children:[(0,G.jsx)(r.A,{title:"S\u1eeda H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(_.A,{onClick:()=>this.showModalHoSoTaiLieu(n)})}),(0,G.jsx)(r.A,{title:"X\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(B.A,{onClick:()=>this.deteleFile(i,n)})})]})})]}),i.FileDinhKem?i.FileDinhKem.map(((i,n)=>{if(n>0)return(0,G.jsx)("tr",{children:(0,G.jsx)("td",{children:(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileUrl,target:"_blank",children:i.name||i.TenFile})})})})})):null]})))]})}):""]}),(0,G.jsx)(X.A,{visible:this.state.visibleModalHoSoTaiLieu,dataEdit:this.state.dataModalHoSoTaiLieu,onCancel:this.closeModalHoSoTaiLieu,onCreate:this.submitModalHoSoTaiLieu},this.state.keyModalHoSoTaiLieu)]})})},l)}}const R=E;var V=e(60559),O=e(5103),P=e(82859),q=e(32870),U=e(2637),W=e(11473);e(61042);const z=(0,l.Ng)((function(i){return{...i.TheoGioiGiaiQuyet}}),x.A)((i=>{var n,e,a,l,s;document.title="Theo d\xf5i gi\u1ea3i quy\u1ebft KNTC, KNPA";const{filterData:d,setFilterData:x}=i,[j,v]=(0,t.useState)({}),[C,N]=(0,t.useState)(!1),[w,k]=(0,t.useState)(""),[F,I]=(0,A.D)(),[Q,X]=(0,t.useState)([]),[K,_]=(0,t.useState)(!1),[B,Y]=(0,t.useState)(!1),[E,z]=(0,t.useState)(0),[$,J]=(0,t.useState)({}),[Z,ii]=(0,t.useState)(!1),ni=(0,H.b5)("user",{}),ei=1===ni.ChuTichUBND&&ni.CapHanhChinh===b.CapHanhChinh.CapUBNDHuyen,{DanhSachCoQuanQDGiaoXacMinh:ai,DanhSachTheoDoiGiaiQuyet:ti,DanhSachHuongXuLy:li,DanhSachLoaiKhieuTo:oi,TotalRow:si,role:hi,tableLoading:di}=i,ci=null===ti||void 0===ti||null===(n=ti.find((i=>i.XuLyDonID===Q[0])))||void 0===n?void 0:n.TrangThaiID,ri=(null===ti||void 0===ti||null===(e=ti.find((i=>i.XuLyDonID===Q[0])))||void 0===e||e.StateID,null===ti||void 0===ti||null===(a=ti.find((i=>i.XuLyDonID===Q[0])))||void 0===a?void 0:a.TrinhDuThao);(0,t.useEffect)((()=>{(0,H._Y)(d),i.getInitData(d)}),[d]),(0,t.useEffect)((()=>{i.getData()}),[]);const ui=(i,n,e)=>{let a=d,t={pagination:i,filters:n,sorter:e},l=(0,H.D5)(a,null,t);x(l),X([])},xi=(i,n)=>{let e=d,a={value:i,property:n},t=(0,H.D5)(e,a,null);x(t),X([])},mi=i=>{k("add"),v({type:i}),I(),1===i&&ei?ii(!0):N(!0)},gi=()=>{v({}),ii(!1),N(!1)},pi=(n,e)=>{_(!0);const a=Q[0];n.XuLyDonID=a;const{type:t}=n,l=i=>1===t?M.A.BanHanh(i):M.A.BanHanhQuyetDinhGiaiQuyet(i),o={FileType:ei?b.LoaiFileDinhKem.FileCapNhatGiaoXacMinh:1===(null===n||void 0===n?void 0:n.type)?b.LoaiFileDinhKem.BanHanhQDGiaoXacMinh:2===(null===n||void 0===n?void 0:n.type)?b.LoaiFileDinhKem.BanHanhQDGiaoGiaiQuyet:null};if("add"===w){const e=[];n.DanhSachHoSoTaiLieu&&(0,H.Yj)(n.DanhSachHoSoTaiLieu,e,o,M.A),Promise.all(e).then((e=>{1===t?4===ci&&ei?M.A.CapNhatQuyetDinhGiaoXacMinhCTH(n).then((n=>{_(!1),n&&n.data&&1===n.data.Status?(c.Ay.success(n.data.Message),X([]),gi(),i.getInitData(d)):c.Ay.error("".concat(n&&n.data?n.data.Message:"L\u1ed7i h\u1ec7 th\u1ed1ng"))})):l({XuLyDonID:a,NoiDungBanHanh:"",DanhSachHoSoTaiLieu:[]}).then((e=>{e&&e.data&&1===e.data.Status?ei?M.A.CapNhatQuyetDinhGiaoXacMinhCTH(n).then((n=>{_(!1),n&&n.data&&1===n.data.Status?(c.Ay.success(n.data.Message),X([]),gi(),i.getInitData(d)):c.Ay.error("".concat(n&&n.data?n.data.Message:"L\u1ed7i h\u1ec7 th\u1ed1ng"))})):(_(!1),gi(),i.getInitData(d)):(_(!1),c.Ay.error("".concat(e&&e.data?e.data.Message:"L\u1ed7i h\u1ec7 th\u1ed1ng")))})):l(n).then((n=>{_(!1),n&&n.data&&1===n.data.Status&&n&&n.data&&1===n.data.Status?(c.Ay.success(n.data.Message),X([]),gi(),i.getInitData(d)):c.Ay.error("".concat(n&&n.data?n.data.Message:"L\u1ed7i h\u1ec7 th\u1ed1ng"))}))}))}},yi=()=>{const{Search:i}=L.A;return(0,G.jsxs)(y.A,{isCenter:!0,children:[(0,G.jsxs)(S.Ay,{style:{width:"200px"},value:d.Status,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i",allowClear:!0,onChange:i=>xi(i,"TrangThaiXuLyID"),children:[(0,G.jsx)(Option,{value:0,children:"Ch\u01b0a duy\u1ec7t"}),(0,G.jsx)(Option,{value:1,children:"\u0110\xe3 duy\u1ec7t"}),(0,G.jsx)(Option,{value:2,children:"X\u1eed l\xfd l\u1ea1i"})]}),(0,G.jsx)(S.Ay,{style:{width:"200px"},value:d.LoaiKhieuToID,placeholder:"Ch\u1ecdn lo\u1ea1i khi\u1ebfu t\u1ed1",allowClear:!0,onChange:i=>xi(i,"LoaiKhieuToID"),children:oi?oi.map((i=>(0,G.jsx)(Option,{value:i.LoaiKhieuToID.toString(),children:i.TenLoaiKhieuTo},i.LoaiKhieuToID))):null}),(0,G.jsx)(P.A,{onFilter:xi,filterData:d}),(0,G.jsx)(u.NJ,{allowClear:!0,defaultValue:null===d||void 0===d?void 0:d.Keyword,placeholder:"Nh\u1eadp \u0111\u1ed1i t\u01b0\u1ee3ng KNTC, KNPA ho\u1eb7c n\u1ed9i dung ti\u1ebfp",style:{width:300},onSearch:i=>xi(i,"Keyword")})]})},Ti=d.PageNumber?parseInt(d.PageNumber):1,Di=d.PageSize?parseInt(d.PageSize):(0,H.WT)(),Si=[{title:"S\u1ed1 \u0111\u01a1n th\u01b0",dataIndex:"SoDonThu",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:1===n.TrangThaiQuaHan?"red":""},children:n.SoDonThu})},{title:"Ng\xe0y ti\u1ebfp nh\u1eadn",dataIndex:"NgayGui",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:1===n.TrangThaiQuaHan?"red":""},children:n.NgayGui?h()(n.NgayGui).format("DD/MM/YYYY"):null})},{title:"Th\xf4ng tin ch\u1ee7 \u0111\u01a1n",dataIndex:"TenChuDon",align:"left",width:"25%",render:(i,n,e)=>(0,G.jsx)("div",{children:null!==n&&void 0!==n&&n.listDoiTuongKN?n.listDoiTuongKN.map((i=>(0,G.jsxs)("div",{children:[(0,G.jsx)("p",{style:{fontWeight:"600",color:1===n.TrangThaiQuaHan?"red":"",textTransform:"capitalize"},children:i.HoTen}),(0,G.jsx)("p",{style:{color:1===n.TrangThaiQuaHan?"red":""},children:i.DiaChiCT})]}))):null})},{title:"N\u1ed9i dung v\u1ee5 vi\u1ec7c",dataIndex:"NoiDungDon",align:"left",width:"30%",render:(i,n,e)=>(0,G.jsx)(r.A,{title:n.NoiDungDon,children:(0,G.jsx)("p",{style:{color:1===n.TrangThaiQuaHan?"red":""},children:(0,H.Mi)(n.NoiDungDon,150)})})},{title:"Lo\u1ea1i khi\u1ebfu t\u1ed1",dataIndex:"TenLoaiKhieuTo",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:1===n.TrangThaiQuaHan?"red":""},children:n.TenLoaiKhieuTo})},{title:"C\u01a1 quan \u0111\u01b0\u1ee3c giao x\xe1c minh",dataIndex:"CoQuanDuocGiaoXacMinh",align:"left",width:"10%",render:(i,n,e)=>{var a,t;return(0,G.jsx)("p",{style:{color:1===n.TrangThaiQuaHan?"red":""},children:null!==n&&void 0!==n&&null!==(a=n.GiaoXacMinh)&&void 0!==a&&a.CoQuanID?null===ji||void 0===ji||null===(t=ji.find((i=>{var e;return i.CoQuanID===(null===n||void 0===n||null===(e=n.GiaoXacMinh)||void 0===e?void 0:e.CoQuanID)})))||void 0===t?void 0:t.TenCoQuan:null})}},{title:"H\u1ea1n gi\u1ea3i quy\u1ebft",dataIndex:"HanGiaiQuyet",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:1===n.TrangThaiQuaHan?"red":""},children:n.NgayQuaHan?h()(n.NgayQuaHan).format("DD/MM/YYYY"):null})},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"TrangThai",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:1===n.TrangThaiQuaHan?"red":""},children:(0,H.l6)(n,"TrangThai")})}],{DanhSachCoQuan:ji}=i,vi=ci>=3&&ci<6,fi=null===ti||void 0===ti||null===(l=ti.find((i=>i.XuLyDonID===Q[0])))||void 0===l?void 0:l.TrangThaiIDMoi,Ci=null===ti||void 0===ti||null===(s=ti.find((i=>i.XuLyDonID===Q[0])))||void 0===s?void 0:s.CheckTrangThai,Li=Ci?!(1===Q.length&&fi===b.TrangThaiMoi.ChuaDuyetLan2||fi===b.TrangThaiMoi.DaTrinhDuyetLan2||fi===b.TrangThaiMoi.DaBanHanhQuyetDinhGiaoXacMinh):!(1===Q.length&&ri>=1&&vi),bi=Ci?!(1===Q.length&&(fi===b.TrangThaiMoi.DuyetLan2VaTrinhXacMinhLan3||fi===b.TrangThaiMoi.DuyetLan3)):!(1===Q.length&&5===ci);return(0,G.jsxs)(o.A,{children:[(0,G.jsxs)(U.A,{children:[(0,G.jsx)(m.A,{children:"Theo d\xf5i gi\u1ea3i quy\u1ebft KNTC, KNPA"}),(0,G.jsxs)(g.A,{children:[(0,G.jsxs)(u.$n,{className:"btn-center",type:"primary",onClick:()=>{var i;const n=Q[0],e=null===ti||void 0===ti||null===(i=ti.find((i=>i.XuLyDonID===n)))||void 0===i?void 0:i.DonThuID;M.A.ChiTietDonThu2({XuLyDonID:n,DonThuID:e}).then((i=>{i.data.Status>0&&(J(i.data.Data),Y(!0),z((i=>i+1)))}))},disabled:!(1===Q.length),children:[(0,G.jsx)("img",{src:1!==Q.length?q.A.Preview:q.A.PreviewWhite,className:"btn-icon__img"}),"Xem chi ti\u1ebft \u0111\u01a1n th\u01b0"]}),hi.edit?(0,G.jsxs)(u.$n,{className:"btn-center",type:"primary",onClick:()=>mi(1),disabled:Li,children:[(0,G.jsx)("img",{src:Li?q.A.Approval:q.A.ApprovalWhite,className:"btn-icon__img"}),ei?4===ci&&ci?"C\u1eadp nh\u1eadt giao x\xe1c minh, gi\u1ea3i quy\u1ebft":"Giao x\xe1c minh, gi\u1ea3i quy\u1ebft":4===ci&&ci?"C\u1eadp nh\u1eadt Q\u0110 giao x\xe1c minh":"Ban h\xe0nh Q\u0110 giao x\xe1c minh"]}):null,hi.edit?(0,G.jsxs)(u.$n,{className:"btn-center",type:"primary",onClick:()=>mi(2),disabled:bi,children:[(0,G.jsx)("img",{src:bi?q.A.Approval:q.A.ApprovalWhite,className:"btn-icon__img"}),"Ban h\xe0nh Q\u0110 gi\u1ea3i quy\u1ebft"]}):null]})]}),(0,G.jsx)(p.A,{children:(0,G.jsx)(f,{children:(()=>{const i={selectedRowsKey:Q,renderCell:(i,n,e,a)=>(0,G.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,G.jsx)(V.A,{className:"ant-icon__table",style:{marginRight:4,fontSize:14,visibility:"hidden"}}),(0,G.jsx)("div",{children:(0,G.jsx)(D.A,{className:"selected__table",checked:Q.includes(n.XuLyDonID),onChange:()=>(i=>{const n=[...Q];n.includes(i.key)?X(n.filter((n=>n!==i.key))):X([...n,i.key])})(n)})})]}),onChange:i=>{X(i)}},n=null===ti||void 0===ti?void 0:ti.map((i=>({...i,key:null===i||void 0===i?void 0:i.XuLyDonID})));return(0,G.jsxs)(G.Fragment,{children:[yi(),(0,G.jsx)(T.Ay,{loading:di,rowSelection:i,columns:Si,dataSource:n,onChange:ui,pagination:{showSizeChanger:!0,showTotal:(i,n)=>"T\u1eeb ".concat(n[0]," \u0111\u1ebfn ").concat(n[1]," tr\xean ").concat(i," k\u1ebft qu\u1ea3"),total:si,current:Ti,pageSize:Di}})]})})()})}),(0,G.jsx)(W.A,{visible:Z,dataEdit:j,action:w,loading:K,onCreate:pi,onCancel:gi,dataSource:ti,DanhSachHuongXuLy:li,XuLyDonID:Q[0],DanhSachCoQuan:ai,checkCTHuyen:ei,TitleModal:ei?4===ci&&ci?"C\u1eadp nh\u1eadt giao x\xe1c minh, gi\u1ea3i quy\u1ebft":"Giao x\xe1c minh, gi\u1ea3i quy\u1ebft":4===ci&&ci?"C\u1eadp nh\u1eadt Q\u0110 giao x\xe1c minh":"Ban h\xe0nh Q\u0110 giao x\xe1c minh"},F),(0,G.jsx)(R,{visible:C,dataEdit:j,action:w,loading:K,onCreate:pi,onCancel:gi,dataSource:ti,DanhSachHuongXuLy:li,XuLyDonID:Q[0],DanhSachCoQuan:ji},F),(0,G.jsx)(O.A,{visible:B,dataEdit:$,onCancel:()=>{J({}),Y(!1)}},E)]})}));var $,J=e(8901);const Z=v.Ay.div($||($=(0,j.A)(["\n  .ant-tabs-nav::before {\n    display: none !important;\n  }\n  .ant-tabs-nav-wrap div:first-child {\n    transform: none !important;\n  }\n  .ant-tabs-ink-bar {\n    display: none;\n  }\n  .ant-tabs-ink-bar-animated {\n    display: none;\n  }\n  .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n  .ant-tabs-tab {\n    padding: 10px 0;\n  }\n  .ant-tabs .ant-tabs-tab {\n  }\n  .ant-tabs .ant-tabs-tab + .ant-tabs-tab {\n    margin: 0 !important;\n  }\n  .ant-tabs__title {\n    width: 200px;\n    /* height: 35px; */\n    background: #eaf1fb;\n    color: #000;\n    padding: 10px 0;\n    height: 36px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-left: 1px solid #0b57d0;\n  }\n  .ant-tabs-tab-active .ant-tabs__title {\n    background: rgb(40, 120, 215) !important;\n    color: #fff;\n    background: #94cef7;\n    font-weight: 600;\n  }\n"])));var ii=e(81745),ni=e(87704),ei=e(26418),ai=e(23511),ti=e(9716),li=e(67637);const{Item:oi}=N.A;class si extends t.Component{constructor(i){super(i),this.deteleFile=(i,n)=>{const{DanhSachHoSoTaiLieu:e}=this.state;i.FileDinhKemID?w.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a file \u0111\xednh k\xe8m n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{i.TrangThai=0;const n=[...e],a=n.indexOf(i);n.splice(a,1),this.setState({DanhSachHoSoTaiLieu:n,isFalseFile:!1,messErr:""})}}):(e.splice(n,1),this.setState({DanhSachHoSoTaiLieu:e,isFalseFile:!1,messErr:""}))},this.onOk=async()=>{const{DanhSachHoSoTaiLieu:i,currentKey:n}=this.state,{onCreate:e,dataEdit:a}=this.props;if(!i||!i.length)return this.setState({isFile:!0}),c.Ay.destroy(),void c.Ay.warning("Vui l\xf2ng \u0111\xednh k\xe8m v\u0103n b\u1ea3n quy\u1ebft \u0111\u1ecbnh");this.formRef.current.validateFields().then((a=>{const t={...a,DanhSachHoSoTaiLieu:i,LoaiKetQuaID:n,ThoiHanThiHanh:(0,H.Yq)(null===a||void 0===a?void 0:a.ThoiHanThiHanh),NgayQuyetDinh:(0,H.Yq)(null===a||void 0===a?void 0:a.NgayQuyetDinh)};this.props.XuLyDonID&&(t.XuLyDonID=this.props.XuLyDonID);for(const i in t)t[i]||delete t[i];e(t)})).catch((i=>console.log("errr",i)))},this.showModalHoSoTaiLieu=i=>{if(i||0===i){const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=e+1;this.setState({keyModalHoSoTaiLieu:a,visibleModalHoSoTaiLieu:!0,dataModalHoSoTaiLieu:{...n[i],index:i}})}else{const{DanhSachHoSoTaiLieu:i,keyModalHoSoTaiLieu:n}=this.state,e=n+1;this.setState({keyModalHoSoTaiLieu:e,visibleModalHoSoTaiLieu:!0})}},this.closeModalHoSoTaiLieu=i=>{this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:{}})},this.deleteHoSoTaiLieu=i=>{w.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state;n.splice(i,1),c.Ay.destroy(),c.Ay.success("X\xf3a th\xe0nh c\xf4ng")}})},this.submitModalHoSoTaiLieu=i=>{const{index:n}=i;if(n||0===n){const{DanhSachHoSoTaiLieu:e}=this.state,a=[...e];a.splice(n,1,i),this.setState({visibleModalHoSoTaiLieu:!1,DanhSachHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("C\u1eadp nh\u1eadt h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}else{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=[...n];a.push(i),this.setState({visibleModalHoSoTaiLieu:!1,DanhSachHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("Th\xeam m\u1edbi h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}},this.handleChecked=(i,n)=>{if(i.target.checked){const i=[...this.state.NoiDungQuyetDinh];i.push(n),this.setState({NoiDungQuyetDinh:i})}else{const i=[...this.state.NoiDungQuyetDinh],e=i.indexOf(n);i.splice(e,1),this.setState({NoiDungQuyetDinh:i})}},this.handleRenderContentKhieuNai=i=>{var n,e;const a=null===(n=this.props)||void 0===n||null===(e=n.dataEdit)||void 0===e?void 0:e.isViewDetails,{dataEdit:t}=this.props;return 1==i?a?(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:"wrapper-content",children:[(0,G.jsxs)("p",{children:["S\u1ed1 ti\u1ec1n: ",(0,H.yV)(t.SoTienThuHoi)," (\u0111\u1ed3ng)"]}),(0,G.jsxs)("p",{children:["S\u1ed1 \u0111\u1ea5t: ",(0,H.yV)(t.SoDatThuHoi)," (m2)"]})]})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(ei.A,{onChange:i=>this.handleChecked(i,1),children:["C\u1eadp nh\u1eadt n\u1ed9i dung"," ",(0,G.jsx)("span",{style:{fontWeight:600},children:'"Ki\u1ebfn ngh\u1ecb thu h\u1ed3i cho nh\xe0 n\u01b0\u1edbc"'})]}),(0,G.jsx)("div",{className:"line-break",style:{marginLeft:"-22px",width:"115%"}}),this.state.NoiDungQuyetDinh.includes(1)?(0,G.jsxs)(k.A,{gutter:[10,10],children:[(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:(0,G.jsxs)("p",{children:["S\u1ed1 ti\u1ec1n ",(0,G.jsx)("span",{style:{color:"red"},children:"(Ngh\xecn \u0111\u1ed3ng)"})]}),className:"ant-form-title__left",name:"SoTienThuHoi",children:(0,G.jsx)(u.TD,{})})}),(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:(0,G.jsxs)("p",{children:["S\u1ed1 \u0111\u1ea5t ",(0,G.jsx)("span",{style:{color:"red"},children:"(m2)"})]}),className:"ant-form-title__left",name:"SoDatThuHoi",children:(0,G.jsx)(u.TD,{})})})]}):null]}):2===i?a?(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:"wrapper-content__group",children:[(0,G.jsxs)("p",{children:["S\u1ed1 t\u1ed5 ch\u1ee9c \u0111\u01b0\u1ee3c tr\u1ea3 l\u1ea1i quy\u1ec1n l\u1ee3i:"," ",(0,H.yV)(t.SoToChuc)," "]}),(0,G.jsxs)("p",{children:["S\u1ed1 ti\u1ec1n: ",(0,H.yV)(t.SoTienToChucTraLai)," (\u0111\u1ed3ng)"]}),(0,G.jsxs)("p",{children:["S\u1ed1 \u0111\u1ea5t: ",(0,H.yV)(t.SoDatToChucTraLai)," (m2)"]}),(0,G.jsxs)("p",{children:["S\u1ed1 c\xe1 nh\xe2n \u0111\u01b0\u1ee3c tr\u1ea3 quy\u1ec1n l\u1ee3i:"," ",(0,H.yV)(t.SoCaNhan)," "]}),(0,G.jsxs)("p",{children:["S\u1ed1 ti\u1ec1n: ",(0,H.yV)(t.SoTienCaNhanTraLai)," (\u0111\u1ed3ng)"]}),(0,G.jsxs)("p",{children:["S\u1ed1 \u0111\u1ea5t: ",(0,H.yV)(t.SoDatCaNhanTraLai)," (m2)"]})]})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(ei.A,{onChange:i=>this.handleChecked(i,2),children:["C\u1eadp nh\u1eadt n\u1ed9i dung"," ",(0,G.jsx)("span",{style:{fontWeight:600},children:'"Tr\u1ea3 l\u1ea1i cho t\u1ed5 ch\u1ee9c, c\xe1 nh\xe2n"'})]}),(0,G.jsx)("div",{className:"line-break",style:{marginLeft:"-22px",width:"115%"}}),this.state.NoiDungQuyetDinh.includes(2)?(0,G.jsxs)(k.A,{gutter:[10,10],children:[(0,G.jsx)(F.A,{md:8,span:24,children:(0,G.jsx)(oi,{label:"S\u1ed1 t\u1ed5 ch\u1ee9c \u0111\u01b0\u1ee3c tr\u1ea3 quy\u1ec1n l\u1ee3i",className:"ant-form-title__left",name:"SoToChuc",children:(0,G.jsx)(u.TD,{})})}),(0,G.jsx)(F.A,{md:8,span:24,children:(0,G.jsx)(oi,{label:(0,G.jsxs)("p",{children:["S\u1ed1 ti\u1ec1n ",(0,G.jsx)("span",{style:{color:"red"},children:"(ngh\xecn \u0111\u1ed3ng)"})]}),className:"ant-form-title__left",name:"SoTienToChucTraLai",children:(0,G.jsx)(u.TD,{})})}),(0,G.jsx)(F.A,{md:8,span:24,children:(0,G.jsx)(oi,{label:(0,G.jsxs)("p",{children:["S\u1ed1 \u0111\u1ea5t ",(0,G.jsx)("span",{style:{color:"red"},children:"(m2)"})]}),className:"ant-form-title__left",name:"SoDatToChucTraLai",children:(0,G.jsx)(u.TD,{})})}),(0,G.jsx)(F.A,{md:8,span:24,children:(0,G.jsx)(oi,{label:"S\u1ed1 c\xe1 nh\xe2n \u0111\u01b0\u1ee3c tr\u1ea3 quy\u1ec1n l\u1ee3i",className:"ant-form-title__left",name:"SoCaNhan",children:(0,G.jsx)(u.TD,{})})}),(0,G.jsx)(F.A,{md:8,span:24,children:(0,G.jsx)(oi,{label:(0,G.jsxs)("p",{children:["S\u1ed1 ti\u1ec1n ",(0,G.jsx)("span",{style:{color:"red"},children:"(ngh\xecn \u0111\u1ed3ng)"})]}),className:"ant-form-title__left",name:"SoTienCaNhanTraLai",children:(0,G.jsx)(u.TD,{})})}),(0,G.jsx)(F.A,{md:8,span:24,children:(0,G.jsx)(oi,{label:(0,G.jsxs)("p",{children:["S\u1ed1 \u0111\u1ea5t ",(0,G.jsx)("span",{style:{color:"red"},children:"(m2)"})]}),className:"ant-form-title__left",name:"SoDatCaNhanTraLai",children:(0,G.jsx)(u.TD,{})})})]}):null]}):3===i?a?(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:"wrapper-content",children:[(0,G.jsxs)("p",{children:["T\u1ed5ng s\u1ed1 ng\u01b0\u1eddi b\u1ecb ki\u1ebfn ngh\u1ecb x\u1eed l\xfd: ",t.SoNguoiBiKienNghiXuLy," "]}),(0,G.jsxs)("p",{children:["Trong \u0111\xf3 s\u1ed1 c\xe1n b\u1ed9, c\xf4ng ch\u1ee9c, vi\xean ch\u1ee9c: ",t.SoCanBoBiXuLy," "]})]})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(ei.A,{onChange:i=>this.handleChecked(i,3),children:["C\u1eadp nh\u1eadt n\u1ed9i dung"," ",(0,G.jsx)("span",{style:{fontWeight:600},children:'"Ki\u1ebfn ngh\u1ecb x\u1eed l\xfd h\xe0nh ch\xednh"'})]}),(0,G.jsx)("div",{className:"line-break",style:{marginLeft:"-22px",width:"115%"}}),this.state.NoiDungQuyetDinh.includes(3)?(0,G.jsxs)(k.A,{gutter:[10,10],children:[(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:"T\u1ed5ng s\u1ed1 ng\u01b0\u1eddi b\u1ecb ki\u1ebfn ngh\u1ecb x\u1eed l\xfd",className:"ant-form-title__left",name:"SoNguoiBiKienNghiXuLy",children:(0,G.jsx)(u.TD,{})})}),(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:"Trong \u0111\xf3 s\u1ed1 c\xe1n b\u1ed9, c\xf4ng ch\u1ee9c, vi\xean ch\u1ee9c",className:"ant-form-title__left",name:"SoCanBoBiXuLy",children:(0,G.jsx)(u.TD,{})})})]}):null]}):4===i?a?(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:"wrapper-content",children:[(0,G.jsxs)("p",{children:["T\u1ed5ng s\u1ed1 ng\u01b0\u1eddi: ",t.SoNguoiChuyenCoQuanDieuTra," "]}),(0,G.jsxs)("p",{children:["Trong \u0111\xf3 s\u1ed1 c\xe1n b\u1ed9, c\xf4ng ch\u1ee9c, vi\xean ch\u1ee9c:"," ",t.SoCanBoChuyenCoQuanDieuTra]})]})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(ei.A,{onChange:i=>this.handleChecked(i,4),children:["C\u1eadp nh\u1eadt n\u1ed9i dung"," ",(0,G.jsx)("span",{style:{fontWeight:600},children:'"Chuy\u1ec3n c\u01a1 quan \u0111i\u1ec1u tra"'})]}),(0,G.jsx)("div",{className:"line-break",style:{marginLeft:"-22px",width:"115%"}}),this.state.NoiDungQuyetDinh.includes(4)?(0,G.jsxs)(k.A,{gutter:[10,10],children:[(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:"T\u1ed5ng s\u1ed1 ng\u01b0\u1eddi",className:"ant-form-title__left",name:"SoNguoiChuyenCoQuanDieuTra",children:(0,G.jsx)(u.TD,{})})}),(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:"Trong \u0111\xf3 s\u1ed1 c\xe1n b\u1ed9, c\xf4ng ch\u1ee9c, vi\xean ch\u1ee9c",className:"ant-form-title__left",name:"SoCanBoChuyenCoQuanDieuTra",children:(0,G.jsx)(u.TD,{})})})]}):null]}):void 0},this.handleRenderPhanTichKetQua=i=>{const{ItemLoaiKhieuTo:n}=this.props;if(8===n){if(1===i)return"T\u1ed1 c\xe1o \u0111\xfang";if(2===i)return"T\u1ed1 c\xe1o c\xf3 \u0111\xfang, c\xf3 sai";if(3===i)return"T\u1ed1 c\xe1o sai"}else{if(1===i)return"Khi\u1ebfu n\u1ea1i \u0111\xfang";if(2===i)return"Khi\u1ebfu n\u1ea1i \u0111\xfang m\u1ed9t ph\u1ea7n";if(3===i)return"Khi\u1ebfu n\u1ea1i sai"}},this.state={DanhSachHoSoTaiLieu:[],dataModalHoSoTaiLieu:{},keyModalHoSoTaiLieu:0,visibleModalHoSoTaiLieu:!1,fileView:{},fileKey:0,loading:!1,QuyetDinh:1,isFile:!1,currentKey:1,NoiDungQuyetDinh:[]},this.formRef=t.createRef()}componentDidMount(){var i,n,e;const{dataEdit:a}=this.props,t=null===(i=(0,H.b5)("user"))||void 0===i?void 0:i.CapID,l=null===(n=(0,H.b5)("user"))||void 0===n?void 0:n.CoQuanID,o=null===(e=(0,H.b5)("user"))||void 0===e?void 0:e.BanTiepDan,{DanhSachCoQuan:s}=this.props;if(a&&a.DanhSachHoSoTaiLieu&&this.setState({DanhSachHoSoTaiLieu:a.DanhSachHoSoTaiLieu?a.DanhSachHoSoTaiLieu:[]}),this.formRef.current)if(2!==t&&4!==t||!o)this.formRef.current.setFieldsValue({CoQuanBanHanh:l});else{var h;const i=null===(h=s.find((i=>i.CoQuanID===l)))||void 0===h?void 0:h.CoQuanChaID;i&&this.formRef.current.setFieldsValue({CoQuanBanHanh:i})}}render(){var i;const{dataEdit:n,title:e,visible:a,onCreate:t,fileKey:l,onCancel:o,DanhSachTenFile:s,DanhSachHuongXuLy:d,DanhSachCanBoXuLy:c,DanhSachCoQuan:x,ItemLoaiKhieuTo:m}=this.props,g=null===n||void 0===n?void 0:n.Lan2,{ListFileDinhKem:p,loading:y,isFile:T,DanhSachHoSoTaiLieu:D,currentKey:j}=this.state,v=null!==(i=this.props.dataEdit)&&void 0!==i&&i.isViewDetails?this.props.dataEdit.isViewDetails:null,f=[{key:"1",label:(0,G.jsx)("div",{className:"ant-tabs__title",children:"Ki\u1ebfn ngh\u1ecb thu h\u1ed3i cho nh\xe0 n\u01b0\u1edbc"}),children:(0,G.jsx)(G.Fragment,{children:this.handleRenderContentKhieuNai(1)})},{key:"2",label:(0,G.jsx)("div",{className:"ant-tabs__title",children:"Tr\u1ea3 l\u1ea1i cho t\u1ed5 ch\u1ee9c, c\xe1 nh\xe2n"}),children:(0,G.jsx)(G.Fragment,{children:this.handleRenderContentKhieuNai(2)})},{key:"3",label:(0,G.jsx)("div",{className:"ant-tabs__title",children:"Ki\u1ebfn ngh\u1ecb x\u1eed l\xfd h\xe0nh ch\xednh"}),children:(0,G.jsx)(G.Fragment,{children:this.handleRenderContentKhieuNai(3)})},{key:"4",label:(0,G.jsx)("div",{className:"ant-tabs__title",children:"Chuy\u1ec3n c\u01a1 quan \u0111i\u1ec1u tra"}),children:(0,G.jsx)(G.Fragment,{children:this.handleRenderContentKhieuNai(4)})}],C=m===b.LoaiKhieuTo.KhieuNai?"khi\u1ebfu n\u1ea1i":m===b.LoaiKhieuTo.ToCao?"t\u1ed1 c\xe1o":m===b.LoaiKhieuTo.KienNghiPhanAnh?"ki\u1ebfn ngh\u1ecb, ph\u1ea3n \xe1nh":"";return(0,G.jsx)(u.aF,{title:"C\u1eadp nh\u1eadt quy\u1ebft \u0111\u1ecbnh gi\u1ea3i quy\u1ebft ".concat(C," "),visible:a,className:"center-modal__footer",padding:0,footer:v?(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>o(),children:"\u0110\xf3ng"})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(I.A,{type:"primary",onClick:()=>this.onOk(),loading:y,children:[(0,G.jsx)(K.A,{})," L\u01b0u"]}),(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>o(),loading:y,children:"H\u1ee7y"})]}),width:1e3,onCancel:()=>o(),children:(0,G.jsx)(li.A,{children:(0,G.jsxs)(N.A,{ref:this.formRef,children:[v?null:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("p",{className:"title",style:{padding:" 0 22px"},children:["Th\xf4ng tin chung:"," "]}),(0,G.jsxs)(k.A,{gutter:[10,10],style:{padding:" 0 22px"},children:[(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:"S\u1ed1 quy\u1ebft \u0111\u1ecbnh",name:"SoQuyetDinh",className:"ant-form-title__left",children:(0,G.jsx)(L.A,{})})}),(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:"Ng\xe0y ra quy\u1ebft \u0111\u1ecbnh",name:"NgayQuyetDinh",rules:[b.REQUIRED],className:"ant-form-title__left",children:(0,G.jsx)(u.lr,{placeholder:"",format:"DD/MM/YYYY"})})}),(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:"C\u01a1 quan ban h\xe0nh",name:"CoQuanBanHanh",rules:[b.REQUIRED],className:"ant-form-title__left",children:(0,G.jsx)(S.Ay,{children:x&&x.map((i=>(0,G.jsx)(S.c$,{value:null===i||void 0===i?void 0:i.CoQuanID,children:null===i||void 0===i?void 0:i.TenCoQuan})))})})}),(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(oi,{label:"Th\u1eddi h\u1ea1n thi h\xe0nh",name:"ThoiHanThiHanh",className:"ant-form-title__left",children:(0,G.jsx)(u.lr,{placeholder:"",format:"DD/MM/YYYY"})})}),(0,G.jsx)(F.A,{md:24,span:24,children:(0,G.jsx)(oi,{label:"T\xf3m t\u1eaft n\u1ed9i dung gi\u1ea3i quy\u1ebft",name:"TomTatNoiDungGQ",className:"ant-form-title__left",children:(0,G.jsx)(u.TM,{style:{width:"100%"}})})})]}),(0,G.jsx)("div",{className:"line-break"}),(0,G.jsxs)("div",{className:"file",style:{padding:" 0 22px"},children:[(0,G.jsxs)("p",{children:["V\u0103n b\u1ea3n quy\u1ebft \u0111\u1ecbnh ",(0,G.jsx)("span",{style:{color:"red"},children:"(*)"})]}),(0,G.jsx)(I.A,{type:"primary",onClick:()=>this.showModalHoSoTaiLieu(),children:"Th\xeam h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"})]}),(0,G.jsx)("div",{className:"line-break"})]}),v?(0,G.jsxs)("div",{style:{padding:" 0 22px"},children:[(0,G.jsx)("p",{className:"title",children:"Th\xf4ng tin chung: "}),(0,G.jsxs)("div",{className:"group-info",children:[(0,G.jsxs)("p",{children:["S\u1ed1 quy\u1ebft \u0111\u1ecbnh: ",null===n||void 0===n?void 0:n.SoQuyetDinh]}),(0,G.jsxs)("p",{children:["Ng\xe0y ra quy\u1ebft \u0111\u1ecbnh: ",null===n||void 0===n?void 0:n.NgayQuyetDinhStr]}),(0,G.jsxs)("p",{children:["C\u01a1 quan ban h\xe0nh: ",null===n||void 0===n?void 0:n.TenCoQuanBanHanh]}),(0,G.jsxs)("p",{children:["Th\u1eddi h\u1ea1n thi h\xe0nh:"," ",null!==n&&void 0!==n&&n.ThoiHanThiHanh?h()(n.ThoiHanThiHanh).format("DD/MM/YYYY"):null]})]}),(0,G.jsxs)("p",{className:"summary-content",children:["T\xf3m t\u1eaft n\u1ed9i dung gi\u1ea3i quy\u1ebft: ",n.TomTatNoiDungGQ]}),(0,G.jsx)("p",{className:"title",children:"V\u0103n b\u1ea3n quy\u1ebft \u0111\u1ecbnh"})]}):null,D&&null!==D&&void 0!==D&&D.length?(0,G.jsx)("div",{style:{marginTop:"10px",padding:"0 22px"},className:"box-file",children:(0,G.jsxs)("table",{children:[(0,G.jsx)("thead",{children:(0,G.jsxs)("tr",{children:[(0,G.jsx)("th",{style:{width:"5%"},children:"STT"}),(0,G.jsx)("th",{style:{width:"30%"},children:"T\xean h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)("th",{style:{width:"30%"},children:"File \u0111\xednh k\xe8m"}),(0,G.jsx)("th",{style:{width:"25%"},children:"Ng\xe0y c\u1eadp nh\u1eadt"}),v?null:(0,G.jsx)("th",{style:{width:"15%",textAlign:"center"},children:"Thao t\xe1c"})]})}),D.map(((i,n)=>{var e,a;return(0,G.jsxs)("tbody",{children:[(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:n+1}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.TenFile)}),(0,G.jsx)("td",{children:(0,G.jsx)("div",{className:"group-file",children:i.FileDinhKem[0]?(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileDinhKem[0].FileUrl,target:"_blank",children:(null===(e=i.FileDinhKem[0])||void 0===e?void 0:e.name)||(null===(a=i.FileDinhKem[0])||void 0===a?void 0:a.TenFile)})}):null})}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(0,G.jsx)("p",{children:h()().format("DD/MM/YYYY")})}),v?null:(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:(0,G.jsxs)("div",{className:"action-btn",children:[(0,G.jsx)(r.A,{title:"S\u1eeda H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(_.A,{onClick:()=>this.showModalHoSoTaiLieu(n)})}),(0,G.jsx)(r.A,{title:"X\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(B.A,{onClick:()=>this.deteleFile(i,n)})})]})})]}),i.FileDinhKem?i.FileDinhKem.map(((i,n)=>{if(n>0)return(0,G.jsx)("tr",{children:(0,G.jsx)("td",{children:(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileUrl,target:"_blank",children:i.name||i.TenFile})})})})})):null]})}))]})}):"",v?(0,G.jsx)("div",{style:{padding:" 0 22px"},children:g?(0,G.jsxs)("p",{className:"title",children:["Quy\u1ebft \u0111\u1ecbnh l\u1ea7n 2: ",null===n||void 0===n?void 0:n.KetQuaGiaiQuyetLan2]}):(0,G.jsxs)("p",{className:"title",children:["Ph\xe2n t\xedch k\u1ebft qu\u1ea3:"," ",this.handleRenderPhanTichKetQua(null===n||void 0===n?void 0:n.PhanTichKetQua)]})}):null,v?null:(0,G.jsxs)("div",{style:{padding:" 0 22px"},children:[(0,G.jsx)(oi,{label:(0,G.jsx)("p",{className:"title",children:"Ph\xe2n t\xedch k\u1ebft qu\u1ea3"}),className:"ant-form-title__left",name:"PhanTichKetQua",children:8===m?(0,G.jsxs)(ai.Ay.Group,{children:[(0,G.jsx)(ai.Ay,{value:1,children:"T\u1ed1 c\xe1o \u0111\xfang"}),(0,G.jsx)(ai.Ay,{value:2,children:"T\u1ed1 c\xe1o c\xf3 \u0111\xfang c\xf3 sai"}),(0,G.jsx)(ai.Ay,{value:3,children:"T\u1ed1 c\xe1o sai"})]}):(0,G.jsxs)(ai.Ay.Group,{children:[(0,G.jsx)(ai.Ay,{value:1,children:"Khi\u1ebfu n\u1ea1i \u0111\xfang"}),(0,G.jsx)(ai.Ay,{value:2,children:"Khi\u1ebfu n\u1ea1i 1 ph\u1ea7n"}),(0,G.jsx)(ai.Ay,{value:3,children:"Khi\u1ebfu n\u1ea1i sai"})]})}),g?(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(oi,{label:(0,G.jsx)("p",{className:"title",children:"Quy\u1ebft \u0111\u1ecbnh l\u1ea7n 2"}),className:"ant-form-title__left",name:"KetQuaGiaiQuyetLan2",children:(0,G.jsxs)(ai.Ay.Group,{children:[(0,G.jsx)(ai.Ay,{value:1,children:"C\xf4ng nh\u1eadn quy\u1ebft \u0111\u1ecbnh l\u1ea7n 1"}),(0,G.jsx)(ai.Ay,{value:2,children:"H\u1ee7y, s\u1eeda quy\u1ebft \u0111\u1ecbnh l\u1ea7n 1"})]})})}):null]}),(0,G.jsx)("div",{className:"line-break"}),(0,G.jsxs)("div",{style:{padding:" 0 22px"},children:[(0,G.jsx)("p",{className:"title",children:"N\u1ed9i dung quy\u1ebft \u0111\u1ecbnh gi\u1ea3i quy\u1ebft v\xe0 ph\xe2n c\xf4ng thi h\xe0nh quy\u1ebft \u0111\u1ecbnh"}),(0,G.jsx)(ti.A,{items:f,value:j,onChange:i=>this.setState({currentKey:i})})]}),(0,G.jsx)(X.A,{visible:this.state.visibleModalHoSoTaiLieu,dataEdit:this.state.dataModalHoSoTaiLieu,onCancel:this.closeModalHoSoTaiLieu,onCreate:this.submitModalHoSoTaiLieu},this.state.keyModalHoSoTaiLieu)]})})},l)}}const hi=si;var di,ci=e(8038);const ri=v.Ay.div(di||(di=(0,j.A)(["\n  overflow: hidden;\n  .ant-tabs-tab + .ant-tabs-tab {\n    margin: 0 !important;\n  }\n  .wrapper-content {\n    padding: 0 50px;\n  }\n  .line-break {\n    background: #bdbdbd;\n    width: 100%;\n    height: 1px;\n    /* position: absolute; */\n    left: 0;\n    margin-top: 10px;\n  }\n  .group-info {\n    display: grid;\n    grid-template-columns: calc(50% - 5px) calc(50% - 5px);\n    gap: 5px;\n  }\n  .summary-content {\n    margin-top: 5px;\n  }\n\n  .ant-tabs-tab {\n    /* height: 30px; */\n    width: 200px;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .title {\n    margin-top: 10px;\n    font-weight: 600;\n  }\n\n  .ant-tabs-tab-active {\n    background: #0b57d0 !important;\n    padding: 0;\n    display: flex;\n    & > div {\n      color: #fff !important;\n    }\n  }\n  .ant-form-title__left {\n    margin-bottom: 0;\n    .ant-form-item-row {\n      display: grid !important;\n    }\n    .ant-form-item-label {\n      text-align: left;\n    }\n    .ant-form-item-row {\n      width: 100%;\n    }\n    .ant-form-item-control-input-content {\n      width: 100%;\n      /* width: 450px; */\n      input {\n        height: 30px;\n      }\n    }\n  }\n  .tile-content {\n    font-weight: 600;\n    margin-bottom: 10px;\n  }\n  .item-info + .item-info {\n    margin-top: 10px;\n  }\n  .item-info {\n    span {\n      font-weight: 600;\n    }\n  }\n  .box-file {\n    table {\n      border-collapse: collapse;\n    }\n    table th,\n    table td {\n      border: 1px solid #d7d7d7;\n    }\n  }\n  .file-item {\n    padding: 5px;\n  }\n  .file {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    p {\n      font-weight: 600;\n    }\n  }\n\n  .ant-form-title__left {\n    margin-bottom: 0;\n    .ant-form-item-row {\n      display: grid !important;\n    }\n    .ant-form-item-label {\n      text-align: left;\n    }\n    .ant-form-item-row {\n      width: 100%;\n    }\n    .ant-form-item-control-input-content {\n      width: 100%;\n      /* width: 450px; */\n      input {\n        height: 30px;\n      }\n    }\n  }\n\n  .group-title {\n    margin-top: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    .title-content__breadCum {\n      font-size: 14px;\n      font-weight: 600;\n    }\n    button {\n      width: 80px !important;\n      height: 25px !important;\n    }\n  }\n  .wrapper-user {\n    margin-top: 10px;\n    .title {\n      display: grid;\n      grid-template-columns: 45.5% auto;\n      /* justify-content: space-between; */\n      p {\n        font-size: 13px;\n      }\n    }\n  }\n  .groups-user {\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    .wrapper-select {\n      display: grid;\n      grid-template-columns: 450px 450px auto;\n      gap: 30px;\n      align-items: center;\n    }\n  }\n  .btn-delete {\n    justify-self: end;\n    justify-items: end;\n    button {\n      width: 80px;\n      height: 25px;\n    }\n  }\n\n  .file-wrapper {\n    margin-top: 30px;\n    .file-wrapper__top {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      p {\n        font-size: 13px;\n        font-weight: bold;\n      }\n    }\n    .file-wrapper__content {\n      table {\n        margin-top: 10px;\n        width: 100%;\n        border-collapse: collapse;\n        thead th {\n          border: 1px solid #797979;\n        }\n        tbody td {\n          border: 1px solid #797979;\n        }\n      }\n    }\n  }\n  .info-wrapper {\n    margin-top: 30px;\n  }\n  .user-report {\n    margin-top: 30px;\n  }\n  .ant-picker {\n    height: 30px;\n    width: 100%;\n  }\n"])));var ui=e(81349);const{Item:xi}=N.A;class mi extends t.Component{constructor(i){super(i),this.deteleFile=(i,n)=>{const{DanhSachHoSoTaiLieu:e}=this.state;i.FileDinhKemID?w.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a file \u0111\xednh k\xe8m n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{i.TrangThai=0;const n=[...e],a=n.indexOf(i);n.splice(a,1),this.setState({DanhSachHoSoTaiLieu:n,isFalseFile:!1,messErr:""})}}):(e.splice(n,1),this.setState({DanhSachHoSoTaiLieu:e,isFalseFile:!1,messErr:""}))},this.onOk=()=>{const{DanhSachHoSoTaiLieu:i}=this.state,{onCreate:n,dataEdit:e}=this.props;i&&i.length||this.setState({isFile:!0}),this.formRef.current.validateFields().then((e=>{const a={DanhSachHoSoTaiLieu:i,...e,NgayCapNhat:(0,H.Yq)(null===e||void 0===e?void 0:e.NgayCapNhat)};this.props.XuLyDonID&&(a.XuLyDonID=this.props.XuLyDonID);for(const i in a)a[i]||delete a[i];n(a)})).catch((i=>console.log("errr")))},this.showModalHoSoTaiLieu=i=>{if(i||0===i){const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=e+1;this.setState({keyModalHoSoTaiLieu:a,visibleModalHoSoTaiLieu:!0,dataModalHoSoTaiLieu:{...n[i],index:i}})}else{const{DanhSachHoSoTaiLieu:i,keyModalHoSoTaiLieu:n}=this.state,e=n+1;this.setState({keyModalHoSoTaiLieu:e,visibleModalHoSoTaiLieu:!0})}},this.closeModalHoSoTaiLieu=i=>{this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:{}})},this.closeModalTrinhDuyet=()=>{this.setState({visibleModalTrinhDuyet:!1})},this.deleteHoSoTaiLieu=i=>{w.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state;n.splice(i,1),c.Ay.destroy(),c.Ay.success("X\xf3a th\xe0nh c\xf4ng")}})},this.submitModalHoSoTaiLieu=i=>{const{index:n}=i;if(n||0===n){const{DanhSachHoSoTaiLieu:e}=this.state,a=[...e];a.splice(n,1,i),this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("C\u1eadp nh\u1eadt h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}else{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=[...n];a.push(i),this.setState({visibleModalHoSoTaiLieu:!1,DanhSachHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("Th\xeam m\u1edbi h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}},this.state={DanhSachHoSoTaiLieu:[],dataModalHoSoTaiLieu:{},keyModalHoSoTaiLieu:0,visibleModalHoSoTaiLieu:!1,keyModalTrinhDuyet:0,visibleModalTrinhDuyet:!1,fileView:{},fileKey:0,loading:!1,isFile:!1},this.formRef=t.createRef()}componentDidMount(){const{dataEdit:i}=this.props;this.formRef.current&&i&&(this.formRef&&this.formRef.current.setFieldsValue({...i,NgayCapNhat:i.NgayCapNhat?h()(i.NgayCapNhat):h()()}),this.setState({DanhSachHoSoTaiLieu:i.DanhSachHoSoTaiLieu?i.DanhSachHoSoTaiLieu:[]}))}render(){var i;const{dataEdit:n,title:e,visible:a,onCreate:t,fileKey:l,onCancel:o,DanhSachTenFile:s,DanhSachHuongXuLy:d,DanhSachCanBoXuLy:c}=this.props,{ListFileDinhKem:x,loading:m,isFile:g,DanhSachHoSoTaiLieu:p,visibleModalTrinhDuyet:y}=this.state,T=null!==(i=this.props.dataEdit)&&void 0!==i&&i.isViewDetails?this.props.dataEdit.isViewDetails:null;return(0,G.jsx)(u.aF,{title:"C\u1eadp nh\u1eadt b\u01b0\u1edbc x\xe1c minh",visible:a,className:"center-modal__footer",footer:T?(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>o(),children:"\u0110\xf3ng"})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(I.A,{type:"primary",onClick:()=>this.onOk(),children:[(0,G.jsx)(K.A,{})," L\u01b0u"]}),(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>o(),children:"H\u1ee7y"})]}),width:800,onCancel:()=>o(),children:(0,G.jsx)(li.A,{children:(0,G.jsxs)(N.A,{ref:this.formRef,name:"FormCapNhatBuocXacMinh",children:[(0,G.jsx)(xi,{name:"BuocXacMinhID",hidden:!0,children:(0,G.jsx)(L.A,{hidden:!0})}),(0,G.jsx)(xi,{name:"OrderBy",hidden:!0,children:(0,G.jsx)(L.A,{hidden:!0})}),(0,G.jsx)(xi,{name:"TheoDoiXuLyID",hidden:!0,children:(0,G.jsx)(L.A,{hidden:!0})}),(0,G.jsx)(xi,{label:"B\u01b0\u1edbc x\xe1c minh ",name:"TenBuoc",className:"ant-form-title__left",children:(0,G.jsx)(L.A,{})}),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(xi,{label:"N\u1ed9i dung ",name:"GhiChu",className:"ant-form-title__left",children:(0,G.jsx)(ui.A,{})}),(0,G.jsx)(xi,{label:"Ng\xe0y c\u1eadp nh\u1eadt",name:"NgayCapNhat",className:"ant-form-title__left",children:(0,G.jsx)(u.lr,{style:{width:"150px"},placeholder:"",format:"DD/MM/YYYY"})}),(0,G.jsxs)("div",{className:"file",children:[(0,G.jsx)("p",{children:"H\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)(I.A,{type:"primary",loading:m,onClick:()=>this.showModalHoSoTaiLieu(),children:"Th\xeam h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"})]})]}),p&&null!==p&&void 0!==p&&p.length?(0,G.jsx)("div",{style:{marginTop:"10px"},className:"box-file",children:(0,G.jsxs)("table",{children:[(0,G.jsx)("thead",{children:(0,G.jsxs)("tr",{children:[(0,G.jsx)("th",{style:{width:"5%"},children:"STT"}),(0,G.jsx)("th",{style:{width:"30%"},children:"T\xean h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)("th",{style:{width:"30%"},children:"File \u0111\xednh k\xe8m"}),(0,G.jsx)("th",{style:{width:"25%"},children:"Ng\xe0y c\u1eadp nh\u1eadt"}),T?null:(0,G.jsx)("th",{style:{width:"15%",textAlign:"center"},children:"Thao t\xe1c"})]})}),p.map(((i,n)=>{var e,a;return(0,G.jsxs)("tbody",{children:[(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:n+1}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.TenFile)}),(0,G.jsx)("td",{children:(0,G.jsx)("div",{className:"group-file",children:i.FileDinhKem[0]?(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileDinhKem[0].FileUrl,target:"_blank",children:(null===(e=i.FileDinhKem[0])||void 0===e?void 0:e.name)||(null===(a=i.FileDinhKem[0])||void 0===a?void 0:a.TenFile)})}):null})}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(0,G.jsx)("p",{children:h()().format("DD/MM/YYYY")})}),T?null:(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:(0,G.jsxs)("div",{className:"action-btn",children:[(0,G.jsx)(r.A,{title:"S\u1eeda H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(_.A,{onClick:()=>this.showModalHoSoTaiLieu(n)})}),(0,G.jsx)(r.A,{title:"X\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(B.A,{onClick:()=>this.deteleFile(i,n)})})]})})]}),i.FileDinhKem?i.FileDinhKem.map(((i,n)=>{if(n>0)return(0,G.jsx)("tr",{children:(0,G.jsx)("td",{children:(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileUrl,target:"_blank",children:i.name||i.TenFile})})})})})):null]})}))]})}):"",(0,G.jsx)(X.A,{visible:this.state.visibleModalHoSoTaiLieu,dataEdit:this.state.dataModalHoSoTaiLieu,onCancel:this.closeModalHoSoTaiLieu,onCreate:this.submitModalHoSoTaiLieu},this.state.keyModalHoSoTaiLieu)]})})},l)}}const gi=mi,{Item:pi}=N.A,yi=i=>{var n;const[e,a]=(0,t.useState)(1),[l,o]=(0,t.useState)([]),[s,d]=(0,t.useState)([]),[r,x]=(0,t.useState)([]),[m,g]=(0,t.useState)(!1),[p,y]=(0,t.useState)(0),[T,D]=(0,t.useState)({}),[S,j]=(0,t.useState)({}),{DanhSachCanBo:v}=i;(0,t.useEffect)((()=>{const{dataEdit:n}=i;n&&j(n)}),[]),(0,t.useEffect)((()=>{var i,n,e,a;(S&&S.BuocXacMinh&&o(S.BuocXacMinh),S&&null!==(i=S.GiaoXacMinh)&&void 0!==i&&i.ToXacMinh)&&d(null===(e=S.GiaoXacMinh)||void 0===e?void 0:e.ToXacMinh);S&&null!==(n=S.GiaoXacMinh)&&void 0!==n&&n.DanhSachHoSoTaiLieu&&x(null===(a=S.GiaoXacMinh)||void 0===a?void 0:a.DanhSachHoSoTaiLieu)}),[S]);const f=i=>{D(i),g(!0),y((i=>i+1))},C=()=>{g(!1)},L=()=>{D({}),g(!0),y((i=>i+1))},A=n=>{const{dataEdit:e}=i,{NhomKN:a}=e;var t,o,d,c;return 1===n?(0,G.jsx)(G.Fragment,{children:(0,G.jsx)("div",{className:"wrapper-content",children:(0,G.jsxs)("div",{className:"wrapper-content__top",children:[(0,G.jsxs)("div",{className:"content__top__title",children:[(0,G.jsxs)("p",{className:"title",children:["S\u1ed1 \u0111\u01a1n th\u01b0: ",null===e||void 0===e?void 0:e.SoDonThu]}),(0,G.jsx)("p",{className:"title",children:"Th\xf4ng tin \u0111\u1ed1i t\u01b0\u1ee3ng khi\u1ebfu n\u1ea1i, t\u1ed1 c\xe1o, PAKN:"}),(0,G.jsx)("div",{className:"content__top__info",children:(0,G.jsx)("div",{className:"info",children:(null===a||void 0===a?void 0:a.DanhSachDoiTuongKN)&&(null===a||void 0===a||null===(t=a.DanhSachDoiTuongKN)||void 0===t?void 0:t.map(((i,n)=>(0,G.jsxs)(G.Fragment,{children:[n>0?(0,G.jsxs)("p",{className:"title",style:{fontStyle:"italic"},children:["Ng\u01b0\u1eddi \u0111\u1ea1i di\u1ec7n ",n+1]}):"",(0,G.jsxs)("p",{children:["Ch\u1ee7 \u0111\u01a1n/\u0111\u1ea1i di\u1ec7n : ",null===i||void 0===i?void 0:i.HoTen]}),(0,G.jsxs)("p",{children:["\u0110\u1ecba ch\u1ec9 : ",null===i||void 0===i?void 0:i.DiaChiCT]}),(0,G.jsxs)("p",{children:["CCCD : ",null===i||void 0===i?void 0:i.CMND]})]}))))})})]}),(0,G.jsx)("div",{className:"line-break"}),(0,G.jsxs)("div",{className:"wrap-title",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"5px 0"},children:[(0,G.jsx)("p",{className:"title",style:{marginTop:0},children:"Quy tr\xecnh x\xe1c minh:"}),(0,G.jsx)(I.A,{onClick:L,children:"Th\xeam b\u01b0\u1edbc x\xe1c minh"})]}),(0,G.jsx)("div",{className:"box-file",style:{width:"100%"},children:(0,G.jsxs)("table",{children:[(0,G.jsxs)("thead",{children:[(0,G.jsx)("th",{style:{width:"10%"},children:"B\u01b0\u1edbc"}),(0,G.jsx)("th",{style:{width:"40%"},children:"Tr\xecnh t\u1ef1 th\u1ee7 t\u1ee5c gi\u1ea3i quy\u1ebft"}),(0,G.jsx)("th",{style:{width:"15%"},children:" Ng\xe0y c\u1eadp nh\u1eadt"}),(0,G.jsx)("th",{style:{width:"15%"},children:"C\xe1n b\u1ed9 c\u1eadp nh\u1eadt"}),(0,G.jsx)("th",{style:{width:"10%"},children:"Tr\u1ea1ng th\xe1i"}),(0,G.jsx)("th",{style:{width:"10%",textAlign:"center"},children:"Thao t\xe1c"})]}),(0,G.jsx)("tbody",{children:l&&l.map((i=>(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{style:{textAlign:"center"},children:null===i||void 0===i?void 0:i.OrderBy}),(0,G.jsx)("td",{children:null===i||void 0===i?void 0:i.TenBuoc}),(0,G.jsx)("td",{children:null!==i&&void 0!==i&&i.NgayCapNhat?h()(i.NgayCapNhat).format("DD/MM/YYYY"):""}),(0,G.jsx)("td",{children:null===i||void 0===i?void 0:i.TenCanBo}),(0,G.jsx)("td",{children:null!==i&&void 0!==i&&i.TenTrangThai?null===i||void 0===i?void 0:i.TenTrangThai:"Ch\u01b0a c\u1eadp nh\u1eadt"}),(0,G.jsx)("td",{style:{textAlign:"center"},children:(0,G.jsx)(_.A,{onClick:()=>f(i)})})]})))})]})})]})})}):2===n?(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)("div",{className:"wrapper-content",children:[(0,G.jsxs)("div",{className:"wrapper-content__table",children:[(0,G.jsxs)("div",{className:"table_left",children:[(0,G.jsx)("p",{className:"title",children:"Th\xf4ng tin \u0111o\xe0n/t\u1ed5 x\xe1c minh:"}),(0,G.jsx)("div",{className:"box-file",children:(0,G.jsxs)("table",{children:[(0,G.jsxs)("thead",{children:[(0,G.jsx)("th",{style:{width:"10%"},children:"STT"}),(0,G.jsx)("th",{style:{width:"70%"},children:"T\xean c\xe1n b\u1ed9"}),(0,G.jsx)("th",{style:{width:"20%"},children:"Vai tr\xf2"})]}),(0,G.jsx)("tbody",{children:s&&s.map(((i,n)=>{var e;return(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{style:{textAlign:"center"},children:n+1}),(0,G.jsx)("td",{children:i.CanBoID?null===(e=v.find((n=>n.CanBoID===i.CanBoID)))||void 0===e?void 0:e.TenCanBo:""}),(0,G.jsx)("td",{children:1===(null===i||void 0===i?void 0:i.VaiTro)?"Ph\u1ee5 tr\xe1ch":2===(null===i||void 0===i?void 0:i.VaiTro)?"Ph\u1ed1i h\u1ee3p":3===(null===i||void 0===i?void 0:i.VaiTro)?"Theo d\xf5i":""})]})}))})]})}),(0,G.jsxs)("p",{className:"title",children:["H\u1ea1n gi\u1ea3i quy\u1ebft:"," ",null!==e&&void 0!==e&&null!==(o=e.GiaoXacMinh)&&void 0!==o&&o.HanGiaiQuyet?h()(null===e||void 0===e||null===(d=e.GiaoXacMinh)||void 0===d?void 0:d.HanGiaiQuyet).format("DD/MM/YYYY"):""]})]}),(0,G.jsxs)("div",{className:"table_right",children:[(0,G.jsx)("p",{className:"title",children:"H\u1ed3 s\u01a1, t\xe0i li\u1ec7u:"}),(0,G.jsx)("div",{className:"box-file",children:(0,G.jsxs)("table",{children:[(0,G.jsxs)("thead",{children:[(0,G.jsx)("th",{style:{width:"10%"},children:"STT"}),(0,G.jsx)("th",{style:{width:"60%"},children:"T\xean h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)("th",{style:{width:"15%"},children:"File \u0111\xednh k\xe8m"}),(0,G.jsx)("th",{style:{width:"15%"},children:"Ng\xe0y c\u1eadp nh\u1eadt"})]}),(0,G.jsx)("tbody",{children:r.map(((i,n)=>(0,G.jsxs)("tbody",{children:[(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:n+1}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.TenFile)}),(0,G.jsx)("td",{children:(0,G.jsx)("div",{className:"group-file",children:i.FileDinhKem[0]?(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileDinhKem[0].FileUrl,target:"_blank",children:i.FileDinhKem[0].name||i.FileDinhKem[0].TenFile})}):null})}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(0,G.jsx)("p",{children:h()().format("DD/MM/YYYY")})})]}),i.FileDinhKem?i.FileDinhKem.map(((i,n)=>{if(n>0)return(0,G.jsx)("tr",{children:(0,G.jsx)("td",{children:(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileUrl,target:"_blank",children:i.name})})})})})):null]})))})]})}),(0,G.jsxs)("p",{className:"title",children:["Ghi ch\xfa: ",null===e||void 0===e||null===(c=e.GiaoXacMinh)||void 0===c?void 0:c.GhiChu]})]})]}),(0,G.jsx)("div",{className:"line-break"}),(0,G.jsx)("p",{className:"title",children:"Quy tr\xecnh x\xe1c minh:"}),(0,G.jsx)("div",{className:"box-file",children:(0,G.jsxs)("table",{children:[(0,G.jsxs)("thead",{children:[(0,G.jsx)("th",{style:{width:"10%"},children:"B\u01b0\u1edbc"}),(0,G.jsx)("th",{style:{width:"40%"},children:"Tr\xecnh t\u1ef1 th\u1ee7 t\u1ee5c gi\u1ea3i quy\u1ebft"}),(0,G.jsx)("th",{style:{width:"15%"},children:"Ng\xe0y c\u1eadp nh\u1eadt"}),(0,G.jsx)("th",{style:{width:"15%"},children:"C\xe1n b\u1ed9 c\u1eadp nh\u1eadt"}),(0,G.jsx)("th",{style:{width:"10%"},children:"Tr\u1ea1ng th\xe1i"}),(0,G.jsx)("th",{style:{width:"10%",textAlign:"center"},children:"Thao t\xe1c"})]}),(0,G.jsx)("tbody",{children:l&&l.map((i=>(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{style:{textAlign:"center"},children:null===i||void 0===i?void 0:i.OrderBy}),(0,G.jsx)("td",{children:null===i||void 0===i?void 0:i.TenBuoc}),(0,G.jsx)("td",{children:null!==i&&void 0!==i&&i.NgayCapNhat?h()(i.NgayCapNhat).format("DD/MM/YYYY"):""}),(0,G.jsx)("td",{children:null===i||void 0===i?void 0:i.TenCanBo}),(0,G.jsx)("td",{children:null===i||void 0===i?void 0:i.TenTrangThai}),(0,G.jsx)("td",{style:{textAlign:"center"},children:(0,G.jsx)(_.A,{onClick:()=>f(i)})})]})))})]})})]})}):void 0},{title:M,visible:N,onCreate:w,fileKey:k,onCancel:F,DanhSachTenFile:Q,DanhSachHuongXuLy:X,DanhSachCanBoXuLy:B,DanhSachCoQuan:Y,handleRutDon:E,handleCompleteReport:R}=i,V=null!==(n=i.dataEdit)&&void 0!==n&&n.isViewDetails?i.dataEdit.isViewDetails:null,O=[{key:1,label:"Th\xf4ng tin \u0111\u01a1n th\u01b0",forceRender:!0,children:(0,G.jsx)(G.Fragment,{children:A(1)})},{key:2,label:"Th\xf4ng tin \u0111o\xe0n/t\u1ed5 x\xe1c minh",forceRender:!0,children:(0,G.jsx)(G.Fragment,{children:A(2)})}];return(0,G.jsxs)(u.aF,{title:"X\xe1c minh n\u1ed9i dung \u0111\u01a1n",visible:N,className:"center-modal__footer",footer:V?(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>F(),children:"\u0110\xf3ng"})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(I.A,{type:"primary",onClick:()=>R(),disabled:!l.length,children:[(0,G.jsx)(K.A,{})," Ho\xe0n th\xe0nh"]}),(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>F(),children:"\u0110\xf3ng"})]}),width:1e3,onCancel:()=>F(),children:[(0,G.jsx)(ri,{children:(0,G.jsx)(ti.A,{activeKey:e,items:O,onChange:i=>a(i)})}),(0,G.jsx)(gi,{visible:m,dataEdit:T,onCancel:C,onCreate:n=>{const{XuLyDonID:e}=i;n.XuLyDonID=e;const a={FileType:b.LoaiFileDinhKem.FileBuocXacMinh},t=[];n.DanhSachHoSoTaiLieu&&(0,H.Yj)(n.DanhSachHoSoTaiLieu,t,a,ni.A),Promise.all(t).then((i=>{ni.A.CapNhatQuyetDinhGiaoXacMinh(n).then((i=>{i.data.Status>0?(c.Ay.destroy(),c.Ay.success(i.data.Message),ni.A.ChiTietXacMinhNoiDungDon({XuLyDonID:e}).then((i=>{i.data.Status>0&&(C(),j(i.data.Data))}))):(c.Ay.destroy(),c.Ay.warning(i.data.Message))})).catch((i=>{c.Ay.destroy(),c.Ay.warning(i.toString)}))}))}},p)]},k)};var Ti;const Di=[{key:1,value:"Tr\u01b0\u1edfng \u0111o\xe0n/t\u1ed5 tr\u01b0\u1edfng",visible:!0},{key:2,value:"Ph\xf3 tr\u01b0\u1edfng \u0111o\xe0n/t\u1ed5 ph\xf3",visible:!0},{key:3,value:"Th\xe0nh vi\xean",visible:!0}],{Item:Si}=(null===(Ti=(0,H.b5)("user"))||void 0===Ti||Ti.CoQuanID,N.A);class ji extends t.Component{constructor(i){super(i),this.deteleFile=(i,n)=>{const{DanhSachHoSoTaiLieu:e}=this.state;i.FileDinhKemID?w.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a file \u0111\xednh k\xe8m n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{i.TrangThai=0;const n=[...e],a=n.indexOf(i);n.splice(a,1),this.setState({DanhSachHoSoTaiLieu:n,isFalseFile:!1,messErr:""})}}):(e.splice(n,1),this.setState({DanhSachHoSoTaiLieu:e,isFalseFile:!1,messErr:""}))},this.onOk=async i=>{const{DanhSachHoSoTaiLieu:n,DanhSachCanBoXacMinh:e}=this.state,{onCreate:a,dataEdit:t,isTLDTGiaoXacMinh:l}=this.props;console.log(l,"isTLDTGiaoXacMinh"),this.formRef.current.validateFields().then((t=>{const o={DanhSachHoSoTaiLieu:n,...t,HanGiaiQuyet:(0,H.Yq)(null===t||void 0===t?void 0:t.HanGiaiQuyet)};1===i&&(o.ToXacMinh=e),this.props.XuLyDonID&&(o.XuLyDonID=this.props.XuLyDonID);const s={...o};for(const i in s)s[i]||delete s[i];if(l||1!==i)a(s,i);else{var h,d;const n=null===(h=s.ToXacMinh)||void 0===h?void 0:h.find((i=>1===(null===i||void 0===i?void 0:i.VaiTro))),e=null===(d=s.ToXacMinh)||void 0===d?void 0:d.find((i=>null===i||void 0===i?void 0:i.CanBoID));n&&e?a(s,i):(c.Ay.destroy(),c.Ay.warning("Th\xf4ng tin \u0111o\xe0n/t\u1ed5 x\xe1c minh \xedt nh\u1ea5t ph\u1ea3i c\xf3 m\u1ed9t c\xe1n b\u1ed9 v\u1edbi vai tr\xf2 Tr\u01b0\u1edfng \u0111o\xe0n/t\u1ed5 tr\u01b0\u1edfng"))}}))},this.showModalHoSoTaiLieu=i=>{if(i||0===i){const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=e+1;this.setState({keyModalHoSoTaiLieu:a,visibleModalHoSoTaiLieu:!0,dataModalHoSoTaiLieu:{...n[i],index:i}})}else{const{DanhSachHoSoTaiLieu:i,keyModalHoSoTaiLieu:n}=this.state,e=n+1;this.setState({keyModalHoSoTaiLieu:e,visibleModalHoSoTaiLieu:!0})}},this.closeModalHoSoTaiLieu=i=>{this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:{}})},this.deleteHoSoTaiLieu=i=>{w.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state;n.splice(i,1),c.Ay.destroy(),c.Ay.success("X\xf3a th\xe0nh c\xf4ng")}})},this.submitModalHoSoTaiLieu=i=>{const{index:n}=i;if(n||0===n){const{DanhSachHoSoTaiLieu:e}=this.state,a=[...e];a.splice(n,1,i),this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("C\u1eadp nh\u1eadt h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}else{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=[...n];a.push(i),this.setState({visibleModalHoSoTaiLieu:!1,DanhSachHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("Th\xeam m\u1edbi h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}},this.handleAddCanBoXacMinh=async()=>{var i;const{DanhSachCanBoXacMinh:n}=this.state,{DanhSachTruongPhong:e,DanhSachCoQuan:a}=this.props,t=[...n],l=n.find((i=>1===i.VaiTro)),o=n.find((i=>2===i.VaiTro)),s=null===(i=(0,H.b5)("user"))||void 0===i?void 0:i.CoQuanID,h=[],d=[],c=[],r=[],u=await this.GetNguoiDungByCoQuanID(s);n.forEach((i=>{i.CanBoID&&r.push(i.CoQuanID)})),n.forEach((i=>{i.CanBoID&&c.push(i.CanBoID)})),u.forEach((i=>{c.includes(i.CanBoID)||h.push(i)})),e.forEach((i=>{c.includes(i.CanBoID)||d.push(i)})),l&&o?t.push({DanhSachVaiTro:Di.filter((i=>1!==i.key&&2!==i.key)),DanhSachCanBoGQ:h,DanhSachCanBo:u,DanhSachCoQuan:a,CoQuanID:s}):l?t.push({DanhSachVaiTro:Di.filter((i=>1!==i.key)),DanhSachCanBoGQ:h,DanhSachCanBo:u,DanhSachCoQuan:a,CoQuanID:s}):o?t.push({DanhSachVaiTro:Di.filter((i=>2!==i.key)),DanhSachCanBoGQ:h,DanhSachCanBo:u,DanhSachCoQuan:a,CoQuanID:s}):t.push({DanhSachVaiTro:Di,DanhSachCanBoGQ:h,DanhSachCanBo:u,DanhSachCoQuan:a,CoQuanID:s}),this.setState({DanhSachCanBoXacMinh:t})},this.GetNguoiDungByCoQuanID=async i=>{let n;return await ni.A.GetNguoiDungByCoQuanID({CoQuanID:i||null}).then((i=>{i.data.Status>0&&(n=i.data.Data)})),n},this.changedCanBoXacMinh=(i,n,e)=>{if(n){const{DanhSachCanBoXacMinh:a}=this.state;let t=[...a];if("VaiTro"===n){t[i][n]=e;const a=t.find((i=>2===(null===i||void 0===i?void 0:i.VaiTro))),l=t.find((i=>1===(null===i||void 0===i?void 0:i.VaiTro)));if(l&&a){t.filter((i=>2!==i.VaiTro&&1!==i.VaiTro)).forEach(((i,n)=>{t[t.indexOf(i)].DanhSachVaiTro=Di.filter((i=>2!==i.key&&1!==i.key))}))}else if(l){t.filter((i=>1!==i.VaiTro)).forEach(((i,n)=>{t[t.indexOf(i)].DanhSachVaiTro=Di.filter((i=>1!==i.key))}))}else if(a){t.filter((i=>2!==i.VaiTro)).forEach(((i,n)=>{t[t.indexOf(i)].DanhSachVaiTro=Di.filter((i=>2!==i.key))}))}}else{if("CoQuanID"===n)return t[i][n]=e,ni.A.GetNguoiDungByCoQuanID({CoQuanID:e||null}).then((n=>{if(n.data.Status>0){const e=[],a=[];t.forEach((i=>{i.CanBoID&&a.push(i.CanBoID)})),n.data.Data.forEach((i=>{a.includes(i.CanBoID)||e.push(i)})),t[i].CanBoID=null,t[i].DanhSachCanBoGQ=e,this.setState({DanhSachCanBoXacMinh:t})}})),!0;if("CanBoID"===n){t[i].CanBoID=e;const n=t.filter(((n,e)=>i!==e)),a=t.filter((i=>i.CanBoID)).map((i=>({CanBoID:i.CanBoID})));n.forEach((i=>{const n=a.filter((n=>n.CanBoID!==i.CanBoID)),e=[];n.forEach((i=>e.push(i.CanBoID))),i.DanhSachCanBo&&(i.DanhSachCanBoGQ=i.DanhSachCanBo.filter((i=>!e.includes(i.CanBoID))))}))}}this.setState({DanhSachCanBoXacMinh:t})}},this.deleteCanBoXacMinh=(i,n)=>{const{DanhSachCanBoXacMinh:e}=this.state,a=[...e];if(1===n.VaiTro){const i=a.filter((i=>1!==i.VaiTro));i.forEach(((i,n)=>{const e=a[a.indexOf(i)],t=[...e.DanhSachVaiTro];t.unshift(Di.find((i=>1===i.key))),e.DanhSachVaiTro=t}))}else if(2===n.VaiTro){const i=a.filter((i=>2!==i.VaiTro));i.forEach(((i,n)=>{const e=a[a.indexOf(i)],t=[...e.DanhSachVaiTro];t.splice(1,0,Di.find((i=>2===i.key))),e.DanhSachVaiTro=t}))}const t=null===n||void 0===n?void 0:n.CanBoID,l=null===n||void 0===n?void 0:n.CoQuanID,o=a.filter(((n,e)=>i!==e&&n.CoQuanID===l));t&&o.forEach(((i,e)=>{i.DanhSachCanBoGQ.push({...n.DanhSachCanBo.find((i=>i.CanBoID===t))})})),a.splice(i,1),this.setState({DanhSachCanBoXacMinh:a})},this.state={DanhSachHoSoTaiLieu:[],dataModalHoSoTaiLieu:{},keyModalHoSoTaiLieu:0,visibleModalHoSoTaiLieu:!1,DanhSachCanBoXacMinh:[],DanhSachCanBoSelected:[],fileView:{},fileKey:0,loading:!1,QuyetDinh:1,isFile:!1,DanhSachCanBoGQ:[]},this.formRef=t.createRef()}componentDidMount(){const{dataEdit:i}=this.props;i&&i.TrangThaiPheDuyet&&(this.formRef&&this.formRef.current.setFieldsValue({...i,HanXuLy:null!==i&&void 0!==i&&i.HanXuLy?h()(i.HanXuLy):null}),this.setState({DanhSachHoSoTaiLieu:i.DanhSachHoSoTaiLieu?i.DanhSachHoSoTaiLieu:[]})),this.handleAddCanBoXacMinh()}render(){var i;const{dataEdit:n,visible:e,fileKey:a,onCancel:t,DanhSachTruongPhong:l,loading:o,SuDungQuyTrinhGQPhucTap:s}=this.props,{DanhSachHoSoTaiLieu:d,DanhSachCanBoXacMinh:c}=this.state,x=null!==(i=this.props.dataEdit)&&void 0!==i&&i.isViewDetails?this.props.dataEdit.isViewDetails:null,m=null===n||void 0===n?void 0:n.type;return(0,G.jsx)(u.aF,{title:s?"Giao x\xe1c minh":"C\u1eadp nh\u1eadt quy\u1ebft \u0111\u1ecbnh th\xe0nh l\u1eadp t\u1ed5/\u0111o\xe0n x\xe1c minh",visible:e,className:"center-modal__footer",footer:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(I.A,{type:"primary",onClick:()=>this.onOk(m),loading:o,children:[(0,G.jsx)(K.A,{})," L\u01b0u"]}),(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>t(),loading:o,children:"H\u1ee7y"})]}),width:1200,onCancel:()=>t(),children:(0,G.jsx)(li.A,{children:(0,G.jsxs)(N.A,{ref:this.formRef,children:[1===m?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("p",{className:"title",children:["Th\xf4ng tin \u0111o\xe0n/t\u1ed5 x\xe1c minh",(0,G.jsx)("span",{style:{color:"red",marginLeft:"5px"},children:"(*)"})]}),(0,G.jsxs)(k.A,{gutter:[10,10],children:[(0,G.jsx)(F.A,{span:7,className:"center-middle",children:(0,G.jsx)("p",{children:"T\xean c\u01a1 quan"})}),(0,G.jsx)(F.A,{span:7,className:"center-middle",children:(0,G.jsx)("p",{children:"T\xean c\xe1n b\u1ed9"})}),(0,G.jsx)(F.A,{span:7,className:"center-middle",children:(0,G.jsx)("p",{children:"Vai tr\xf2"})}),(0,G.jsx)(F.A,{span:3,children:(0,G.jsx)("div",{className:"btns-end center-middle",children:(0,G.jsx)(I.A,{type:"primary",onClick:this.handleAddCanBoXacMinh,children:"Th\xeam"})})}),c&&c.map(((i,n)=>{var e,a,t;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(F.A,{span:7,className:"center-middle ",children:(0,G.jsx)(S.Ay,{style:{width:"100%"},onChange:i=>this.changedCanBoXacMinh(n,"CoQuanID",i),value:i.CoQuanID,children:(null===i||void 0===i?void 0:i.DanhSachCoQuan)&&(null===i||void 0===i||null===(e=i.DanhSachCoQuan)||void 0===e?void 0:e.map((i=>(0,G.jsx)(S.c$,{value:i.CoQuanID,children:i.TenCoQuan}))))})}),(0,G.jsx)(F.A,{span:7,className:"center-middle select-canbo",children:(0,G.jsx)(S.Ay,{style:{width:"100%"},onChange:i=>this.changedCanBoXacMinh(n,"CanBoID",i),value:null===i||void 0===i?void 0:i.CanBoID,children:(null===i||void 0===i?void 0:i.DanhSachCanBoGQ)&&(null===i||void 0===i||null===(a=i.DanhSachCanBoGQ)||void 0===a?void 0:a.map((i=>(0,G.jsx)(S.c$,{value:null===i||void 0===i?void 0:i.CanBoID,children:null===i||void 0===i?void 0:i.TenCanBo}))))})}),(0,G.jsx)(F.A,{span:7,className:"center-middle select-vaitro",children:(0,G.jsx)(S.Ay,{style:{width:"100%"},onChange:i=>this.changedCanBoXacMinh(n,"VaiTro",i),value:i.VaiTro,children:null===i||void 0===i||null===(t=i.DanhSachVaiTro)||void 0===t?void 0:t.map((i=>(0,G.jsx)(S.c$,{value:i.key,children:i.value})))})}),(0,G.jsx)(F.A,{span:3,children:(0,G.jsx)("div",{className:"btns-end",children:(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>this.deleteCanBoXacMinh(n,i),children:"X\xf3a"})})})]})}))]}),(0,G.jsxs)(k.A,{gutter:[10,10],children:[(0,G.jsx)(F.A,{lg:8,children:(0,G.jsx)(Si,{label:"H\u1ea1n gi\u1ea3i quy\u1ebft",name:"HanGiaiQuyet",className:"ant-form-title__left",children:(0,G.jsx)(u.lr,{placeholder:"",format:"DD/MM/YYYY"})})}),(0,G.jsx)(F.A,{lg:16,children:(0,G.jsx)(Si,{label:"Ghi ch\xfa",name:"GhiChu",className:"ant-form-title__left",children:(0,G.jsx)(L.A,{})})})]})]}):2===m?(0,G.jsx)(G.Fragment,{children:(0,G.jsxs)(k.A,{gutter:[10,10],children:[(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(Si,{label:"Giao cho",rules:[b.REQUIRED],name:"TruongPhongID",className:"ant-form-title__left",children:(0,G.jsx)(S.Ay,{children:l&&l.map((i=>(0,G.jsx)(S.c$,{value:i.CanBoID,children:i.TenCanBo})))})})}),(0,G.jsx)(F.A,{md:12,span:24,children:(0,G.jsx)(Si,{label:"Ng\xe0y h\u1ebft h\u1ea1n",name:"HanGiaiQuyet",rules:[b.REQUIRED],className:"ant-form-title__left",children:(0,G.jsx)(u.lr,{placeholder:"",format:"DD/MM/YYYY"})})})]})}):null,(0,G.jsxs)("div",{className:"file",children:[(0,G.jsx)("p",{children:"H\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)(I.A,{type:"primary",onClick:()=>this.showModalHoSoTaiLieu(),children:"Th\xeam h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"})]}),d&&null!==d&&void 0!==d&&d.length?(0,G.jsx)("div",{style:{marginTop:"10px"},className:"box-file",children:(0,G.jsxs)("table",{children:[(0,G.jsx)("thead",{children:(0,G.jsxs)("tr",{children:[(0,G.jsx)("th",{style:{width:"5%"},children:"STT"}),(0,G.jsx)("th",{style:{width:"30%"},children:"T\xean h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)("th",{style:{width:"30%"},children:"File \u0111\xednh k\xe8m"}),(0,G.jsx)("th",{style:{width:"25%"},children:"Ng\xe0y c\u1eadp nh\u1eadt"}),x?null:(0,G.jsx)("th",{style:{width:"15%",textAlign:"center"},children:"Thao t\xe1c"})]})}),d.map(((i,n)=>{var e,a;return(0,G.jsxs)("tbody",{children:[(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:n+1}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.TenFile)}),(0,G.jsx)("td",{children:(0,G.jsx)("div",{className:"group-file",children:i.FileDinhKem[0]?(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileDinhKem[0].FileUrl,target:"_blank",children:(null===(e=i.FileDinhKem[0])||void 0===e?void 0:e.name)||(null===(a=i.FileDinhKem[0])||void 0===a?void 0:a.TenFile)})}):null})}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(0,G.jsx)("p",{children:h()().format("DD/MM/YYYY")})}),x?null:(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:(0,G.jsxs)("div",{className:"action-btn",children:[(0,G.jsx)(r.A,{title:"S\u1eeda H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(_.A,{onClick:()=>this.showModalHoSoTaiLieu(n)})}),(0,G.jsx)(r.A,{title:"X\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(B.A,{onClick:()=>this.deteleFile(i,n)})})]})})]}),i.FileDinhKem?i.FileDinhKem.map(((i,n)=>{if(n>0)return(0,G.jsx)("tr",{children:(0,G.jsx)("td",{children:(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileUrl,target:"_blank",children:i.name||i.TenFile})})})})})):null]})}))]})}):"",(0,G.jsx)(X.A,{visible:this.state.visibleModalHoSoTaiLieu,dataEdit:this.state.dataModalHoSoTaiLieu,onCancel:this.closeModalHoSoTaiLieu,onCreate:this.submitModalHoSoTaiLieu},this.state.keyModalHoSoTaiLieu)]})})},a)}}const vi=ji,{Item:fi}=N.A;class Ci extends t.Component{constructor(i){super(i),this.deteleFile=(i,n)=>{const{DanhSachHoSoTaiLieu:e}=this.state;i.FileDinhKemID?w.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a file \u0111\xednh k\xe8m n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{i.TrangThai=0;const n=[...e],a=n.indexOf(i);n.splice(a,1),this.setState({DanhSachHoSoTaiLieu:n,isFalseFile:!1,messErr:""})}}):(e.splice(n,1),this.setState({DanhSachHoSoTaiLieu:e,isFalseFile:!1,messErr:""}))},this.onOk=async()=>{const{DanhSachHoSoTaiLieu:i}=this.state,{onCreate:n,dataEdit:e}=this.props;this.formRef.current.validateFields().then((e=>{const a={DanhSachHoSoTaiLieu:i,...e,HanGiaiQuyet:(0,H.Yq)(null===e||void 0===e?void 0:e.HanGiaiQuyet)};this.props.XuLyDonID&&(a.XuLyDonID=this.props.XuLyDonID);for(const i in a)a[i]||delete a[i];n(a)})).catch((i=>console.log("errr",i)))},this.showModalHoSoTaiLieu=i=>{if(i||0===i){const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=e+1;this.setState({keyModalHoSoTaiLieu:a,visibleModalHoSoTaiLieu:!0,dataModalHoSoTaiLieu:{...n[i],index:i}})}else{const{DanhSachHoSoTaiLieu:i,keyModalHoSoTaiLieu:n}=this.state,e=n+1;this.setState({keyModalHoSoTaiLieu:e,visibleModalHoSoTaiLieu:!0})}},this.closeModalHoSoTaiLieu=i=>{this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:{}})},this.deleteHoSoTaiLieu=i=>{w.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state;n.splice(i,1),c.Ay.destroy(),c.Ay.success("X\xf3a th\xe0nh c\xf4ng")}})},this.submitModalHoSoTaiLieu=i=>{const{index:n}=i;if(n||0===n){const{DanhSachHoSoTaiLieu:e}=this.state,a=[...e];a.splice(n,1,i),this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("C\u1eadp nh\u1eadt h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}else{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=[...n];a.push(i),this.setState({visibleModalHoSoTaiLieu:!1,DanhSachHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("Th\xeam m\u1edbi h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}},this.state={DanhSachHoSoTaiLieu:[],dataModalHoSoTaiLieu:{},keyModalHoSoTaiLieu:0,visibleModalHoSoTaiLieu:!1,fileView:{},fileKey:0,loading:!1,QuyetDinh:1,isFile:!1},this.formRef=t.createRef()}componentDidMount(){const{dataEdit:i}=this.props;i&&i.TrangThaiPheDuyet&&(this.formRef&&this.formRef.current.setFieldsValue({...i,HanXuLy:null!==i&&void 0!==i&&i.HanXuLy?h()(i.HanXuLy):null}),this.setState({DanhSachHoSoTaiLieu:i.DanhSachHoSoTaiLieu?i.DanhSachHoSoTaiLieu:[]}))}render(){var i;const{dataEdit:n,title:e,visible:a,onCreate:t,fileKey:l,onCancel:o,DanhSachTenFile:s,DanhSachHuongXuLy:d,DanhSachCanBoXuLy:c}=this.props,{ListFileDinhKem:x,loading:m,isFile:g,DanhSachHoSoTaiLieu:p}=this.state,y=null!==(i=this.props.dataEdit)&&void 0!==i&&i.isViewDetails?this.props.dataEdit.isViewDetails:null;return(0,G.jsx)(u.aF,{title:"Duy\u1ec7t b\xe1o c\xe1o x\xe1c minh",visible:a,className:"center-modal__footer",footer:y?(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>o(),children:"\u0110\xf3ng"})}):(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(I.A,{type:"primary",onClick:()=>this.onOk(),loading:m,children:[(0,G.jsx)(K.A,{})," L\u01b0u"]}),(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>o(),loading:m,children:"H\u1ee7y"})]}),width:800,onCancel:()=>o(),children:(0,G.jsx)(li.A,{children:(0,G.jsxs)(N.A,{ref:this.formRef,children:[y?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("p",{className:"item-info",children:["H\u01b0\u1edbng x\u1eed l\xfd :"," ",(0,G.jsx)("span",{style:{fontWeight:600},children:null===n||void 0===n?void 0:n.HuongXuLy})]}),(0,G.jsxs)("p",{className:"item-info",children:["N\u1ed9i dung x\u1eed l\xfd :"," ",(0,G.jsx)("span",{style:{fontWeight:600},children:null===n||void 0===n?void 0:n.NoiDungHuongDan})]}),(0,G.jsx)("p",{className:"item-info",children:"H\u1ed3 s\u01a1, t\xe0i li\u1ec7u"})]}):null,y?null:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(fi,{label:"Quy\u1ebft \u0111\u1ecbnh",name:"TrangThaiPheDuyet",rules:[b.REQUIRED],initialValue:1,children:(0,G.jsxs)(ai.Ay.Group,{onChange:i=>this.setState({QuyetDinh:i.target.value}),children:[(0,G.jsx)(ai.Ay,{value:1,children:"Ph\xea duy\u1ec7t"}),(0,G.jsx)(ai.Ay,{value:2,children:"Y\xeau c\u1ea7u th\u1ea9m tra x\xe1c minh l\u1ea1i"})]})}),2===this.state.QuyetDinh?(0,G.jsx)(fi,{label:"H\u1ea1n x\u1eed l\xfd",name:"HanGiaiQuyet",rules:[b.REQUIRED],className:"ant-form-title__left",children:(0,G.jsx)(u.lr,{placeholder:"",format:"DD/MM/YYYY"})}):null,(0,G.jsx)(fi,{label:"N\u1ed9i dung ph\xea duy\u1ec7t",name:"NoiDung",className:"ant-form-title__left",children:(0,G.jsx)(ui.A,{})}),(0,G.jsxs)("div",{className:"file",children:[(0,G.jsx)("p",{children:"H\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)(I.A,{type:"primary",onClick:()=>this.showModalHoSoTaiLieu(),children:"Th\xeam h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"})]})]}),p&&null!==p&&void 0!==p&&p.length?(0,G.jsx)("div",{style:{marginTop:"10px"},className:"box-file",children:(0,G.jsxs)("table",{children:[(0,G.jsx)("thead",{children:(0,G.jsxs)("tr",{children:[(0,G.jsx)("th",{style:{width:"5%"},children:"STT"}),(0,G.jsx)("th",{style:{width:"30%"},children:"T\xean h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)("th",{style:{width:"30%"},children:"File \u0111\xednh k\xe8m"}),(0,G.jsx)("th",{style:{width:"25%"},children:"Ng\xe0y c\u1eadp nh\u1eadt"}),y?null:(0,G.jsx)("th",{style:{width:"15%",textAlign:"center"},children:"Thao t\xe1c"})]})}),p.map(((i,n)=>{var e,a;return(0,G.jsxs)("tbody",{children:[(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:n+1}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.TenFile)}),(0,G.jsx)("td",{children:(0,G.jsx)("div",{className:"group-file",children:i.FileDinhKem[0]?(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileDinhKem[0].FileUrl,target:"_blank",children:(null===(e=i.FileDinhKem[0])||void 0===e?void 0:e.name)||(null===(a=i.FileDinhKem[0])||void 0===a?void 0:a.TenFile)})}):null})}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(0,G.jsx)("p",{children:h()().format("DD/MM/YYYY")})}),y?null:(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:(0,G.jsxs)("div",{className:"action-btn",children:[(0,G.jsx)(r.A,{title:"S\u1eeda H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(_.A,{onClick:()=>this.showModalHoSoTaiLieu(n)})}),(0,G.jsx)(r.A,{title:"X\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(B.A,{onClick:()=>this.deteleFile(i,n)})})]})})]}),i.FileDinhKem?i.FileDinhKem.map(((i,n)=>{if(n>0)return(0,G.jsx)("tr",{children:(0,G.jsx)("td",{children:(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileUrl,target:"_blank",children:i.name||i.TenFile})})})})})):null]})}))]})}):"",(0,G.jsx)(X.A,{visible:this.state.visibleModalHoSoTaiLieu,dataEdit:this.state.dataModalHoSoTaiLieu,onCancel:this.closeModalHoSoTaiLieu,onCreate:this.submitModalHoSoTaiLieu},this.state.keyModalHoSoTaiLieu)]})})},l)}}const Li=Ci;var bi,Hi=e(86880);null===(bi=(0,H.b5)("user"))||void 0===bi||bi.CoQuanID;const{Item:Ai}=N.A;class Mi extends t.Component{constructor(i){super(i),this.deteleFile=(i,n)=>{const{DanhSachHoSoTaiLieu:e}=this.state;i.FileDinhKemID?w.A.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a file \u0111\xednh k\xe8m n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:()=>{i.TrangThai=0;const n=[...e],a=n.indexOf(i);n.splice(a,1),this.setState({DanhSachHoSoTaiLieu:n,isFalseFile:!1,messErr:""})}}):(e.splice(n,1),this.setState({DanhSachHoSoTaiLieu:e,isFalseFile:!1,messErr:""}))},this.onOk=async()=>{const{DanhSachHoSoTaiLieu:i}=this.state,{onCreate:n}=this.props;this.formRef.current.validateFields().then((e=>{const a={DanhSachHoSoTaiLieu:i,...e,HanGiaiQuyetMoi:(0,H.Yq)(e.HanGiaiQuyetMoi)};this.props.XuLyDonID&&(a.XuLyDonID=this.props.XuLyDonID);const t={...a};for(const i in t)t[i]||delete t[i];n(t)}))},this.showModalHoSoTaiLieu=i=>{if(i||0===i){const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=e+1;this.setState({keyModalHoSoTaiLieu:a,visibleModalHoSoTaiLieu:!0,dataModalHoSoTaiLieu:{...n[i],index:i}})}else{const{DanhSachHoSoTaiLieu:i,keyModalHoSoTaiLieu:n}=this.state,e=n+1;this.setState({keyModalHoSoTaiLieu:e,visibleModalHoSoTaiLieu:!0})}},this.closeModalHoSoTaiLieu=i=>{this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:{}})},this.deleteHoSoTaiLieu=i=>{w.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state;n.splice(i,1),c.Ay.destroy(),c.Ay.success("X\xf3a th\xe0nh c\xf4ng")}})},this.submitModalHoSoTaiLieu=i=>{const{index:n}=i;if(n||0===n){const{DanhSachHoSoTaiLieu:e}=this.state,a=[...e];a.splice(n,1,i),this.setState({visibleModalHoSoTaiLieu:!1,dataModalHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("C\u1eadp nh\u1eadt h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}else{const{DanhSachHoSoTaiLieu:n,keyModalHoSoTaiLieu:e}=this.state,a=[...n];a.push(i),this.setState({visibleModalHoSoTaiLieu:!1,DanhSachHoSoTaiLieu:a}),c.Ay.destroy(),c.Ay.success("Th\xeam m\u1edbi h\u1ed3 s\u01a1 t\xe0i li\u1ec7u th\xe0nh c\xf4ng")}},this.state={DanhSachHoSoTaiLieu:[],dataModalHoSoTaiLieu:{},keyModalHoSoTaiLieu:0,visibleModalHoSoTaiLieu:!1,DanhSachCanBoXacMinh:[],DanhSachCanBoSelected:[],fileView:{},fileKey:0,loading:!1,QuyetDinh:1,isFile:!1,DanhSachCanBoGQ:[]},this.formRef=t.createRef()}componentDidMount(){const{dataEdit:i}=this.props;i&&i.TrangThaiPheDuyet&&(this.formRef&&this.formRef.current.setFieldsValue({...i,HanGiaiQuyetMoi:null!==i&&void 0!==i&&i.HanGiaiQuyetMoi?h()(i.HanGiaiQuyetMoi):null}),this.setState({DanhSachHoSoTaiLieu:i.DanhSachHoSoTaiLieu?i.DanhSachHoSoTaiLieu:[]}))}render(){const{dataEdit:i,title:n,visible:e,onCreate:a,fileKey:t,onCancel:l,loading:o}=this.props,{ListFileDinhKem:s,isFile:d,DanhSachHoSoTaiLieu:c,DanhSachCanBoXacMinh:x}=this.state;return(0,G.jsx)(u.aF,{title:"Gia h\u1ea1n x\xe1c minh",visible:e,className:"center-modal__footer",footer:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(I.A,{type:"primary",onClick:()=>this.onOk(),loading:o,children:[(0,G.jsx)(K.A,{})," L\u01b0u"]}),(0,G.jsx)(I.A,{className:"btn-danger",onClick:()=>l(),loading:o,children:"H\u1ee7y"})]}),width:800,onCancel:()=>l(),children:(0,G.jsx)(li.A,{children:(0,G.jsxs)(N.A,{ref:this.formRef,children:[(0,G.jsxs)(k.A,{gutter:[10,10],children:[(0,G.jsx)(F.A,{lg:24,children:(0,G.jsx)(Ai,{label:"H\u1ea1n gi\u1ea3i quy\u1ebft",name:"HanGiaiQuyetMoi",className:"ant-form-title__left",rules:[b.REQUIRED],children:(0,G.jsx)(u.lr,{placeholder:"",format:"DD/MM/YYYY"})})}),(0,G.jsx)(F.A,{lg:24,children:(0,G.jsx)(Ai,{label:"L\xfd do \u0111i\u1ec1u ch\u1ec9nh",name:"LyDoDieuChinh",className:"ant-form-title__left",rules:[b.REQUIRED],children:(0,G.jsx)(L.A.TextArea,{})})})]}),(0,G.jsxs)("div",{className:"file",children:[(0,G.jsx)("p",{children:"H\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)(I.A,{type:"primary",onClick:()=>this.showModalHoSoTaiLieu(),children:"Th\xeam h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"})]}),c&&null!==c&&void 0!==c&&c.length?(0,G.jsx)("div",{style:{marginTop:"10px"},className:"box-file",children:(0,G.jsxs)("table",{children:[(0,G.jsx)("thead",{children:(0,G.jsxs)("tr",{children:[(0,G.jsx)("th",{style:{width:"5%"},children:"STT"}),(0,G.jsx)("th",{style:{width:"30%"},children:"T\xean h\u1ed3 s\u01a1, t\xe0i li\u1ec7u"}),(0,G.jsx)("th",{style:{width:"30%"},children:"File \u0111\xednh k\xe8m"}),(0,G.jsx)("th",{style:{width:"25%"},children:"Ng\xe0y c\u1eadp nh\u1eadt"}),(0,G.jsx)("th",{style:{width:"15%",textAlign:"center"},children:"Thao t\xe1c"})]})}),c.map(((i,n)=>{var e,a;return(0,G.jsxs)("tbody",{children:[(0,G.jsxs)("tr",{children:[(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:n+1}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(null===i||void 0===i?void 0:i.name)||(null===i||void 0===i?void 0:i.TenFile)}),(0,G.jsx)("td",{children:(0,G.jsx)("div",{className:"group-file",children:i.FileDinhKem[0]?(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileDinhKem[0].FileUrl,target:"_blank",children:(null===(e=i.FileDinhKem[0])||void 0===e?void 0:e.name)||(null===(a=i.FileDinhKem[0])||void 0===a?void 0:a.TenFile)})}):null})}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,children:(0,G.jsx)("p",{children:h()().format("DD/MM/YYYY")})}),(0,G.jsx)("td",{rowspan:i.FileDinhKem.length,style:{textAlign:"center"},children:(0,G.jsxs)("div",{className:"action-btn",children:[(0,G.jsx)(r.A,{title:"S\u1eeda H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(_.A,{onClick:()=>this.showModalHoSoTaiLieu(n)})}),(0,G.jsx)(r.A,{title:"X\xf3a H\u1ed3 s\u01a1, t\xe0i li\u1ec7u",children:(0,G.jsx)(B.A,{onClick:()=>this.deteleFile(i,n)})})]})})]}),i.FileDinhKem?i.FileDinhKem.map(((i,n)=>{if(n>0)return(0,G.jsx)("tr",{children:(0,G.jsx)("td",{children:(0,G.jsx)("p",{className:"file-item",children:(0,G.jsx)("a",{href:i.FileUrl,target:"_blank",children:i.name||i.TenFile})})})})})):null]})}))]})}):"",(0,G.jsx)(X.A,{visible:this.state.visibleModalHoSoTaiLieu,dataEdit:this.state.dataModalHoSoTaiLieu,onCancel:this.closeModalHoSoTaiLieu,onCreate:this.submitModalHoSoTaiLieu},this.state.keyModalHoSoTaiLieu)]})})},t)}}const Ni=Mi;const wi=(0,l.Ng)((function(i){return{...i.GiaoXacMinh}}),J.A)((i=>{var n,e,a,l,s;document.title="Gi\u1ea3i quy\u1ebft \u0111\u01a1n";const{filterData:d,setFilterData:x}=i,[j,v]=(0,t.useState)({}),[f,C]=(0,t.useState)(!1),[M,N]=(0,t.useState)(""),[k,F]=(0,A.D)(),[I,Q]=(0,t.useState)([]),[X,K]=(0,t.useState)(!1),[_,B]=(0,t.useState)(0),[Y,E]=(0,t.useState)({loading:!1,loadingModalGiaoXacMinh:!1,loadingModalDuyetXacMinh:!1,loadingModalTrinhXacMinh:!1}),[R,W]=(0,t.useState)(!1),[z,$]=(0,t.useState)({}),[J,ei]=(0,t.useState)(0),[ai,ti]=(0,t.useState)(!1),[li,oi]=(0,t.useState)({}),[si,di]=(0,t.useState)(0),[ri,ui]=(0,t.useState)(!1),[xi,mi]=(0,t.useState)({}),[gi,pi]=(0,t.useState)(0),[Ti,Di]=(0,t.useState)(!1),[Si,ji]=(0,t.useState)({}),[fi,Ci]=(0,t.useState)(0),[bi,Ai]=(0,t.useState)(!1),[Mi,wi]=(0,t.useState)({}),[ki,Fi]=(0,t.useState)(0),[Ii,Qi]=(0,t.useState)(!1),[Xi,Ki]=(0,t.useState)({}),[_i,Bi]=(0,t.useState)(0),[Gi,Yi]=(0,t.useState)(!1),[Ei,Ri]=(0,t.useState)(0),[Vi,Oi]=(0,t.useState)({}),[Pi,qi]=(0,t.useState)(!1),[Ui,Wi]=(0,t.useState)(0),[zi,$i]=(0,t.useState)({}),[Ji,Zi]=(0,t.useState)([]),nn=(0,H.b5)("user",{}),en=null===nn||void 0===nn?void 0:nn.RoleID,an=null===(n=JSON.parse(null===(e=localStorage)||void 0===e?void 0:e.getItem("user")))||void 0===n?void 0:n.SuDungQuyTrinhGQPhucTap,tn=null===nn||void 0===nn?void 0:nn.CapID;(0,t.useEffect)((()=>{(0,H._Y)(d),i.getInitData(d)}),[d]),(0,t.useEffect)((()=>{i.getData()}),[]);const ln=(i,n,e)=>{let a=d,t={pagination:i,filters:n,sorter:e},l=(0,H.D5)(a,null,t);x(l),Q([])},on=(i,n)=>{let e=d,a={value:i,property:n},t=(0,H.D5)(e,a,null);x(t),Q([])},sn=()=>{v({}),C(!1)},hn=()=>{Di(!1)},dn=i=>{En===b.LoaiQuyTrinhDonThu.PhongThuocSo?ni.A.GetNguoiDungByCoQuanID({CoQuanID:Kn}).then((n=>{n.data.Status>0?(Zi(n.data.Data),Di(!0),ji({type:i}),Ci((i=>i+1))):(c.Ay.destroy(),c.Ay.warning(n.data.Message))})).catch((i=>{c.Ay.destroy(),c.Ay.warning(i.toString())})):(Di(!0),ji({type:i}),Ci((i=>i+1)))},cn=()=>{qi(!1)},rn=(i,n)=>{i.stopPropagation(),un(n)},un=i=>{const n=[...I];n.includes(i.key)?Q(n.filter((n=>n!==i.key))):Q([...n,i.key])},xn=()=>{const{Search:i}=L.A;return(0,G.jsxs)(y.A,{isCenter:!0,children:[(0,G.jsxs)(S.Ay,{style:{width:"250px"},value:null===d||void 0===d?void 0:d.TrangThaiDonThu,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i \u0111\u01a1n th\u01b0 \u0111\u01b0\u1ee3c giao",allowClear:!0,onChange:i=>on(i,"TrangThaiDonThu"),children:[(0,G.jsx)(Option,{value:"1",children:"\u0110\u01a1n \u0111\u01b0\u1ee3c giao ph\u1ee5 tr\xe1ch x\xe1c minh"}),(0,G.jsx)(Option,{value:"2",children:"\u0110\u01a1n \u0111\u01b0\u1ee3c giao ph\u1ed1i h\u1ee3p x\xe1c minh"})]}),(0,G.jsx)(S.Ay,{style:{width:"200px"},value:null===d||void 0===d?void 0:d.TrangThai,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i \u0111\u01a1n th\u01b0",allowClear:!0,onChange:i=>on(i,"TrangThai"),children:an?3===tn?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Option,{value:"0",children:"Ch\u01b0a giao x\xe1c minh"}),(0,G.jsx)(Option,{value:"2",children:"\u0110ang x\xe1c minh"}),(0,G.jsx)(Option,{value:"4",children:"Ch\u01b0a duy\u1ec7t b\xe1o c\xe1o x\xe1c minh"}),(0,G.jsx)(Option,{value:"5",children:"\u0110\xe3 duy\u1ec7t b\xe1o c\xe1o x\xe1c minh"})]}):3===en?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Option,{value:"1",children:"Ch\u01b0a x\xe1c minh"}),(0,G.jsx)(Option,{value:"2",children:"\u0110ang x\xe1c minh"}),(0,G.jsx)(Option,{value:"5",children:"\u0110\xe3 tr\xecnh b\xe1o c\xe1o x\xe1c minh"})]}):2===en?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Option,{value:"0",children:"Ch\u01b0a giao x\xe1c minh"}),(0,G.jsx)(Option,{value:"2",children:"\u0110ang x\xe1c minh"}),(0,G.jsx)(Option,{value:"4",children:"Ch\u01b0a duy\u1ec7t b\xe1o c\xe1o x\xe1c minh"}),(0,G.jsx)(Option,{value:"5",children:"\u0110\xe3 tr\xecnh b\xe1o c\xe1o x\xe1c minh"})]}):1===en?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Option,{value:"0",children:"Ch\u01b0a giao x\xe1c minh"}),(0,G.jsx)(Option,{value:"2",children:"\u0110ang x\xe1c minh"}),(0,G.jsx)(Option,{value:"4",children:"Ch\u01b0a duy\u1ec7t b\xe1o c\xe1o x\xe1c minh"}),(0,G.jsx)(Option,{value:"5",children:"\u0110\xe3 tr\xecnh b\xe1o c\xe1o x\xe1c minh"}),(0,G.jsx)(Option,{value:"6",children:"Ch\u01b0a ban h\xe0nh quy\u1ebft \u0111\u1ecbnh gi\u1ea3i quy\u1ebft"}),(0,G.jsx)(Option,{value:"7",children:"\u0110\xe3 ban h\xe0nh quy\u1ebft \u0111\u1ecbnh gi\u1ea3i quy\u1ebft"})]}):void 0:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Option,{value:"0",children:"Ch\u01b0a giao x\xe1c minh"}),(0,G.jsx)(Option,{value:"1",children:"Ch\u01b0a x\xe1c minh"}),(0,G.jsx)(Option,{value:"2",children:"\u0110ang x\xe1c minh"}),(0,G.jsx)(Option,{value:"4",children:"Ch\u01b0a duy\u1ec7t b\xe1o c\xe1o x\xe1c minh"}),(0,G.jsx)(Option,{value:"5",children:"\u0110\xe3 tr\xecnh b\xe1o c\xe1o x\xe1c minh"}),(0,G.jsx)(Option,{value:"6",children:"Ch\u01b0a ban h\xe0nh quy\u1ebft \u0111\u1ecbnh gi\u1ea3i quy\u1ebft"}),(0,G.jsx)(Option,{value:"7",children:"\u0110\xe3 ban h\xe0nh quy\u1ebft \u0111\u1ecbnh gi\u1ea3i quy\u1ebft"})]})}),(0,G.jsx)(S.Ay,{style:{width:"200px"},value:null===d||void 0===d?void 0:d.LoaiKhieuToID,placeholder:"Ch\u1ecdn lo\u1ea1i khi\u1ebfu t\u1ed1",allowClear:!0,onChange:i=>on(i,"LoaiKhieuToID"),children:Ln?Ln.map((i=>(0,G.jsx)(Option,{value:i.LoaiKhieuToID.toString(),children:i.TenLoaiKhieuTo},i.LoaiKhieuToID))):null}),(0,G.jsx)(P.A,{onFilter:on,filterData:d}),(0,G.jsx)(u.NJ,{allowClear:!0,defaultValue:null===d||void 0===d?void 0:d.Keyword,placeholder:"Nh\u1eadp \u0111\u1ed1i t\u01b0\u1ee3ng KNTC, KNPA ho\u1eb7c n\u1ed9i dung ti\u1ebfp",style:{width:300},className:"search-input",onSearch:i=>on(i,"Keyword")})]})},mn=i=>{Qi(!1)},gn=()=>{ti(!1),i.getInitData(d)},pn=()=>{ui(!1)},{DanhSachGiaoXacMinh:yn,DanhSachHuongXuLy:Tn,TotalRow:Dn,role:Sn,tableLoading:jn,DanhSachCoQuan:vn,DanhSachTruongPhong:fn,DanhSachCanBoGQ:Cn,DanhSachLoaiKhieuTo:Ln,DanhSachCanBo:bn}=i,Hn=d.PageNumber?parseInt(d.PageNumber):1,An=d.PageSize?parseInt(d.PageSize):(0,H.WT)(),Mn=[{title:"S\u1ed1 \u0111\u01a1n th\u01b0",dataIndex:"SoDonThu",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:0===n.TrangThai?"red":""},children:n.SoDonThu})},{title:"Ng\xe0y ti\u1ebfp nh\u1eadn",dataIndex:"NgayTiepStr",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:0===n.TrangThai?"red":""},children:n.NgayTiepNhan?h()(n.NgayTiepNhan).format("DD/MM/YYYY"):null})},{title:"Ngu\u1ed3n \u0111\u01a1n \u0111\u1ebfn",dataIndex:"TenNguonDonDen",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:0===n.TrangThai?"red":""},children:(0,H.rl)(n)})},{title:"Th\xf4ng tin ch\u1ee7 \u0111\u01a1n",dataIndex:"TenChuDon",align:"left",width:"25%",render:(i,n,e)=>(0,G.jsx)("div",{children:null!==n&&void 0!==n&&n.listDoiTuongKN?n.listDoiTuongKN.map((i=>(0,G.jsxs)("div",{children:[(0,G.jsx)("p",{style:{fontWeight:"600",color:0===n.TrangThai?"red":"",textTransform:"capitalize"},children:i.HoTen}),(0,G.jsx)("p",{style:{color:0===n.TrangThai?"red":""},children:i.DiaChiCT})]}))):null})},{title:"N\u1ed9i dung v\u1ee5 vi\u1ec7c",dataIndex:"NoiDungDon",align:"left",width:"30%",render:(i,n,e)=>(0,G.jsx)(r.A,{title:n.NoiDungDon,children:(0,G.jsx)("p",{style:{color:0===n.TrangThai?"red":""},children:(0,H.Mi)(n.NoiDungDon,150)})})},{title:"Lo\u1ea1i khi\u1ebfu t\u1ed1",dataIndex:"TenLoaiKhieuTo",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:0===n.TrangThai?"red":""},children:n.TenLoaiKhieuTo})},{title:"H\u1ea1n x\u1eed l\xfd",dataIndex:"HanXuLy",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:0===n.TrangThai?"red":""},children:n.HanXuLy?h()(n.HanXuLy).format("DD/MM/YYYY"):null})},{title:"H\u01b0\u1edbng x\u1eed l\xfd",dataIndex:"TenHuongGiaiQuyet",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:0===n.TrangThai?"red":""},children:n.TenHuongGiaiQuyet})},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"TrangThai",align:"left",width:"10%",render:(i,n,e)=>(0,G.jsx)("p",{style:{color:0===n.TrangThai?"red":""},children:(0,H.l6)(n,"TenTrangThai")})}],{loading:Nn,loadingModalDuyetXacMinh:wn,loadingModalGiaHanXacMinh:kn,loadingModalGiaoXacMinh:Fn,loadingModalTrinhXacMinh:In}=Y,Qn=null===yn||void 0===yn?void 0:yn.find((i=>i.XuLyDonID===I[0])),Xn=null===Qn||void 0===Qn?void 0:Qn.TrangThai,Kn=null===Qn||void 0===Qn?void 0:Qn.CoQuanID,_n=(!!((null===nn||void 0===nn?void 0:nn.CapHanhChinh)===b.CapHanhChinh.CapPhongThuocXa||(null===nn||void 0===nn?void 0:nn.CapHanhChinh)===b.CapHanhChinh.CapUBNDXa)||(null===yn||void 0===yn||null===(a=yn.find((i=>i.XuLyDonID===I[0])))||void 0===a||a.TrangThaiDuyet),null===(l=JSON.parse(null===(s=localStorage)||void 0===s?void 0:s.getItem("user")))||void 0===l?void 0:l.TrangThaiGiaoXacMinh),Bn=null===Qn||void 0===Qn?void 0:Qn.LoaiKhieuTo1ID,Gn=null===Qn||void 0===Qn?void 0:Qn.CQPhoiHopID,Yn=(null===nn||void 0===nn?void 0:nn.CapHanhChinh)===b.CapHanhChinh.CapPhongThuocHuyen,En=null===Qn||void 0===Qn?void 0:Qn.LoaiQuyTrinh,Rn=null===Qn||void 0===Qn?void 0:Qn.TrangThaiIDMoi,Vn=null===Qn||void 0===Qn?void 0:Qn.CheckTrangThai,On=!(1===I.length),Pn=!(null!==Qn&&void 0!==Qn&&Qn.CoCapNhapDoanToXacMinh&&Qn.TrangThaiIDMoi===b.TrangThaiMoi.ChuaXacMinhLan1),qn=Vn?!(1===I.length&&Rn===b.TrangThaiMoi.ChuaXacMinhLan1||Rn===b.TrangThaiMoi.DaXacMinhLan1):On||1!==Xn&&2!==Xn,Un=(Vn?en===b.RoleID.LanhDao?!(1===I.length&&(Rn===b.TrangThaiMoi.DaCapNhapVBGXM||Rn===b.TrangThaiMoi.GiaoXacMinhLan1)):en!==b.RoleID.LanhDaoPhong||(On||Rn!==b.TrangThaiMoi.GiaoXacMinhLan1):On||0!==Xn||Gn>0)||!!Yn&&(null===Qn||void 0===Qn?void 0:Qn.LoaiQuyTrinh)===b.LoaiQuyTrinhDonThu.BTDHuyen,Wn=Vn?!(1===I.length&&en===b.RoleID.LanhDaoPhong?Rn===b.TrangThaiMoi.TrinhXacMinhLan1:en===b.RoleID.LanhDao&&Rn===b.TrangThaiMoi.DuyetVaTrinhXacMinhLan2):On||4!==Xn,zn=Vn?!(1===I.length&&Rn===b.TrangThaiMoi.DuyetVaTrinhXacMinhLan2):On||2!==Xn,$n=Vn?!(1===I.length&&Rn===b.TrangThaiMoi.DuyetLan3):On||6!==Xn,Jn=Vn?!(1===I.length&&en===b.RoleID.LanhDao?Rn===b.TrangThaiMoi.GiaoXacMinhLan2:Rn===b.TrangThaiMoi.ChuaXacMinhLan1):On||2!==Xn,Zn=Vn?null!==Qn&&void 0!==Qn&&Qn.CoCapNhapDoanToXacMinh?Pn:!(1===I.length&&Rn===b.TrangThaiMoi.GiaoXacMinhLan1):On||0!==Xn||Gn>0,ie=En===b.LoaiQuyTrinhDonThu.BTDHuyen&&b.RoleID.LanhDao!==(null===nn||void 0===nn?void 0:nn.RoleID),ne=En===b.LoaiQuyTrinhDonThu.BTDHuyen&&nn.RoleID===b.RoleID.LanhDao&&nn.CapHanhChinh===b.CapHanhChinh.CapPhongThuocHuyen&&0===nn.ChuTichUBND,ee=Yn&&nn.RoleID===b.RoleID.LanhDao&&((null===Qn||void 0===Qn?void 0:Qn.LoaiQuyTrinh)===b.LoaiQuyTrinhDonThu.BTDHuyen||(null===Qn||void 0===Qn?void 0:Qn.LoaiQuyTrinh)===b.LoaiQuyTrinhDonThu.QuyTrinhNoiBoPhongThuocHuyen)&&!(null!==nn&&void 0!==nn&&nn.BanTiepDan),ae=Yn&&nn.RoleID===b.RoleID.LanhDao&&(null===Qn||void 0===Qn?void 0:Qn.LoaiQuyTrinh)===b.LoaiQuyTrinhDonThu.QuyTrinhNoiBoPhongThuocHuyen&&!(null!==nn&&void 0!==nn&&nn.BanTiepDan);return(0,G.jsxs)(o.A,{children:[(0,G.jsxs)(U.A,{children:[(0,G.jsx)(m.A,{children:"Gi\u1ea3i quy\u1ebft \u0111\u01a1n"}),(0,G.jsxs)(g.A,{children:[(0,G.jsxs)(u.$n,{type:"primary",onClick:()=>{var i;const n=I[0],e=null===yn||void 0===yn||null===(i=yn.find((i=>i.XuLyDonID===n)))||void 0===i?void 0:i.DonThuID;ni.A.ChiTietDonThu2({XuLyDonID:n,DonThuID:e}).then((i=>{i.data.Status>0&&(Oi(i.data.Data),Yi(!0),Ri((i=>i+1)))}))},className:"btn-center",disabled:!(1===I.length),children:[(0,G.jsx)("img",{src:1!==I.length?q.A.Preview:q.A.PreviewWhite,className:"btn-icon__img"}),"Xem chi ti\u1ebft \u0111\u01a1n th\u01b0"]}),(en===b.RoleID.ChuyenVien||!an||en===b.RoleID.LanhDaoPhong&&Yn)&&Sn.edit?(0,G.jsxs)(u.$n,{type:"primary",className:"btn-center",onClick:()=>(()=>{const i=I[0];ni.A.ChiTietXacMinhNoiDungDon({XuLyDonID:i}).then((i=>{i.data.Status>0?(ti(!0),oi(i.data.Data),di((i=>i+1))):(c.Ay.destroy(),c.Ay.warning(i.data.Message))})).catch((i=>{c.Ay.destroy(),c.Ay.warning(i.toString())}))})(),disabled:qn,children:[(0,G.jsx)("img",{src:qn?q.A.Approval:q.A.ApprovalWhite,className:"btn-icon__img"}),"X\xe1c minh"]}):null,(0,G.jsxs)(u.$n,{type:"primary",className:"btn-center",onClick:()=>(()=>{const i=I[0];ni.A.ChiTietXacMinhNoiDungDon({XuLyDonID:i}).then((i=>{i.data.Status>0?($({isViewDetails:!0,...i.data.Data}),W(!0),ei((i=>i+1))):(c.Ay.destroy(),c.Ay.error(i.data.Message))})).catch((i=>{c.Ay.destroy(),c.Ay.error(i.toString())}))})(),disabled:!(1===I.length),children:[(0,G.jsx)("img",{src:1!==I.length?q.A.Preview:q.A.PreviewWhite,className:"btn-icon__img"}),"K\u1ebft qu\u1ea3 x\xe1c minh"]}),2===_n&&Sn.edit||ee?(0,G.jsxs)(u.$n,{className:"btn-center",type:"primary",onClick:()=>dn(1),disabled:Zn,children:[(0,G.jsx)("img",{src:Zn?q.A.Process:q.A.ProcessWhite,className:"btn-icon__img"}),"C\u1eadp nh\u1eadt Q\u0110TL t\u1ed5/\u0111o\xe0n x\xe1c minh"]}):null,(!Yn||nn.BanTiepDan)&&(1===_n&&Sn.edit||ae)?(0,G.jsxs)(u.$n,{className:"btn-center",type:"primary",onClick:()=>dn(2),disabled:Un,children:[(0,G.jsx)("img",{src:Un?q.A.Process:q.A.ProcessWhite,className:"btn-icon__img"}),"Giao x\xe1c minh"]}):null,Sn.edit&&en!==b.RoleID.ChuyenVien?(0,G.jsxs)(u.$n,{className:"btn-center",type:"primary",onClick:()=>{return i=2,qi(!0),$i({type:i}),void Wi((i=>i+1));var i},disabled:Jn,children:[(0,G.jsx)("img",{src:Jn?q.A.Process:q.A.ProcessWhite,className:"btn-icon__img"}),"Gia h\u1ea1n x\xe1c minh"]}):null,en===b.RoleID.ChuyenVien&&an||!Sn.edit?null:(0,G.jsxs)(u.$n,{type:"primary",className:"btn-center",onClick:()=>{ui(!0),pi((i=>i+1))},disabled:Wn||ie,children:[(0,G.jsx)("img",{src:Wn||ie?q.A.Approval:q.A.ApprovalWhite,className:"btn-icon__img"}),"Duy\u1ec7t b\xe1o c\xe1o x\xe1c minh"]}),en===b.RoleID.ChuyenVien&&an&&Sn.edit?(0,G.jsxs)(u.$n,{type:"primary",className:"btn-center",onClick:()=>(Qi(!0),void Bi((i=>i+1))),disabled:zn,children:[(0,G.jsx)("img",{src:zn?q.A.Send:q.A.SendWhite,className:"btn-icon__img"}),an?"Tr\xecnh b\xe1o c\xe1o x\xe1c minh":"C\u1eadp nh\u1eadt b\xe1o c\xe1o x\xe1c minh"]}):null,en===b.RoleID.LanhDao&&3!==tn&&Sn.edit?(0,G.jsxs)(u.$n,{type:"primary",onClick:()=>{N("add"),F(),C(!0)},className:"btn-center",disabled:$n||ne,children:[(0,G.jsx)("img",{src:$n||ne?q.A.Process:q.A.ProcessWhite,className:"btn-icon__img"}),"Ban h\xe0nh Q\u0110 gi\u1ea3i quy\u1ebft"]}):null]})]}),(0,G.jsx)(p.A,{children:(0,G.jsx)(Z,{children:(()=>{const i={selectedRowsKey:I,renderCell:(i,n,e,a)=>(0,G.jsxs)("div",{style:{display:"flex",alignItems:"center"},onClick:i=>rn(i,n),children:[(0,G.jsx)(V.A,{className:"ant-icon__table",onClick:i=>rn(i,n),style:{marginRight:4,fontSize:14,visibility:"hidden"}}),(0,G.jsx)("div",{children:(0,G.jsx)(D.A,{className:"selected__table",checked:I.includes(n.XuLyDonID),onChange:()=>un(n)})})]}),onChange:i=>{Q(i)}},n=null===yn||void 0===yn?void 0:yn.map((i=>({...i,key:null===i||void 0===i?void 0:i.XuLyDonID})));return(0,G.jsxs)(G.Fragment,{children:[xn(),(0,G.jsx)(T.Ay,{rowSelection:i,columns:Mn,loading:jn,dataSource:n,onChange:ln,pagination:{showSizeChanger:!0,showTotal:(i,n)=>"T\u1eeb ".concat(n[0]," \u0111\u1ebfn ").concat(n[1]," tr\xean ").concat(i," k\u1ebft qu\u1ea3"),total:Dn,current:Hn,pageSize:An}})]})})()})}),(0,G.jsx)(hi,{visible:f,dataEdit:j,action:M,loading:Nn,onCreate:n=>{const e=I[0];n.XuLyDonID=e,E((i=>({...i,loading:!0})));const a={FileType:b.LoaiFileDinhKem.FileHoSo},t=[];n.DanhSachHoSoTaiLieu&&(0,H.Yj)(n.DanhSachHoSoTaiLieu,t,a,ni.A),Promise.all(t).then((e=>{ni.A.BanHanhQuyetDinhGiaiQuyet(n).then((n=>{E((i=>({...i,loading:!1}))),n&&n.data&&1===n.data.Status?(E((i=>({...i,loading:!1}))),c.Ay.success(n.data.Message),sn(),i.getInitData(d),Q([])):c.Ay.error("".concat(n&&n.data?n.data.Message:"L\u1ed7i h\u1ec7 th\u1ed1ng"))}))}))},onCancel:sn,dataSource:yn,DanhSachHuongXuLy:Tn,DanhSachCoQuan:vn,ItemLoaiKhieuTo:Bn},k),(0,G.jsx)(Ni,{onCancel:cn,dataEdit:zi,visible:Pi,onCreate:(n,e)=>{E((i=>({...i,loadingModalGiaHanXacMinh:!0})));const a=I[0];n.XuLyDonID=a;const t={FileType:b.LoaiFileDinhKem.FileGiaHanGiaiQuyet},l=[];n.DanhSachHoSoTaiLieu&&(0,H.Yj)(n.DanhSachHoSoTaiLieu,l,t,ni.A),Promise.all(l).then((e=>{ni.A.GiaHanThoiGianXacMinh(n).then((n=>{E((i=>({...i,loadingModalGiaHanXacMinh:!1}))),n.data.Status>0?(c.Ay.destroy(),c.Ay.success(n.data.Message),Q([]),cn(),i.getInitData(d)):(c.Ay.destroy(),c.Ay.warning(n.data.Message))})).catch((i=>{E((i=>({...i,loadingModalGiaHanXacMinh:!1}))),c.Ay.destroy(),c.Ay.warning(i.toString())}))}))},loading:kn},Ui),(0,G.jsx)(ci.A,{onCancel:()=>{W(!1)},dataEdit:z,visible:R},J),(0,G.jsx)(yi,{onCancel:gn,dataEdit:li,visible:ai,onEdit:i=>{},DanhSachCanBo:Cn,XuLyDonID:I[0],handleRutDon:()=>{const i=I[0];ni.A.RutDon({XuLyDonID:i}).then((i=>{i.data.Status>0?(c.Ay.destroy(),c.Ay.success(i.data.Message),gn(),Q([])):(c.Ay.destroy(),c.Ay.warning(i.data.Message))})).catch((i=>{c.Ay.destroy(),c.Ay.warning(i.toString())}))},handleCompleteReport:()=>{const i=I[0];ni.A.TrinhBaoCaoXacMinh({XuLyDonID:i}).then((i=>{i.data.Status>0?(c.Ay.destroy(),c.Ay.success(i.data.Message),gn(),Q([])):(c.Ay.destroy(),c.Ay.warning(i.data.Message))})).catch((i=>{c.Ay.destroy(),c.Ay.warning(i.toString())}))}},si),(0,G.jsx)(Li,{onCancel:pn,dataEdit:xi,visible:ri,onCreate:n=>{const e={FileType:b.LoaiFileDinhKem.FileDBCXM};E((i=>({...i,loadingModalDuyetXacMinh:!0})));const a=I[0];n.XuLyDonID=a,Qn&&null!==Qn&&void 0!==Qn&&Qn.LoaiQuyTrinh&&(n.LoaiQuyTrinh=null===Qn||void 0===Qn?void 0:Qn.LoaiQuyTrinh);const t=[];n.DanhSachHoSoTaiLieu&&(0,H.Yj)(n.DanhSachHoSoTaiLieu,t,e,ni.A),Promise.all(t).then((e=>{ni.A.DuyetBaoCaoXacMinh(n).then((n=>{n.data.Status>0?(c.Ay.destroy(),c.Ay.success(n.data.Message),E((i=>({...i,loadingModalDuyetXacMinh:!1}))),pn(),i.getInitData(d),Q([])):(c.Ay.destroy(),c.Ay.warning(n.data.Message))})).catch((i=>{c.Ay.destroy(),c.Ay.warning(i.toString())}))}))},loading:wn},gi),(0,G.jsx)(vi,{DanhSachTruongPhong:En===b.LoaiQuyTrinhDonThu.PhongThuocSo?Ji:fn,DanhSachCanBoGQ:Cn,onCancel:hn,dataEdit:Si,visible:Ti,onCreate:(n,e)=>{const a=I[0];n.XuLyDonID=a;const t={FileType:b.LoaiFileDinhKem.FileCapNhatGiaoXacMinh},l=[];n.DanhSachHoSoTaiLieu&&(0,H.Yj)(n.DanhSachHoSoTaiLieu,l,t,ni.A);let o=ni.A.GiaoXacMinh;Pn||(o=ni.A.CapNhapDoanToXacMinh),Promise.all(l).then((e=>{o(n).then((n=>{n.data.Status>0?(c.Ay.destroy(),c.Ay.success(n.data.Message),hn(),i.getInitData(d),Q([])):(c.Ay.destroy(),c.Ay.warning(n.data.Message))})).catch((i=>{c.Ay.destroy(),c.Ay.warning(i.toString())}))}))},SuDungQuyTrinhGQPhucTap:an,DanhSachCoQuan:vn,loading:Fn,isTLDTGiaoXacMinh:Zn},fi),(0,G.jsx)(Hi.A,{dataEdit:Mi,visible:bi,onCancel:()=>{Ai(!1)}},ki),(0,G.jsx)(ii.A,{visible:Ii,dataEdit:Xi,onCreate:n=>{E((i=>({...i,loadingModalDuyetXacMinh:!0})));const e=I[0];n.XuLyDonID=e;const a={FileType:b.LoaiFileDinhKem.XuLyDon};w.A.confirm({title:"Tr\xecnh b\xe1o c\xe1o x\xe1c minh",content:an?"B\u1ea1n c\xf3 mu\u1ed1n c\u1eadp nh\u1eadt b\xe1o c\xe1o x\xe1c minh n\xe0y kh\xf4ng?":"B\u1ea1n c\xf3 mu\u1ed1n tr\xecnh b\xe1o c\xe1o x\xe1c minh n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{const t=[];n.DanhSachHoSoTaiLieu&&(0,H.Yj)(n.DanhSachHoSoTaiLieu,t,a,ni.A),Promise.all(t).then((n=>{ni.A.TrinhBaoCaoXacMinh({XuLyDonID:e}).then((n=>{n.data.Status>0?(c.Ay.destroy(),c.Ay.success(n.data.Message),i.getInitData(d),E((i=>({...i,loadingModalDuyetXacMinh:!0}))),mn(),Q([])):(c.Ay.destroy(),c.Ay.error(n.data.Message))})).catch((i=>{c.Ay.destroy(),c.Ay.error(i.toString())}))}))}})},onCancel:mn,SuDungQuyTrinhGQPhucTap:an,loading:In},_i),(0,G.jsx)(O.A,{visible:Gi,dataEdit:Vi,onCancel:()=>{Oi({}),Yi(!1)}},Ei)]})}));const ki=(0,l.Ng)((function(i){return{}}))((i=>{const[n,e]=(0,t.useState)(d.parse(i.location.search)),a=(0,l.d4)((i=>(0,H.vh)(i.Auth.role,"giai-quyet-don-thu"))),s=(0,H.b5)("user",{}),h=(null===s||void 0===s||s.CapID,null===s||void 0===s?void 0:s.ChuTichUBND),c=null===s||void 0===s?void 0:s.RoleID,r=h&&1===c;return(0,G.jsx)(o.A,{children:r?(0,G.jsx)(z,{role:a,filterData:n,setFilterData:e}):(0,G.jsx)(wi,{role:a,filterData:n,setFilterData:e})})}))}}]);