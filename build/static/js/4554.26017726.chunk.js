"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[4554],{74405:(e,a,t)=>{t.d(a,{$:()=>s,A:()=>d});var n,i=t(26418),l=t(57528),r=t(22953),o=t(6535);const c=(e=>(0,r.Ay)(e)(n||(n=(0,l.A)(["\n  &.ant-checkbox-wrapper {\n    font-size: 13px;\n    color: ",";\n\n    .ant-checkbox {\n      top: inherit;\n    }\n\n    .ant-checkbox-checked .ant-checkbox-inner,\n    .ant-checkbox-indeterminate .ant-checkbox-inner {\n      background-color: ",";\n      border-color: ",";\n    }\n\n    .ant-checkbox:hover .ant-checkbox-inner,\n    .ant-checkbox-input:focus + .ant-checkbox-inner {\n      border-color: ",";\n    }\n\n    &:hover {\n      .ant-checkbox-inner {\n        border-color: ",";\n      }\n    }\n  }\n"])),(0,o.palette)("text",1),(0,o.palette)("primary",0),(0,o.palette)("primary",0),(0,o.palette)("primary",0),(0,o.palette)("primary",0)))(i.A),s=i.A.Group,d=c},2637:(e,a,t)=>{t.d(a,{A:()=>c});t(82483);var n,i=t(57528),l=t(22953);t(6535);const r=l.Ay.div(n||(n=(0,i.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 10px 0;\n  gap: 10px;\n  width: 100%;\n"])));var o=t(56723);const c=e=>(0,o.jsx)(r,{className:"wrapper-top",children:e.children})},67466:(e,a,t)=>{t.d(a,{D:()=>i});var n=t(82483);function i(e){const[a,t]=(0,n.useState)(0);return[a,()=>{t(a+1)}]}},74554:(e,a,t)=>{t.r(a),t.d(a,{default:()=>z});var n=t(72741),i=t(93445),l=t(256),r=t(25883),o=t(82483),c=t(82402),s=t(53660),d=t(34045),h=t(81538),u=t(64684),m=t(67353),g=t(53615),y=t(65828),A=t(74405),x=t(18570),p=t(67466),E=t(92378),S=t(97841),b=t(94690),j=t.n(b),k=t(33713),f=t(79948),D=t(26418),v=t(30180),T=t(24028),L=t(56723);const{Item:N,useForm:w}=f.A,C=e=>{const[a,t]=(0,o.useState)(!0),[n]=w(),[i,l]=(0,o.useState)(!0),{dataEdit:r,loading:c,visible:s,action:d,DanhSachLoaiEmail:h}=e;(0,o.useEffect)((()=>{r&&r.EmailID&&(n&&n.setFieldsValue({...r,Active:r.Active?1:0,NgayTao:r.NgayTao?j()(r.NgayTao):null}),l(r.Active))}),[]);return(0,L.jsx)(y.aF,{title:"".concat("edit"===d?"S\u1eeda th\xf4ng tin email":"Th\xeam m\u1edbi th\xf4ng tin email"),width:600,visible:s,onCancel:e.onCancel,footer:[(0,L.jsx)(y.$n,{onClick:e.onCancel,children:"H\u1ee7y"},"back"),(0,L.jsx)(y.$n,{htmlType:"submit",type:"primary",form:"formthamsohethong",loading:c,onClick:async a=>{a.preventDefault();const t=await n.validateFields(),l={...t,Active:i,NgayTao:(0,x.Yq)(t.NgayTao)};(0,x.oy)(l),e.onCreate(l)},children:"L\u01b0u"},"submit")],children:(0,L.jsxs)(f.A,{form:n,name:"formthamsohethong",onChange:async(e,a)=>{const i=await n.getFieldsValue(),{ConfigKey:l,ConfigValue:r}=i;t(!l||!r)},children:["edit"===d?(0,L.jsx)(N,{name:"EmailID",hidden:!0}):"",(0,L.jsx)(N,{label:"Ng\xe0y t\u1ea1o",name:"NgayTao",...k.ITEM_LAYOUT,rules:[k.REQUIRED],children:(0,L.jsx)(v.A,{format:"DD/MM/YYYY"})}),(0,L.jsx)(N,{label:"Lo\u1ea1i Email",name:"LoaiEmailID",...k.ITEM_LAYOUT,rules:[k.REQUIRED],children:(0,L.jsx)(y.l6,{children:h?h.map((e=>(0,L.jsx)(y.c$,{value:e.LoaiEmailID,children:e.TenEmail}))):null})}),(0,L.jsx)(N,{label:"N\u1ed9i dung",name:"NoiDungEmail",...k.ITEM_LAYOUT,children:(0,L.jsx)(T.A,{})}),(0,L.jsx)(N,{label:"S\u1eed d\u1ee5ng",name:"Active",...k.ITEM_LAYOUT,children:(0,L.jsx)(D.A,{checked:i,onChange:e=>l(e.target.checked),children:"S\u1eed d\u1ee5ng"})})]})})};var I=t(21428),M=t(38674),P=t(2782),Y=t(2637);const z=(0,c.Ng)((function(e){return{...e.QuanLyEmail,role:(0,x.vh)(e.Auth.role,"ql-email")}}),r.A)((e=>{document.title="Qu\u1ea3n L\xfd Email";const[a,t]=(0,o.useState)(E.parse(e.location.search)),[r,c]=(0,o.useState)({}),[b,k]=(0,o.useState)(!1),[f,D]=(0,o.useState)(""),[v,T]=(0,p.D)(),[N,w]=(0,o.useState)([]),[z,U]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(0,x._Y)(a),e.getList(a)}),[a]),(0,o.useEffect)((()=>{e.getList(a),e.getInit(a)}),[]);const $=(e,n)=>{let i=a,l={value:e,property:n},r=(0,x.D5)(i,l,null);t(r),w([])},F=()=>{w([]),c({}),k(!1)},K=r=>(0,L.jsxs)("div",{className:"action-btn",children:[R.edit?(0,L.jsx)(l.A,{title:"S\u1eeda",children:(0,L.jsx)(I.A,{onClick:()=>(e=>{const a=e;D("edit"),S.A.ChiTietEmail({EmailID:a}).then((e=>{e.data.Status>0?(c(e.data.Data),T(),k(!0)):(i.Ay.destroy(),i.Ay.error(e.data.Message))})).catch((e=>{i.Ay.destroy(),i.Ay.error(e.toString())}))})(r.EmailID)})}):"",R.delete?(0,L.jsx)(l.A,{title:"X\xf3a",children:(0,L.jsx)(M.A,{onClick:()=>{return l=r.EmailID,void n.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a email n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{U(!0),S.A.XoaEmail({ListID:[l]}).then((n=>{n.data.Status>0?(U(!1),e.getList({...a,PageNumber:Math.ceil((Q-1)/a.PageSize)<a.PageNumber?Math.ceil((Q-1)/a.PageSize):a.PageNumber}),i.Ay.destroy(),i.Ay.success(n.data.Message),t({...a,PageNumber:Math.ceil((Q-1)/a.PageSize)<a.PageNumber?Math.ceil((Q-1)/a.PageSize):a.PageNumber})):(i.Ay.destroy(),i.Ay.error(n.data.Message))})).catch((e=>{i.Ay.destroy(),i.Ay.error(e.toString())}))}});var l}})}):""]}),{DanhSachEmail:O,TotalRow:Q,role:R,DanhSachLoaiEmail:V}=e,_=a.PageNumber?parseInt(a.PageNumber):1,q=a.PageSize?parseInt(a.PageSize):(0,x.WT)(),X=[{title:"STT",width:"5%",align:"center",render:(e,a,t)=>(0,L.jsx)("span",{children:(_-1)*q+(t+1)})},{title:"Lo\u1ea1i Email",align:"left",width:"15%",render:(e,a)=>{var t;return a.LoaiEmailID?null===(t=V.find((e=>e.LoaiEmailID===a.LoaiEmailID)))||void 0===t?void 0:t.TenEmail:null}},{title:"Ng\xe0y t\u1ea1o",align:"left",width:"25%",render:(e,a)=>a.NgayTao?j()(a.NgayTao).format("DD/MM/YYYY"):null},{title:"N\u1ed9i dung email",dataIndex:"NoiDungEmail",align:"left",width:"35%"},{title:"S\u1eed d\u1ee5ng",align:"center",width:"10%",render:(e,a)=>(e=>(0,L.jsx)(A.A,{checked:e.Active}))(a)},{title:"Thao t\xe1c",width:"10%",align:"center",render:(e,a)=>K(a)}];return(0,L.jsxs)(s.A,{children:[(0,L.jsxs)(Y.A,{children:[(0,L.jsx)(d.A,{children:"Qu\u1ea3n L\xfd Email"}),(0,L.jsx)(h.A,{children:R&&R.add?(0,L.jsxs)(y.$n,{type:"primary",onClick:()=>{D("add"),c({}),T(),k(!0)},children:[(0,L.jsx)(P.A,{}),"Th\xeam M\u1edbi"]}):""})]}),(0,L.jsxs)(u.A,{children:[(0,L.jsxs)(m.A,{children:[(0,L.jsx)(y.l6,{style:{width:"200px"},defaultValue:a.LoaiEmailID,placeholder:"Ch\u1ecdn lo\u1ea1i email",allowClear:!0,onChange:e=>$(e,"LoaiEmailID"),children:V?V.map((e=>{var a;return(0,L.jsx)(y.c$,{value:null===(a=e.LoaiEmailID)||void 0===a?void 0:a.toString(),children:e.TenEmail})})):null}),(0,L.jsx)(y.NJ,{defaultValue:a.Keyword,placeholder:"T\xecm ki\u1ebfm theo n\u1ed9i dung",style:{width:300},onSearch:e=>$(e,"Keyword"),allowClear:!0})]}),(0,L.jsx)(g.Ay,{columns:X,dataSource:O,onChange:(e,n,i)=>{let l=a,r={pagination:e,filters:n,sorter:i},o=(0,x.D5)(l,null,r);t(o),w([])},pagination:{showSizeChanger:!0,showTotal:(e,a)=>"T\u1eeb ".concat(a[0]," \u0111\u1ebfn ").concat(a[1]," tr\xean ").concat(e," k\u1ebft qu\u1ea3"),total:Q,current:_,pageSize:q},rowKey:e=>e.EmailID})]}),(0,L.jsx)(C,{visible:b,dataEdit:r,action:f,loading:z,onCreate:t=>{U(!0),"add"===f&&S.A.CapNhatEmail(t).then((t=>{U(!1),t.data.Status>0?(i.Ay.destroy(),i.Ay.success(t.data.Message),F(),e.getList(a)):(U(!1),i.Ay.destroy(),i.Ay.error(t.data.Message))})).catch((e=>{U(!1),i.Ay.destroy(),i.Ay.error(e.toString())})),"edit"===f&&S.A.CapNhatEmail(t).then((t=>{t.data.Status>0?(U(!1),i.Ay.destroy(),i.Ay.success(t.data.Message),F(),e.getList(a)):(U(!1),i.Ay.destroy(),i.Ay.error(t.data.Message))})).catch((e=>{U(!1),i.Ay.destroy(),i.Ay.error(e.toString())}))},onCancel:F,DanhSachLoaiEmail:V},v)]})}))}}]);