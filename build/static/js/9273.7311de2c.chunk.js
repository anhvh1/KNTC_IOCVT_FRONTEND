"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[9273],{18583:(a,e,t)=>{t.r(e),t.d(e,{default:()=>j});var n,l=t(57528),o=t(82483),i=t(53660),s=(t(53615),t(34045)),r=(t(81538),t(64684)),d=t(67353),u=t(46184),h=t(93445),g=(t(54686),t(65828)),c=(t(27302),t(40047)),D=t(82402),y=t(92378),T=t(37735),A=t(82859),p=t(18570),C=t(94690),x=t.n(C),v=t(22953),S=t(25981),f=t(2637),Y=t(56723);const N=v.Ay.div(n||(n=(0,l.A)([""]))),j=a=>{var e;document.title="Qu\u1ea3n l\xfd nh\u1eadp li\u1ec7u";const[t,n]=(0,o.useState)(y.parse(a.location.search)),[l,C]=(0,o.useState)([]),[v,j]=(0,o.useState)(1),{ThongTinBaoCao:w,tableLoading:b}=(0,D.d4)((a=>a.ThongKeNhapLieu)),{DanhSachCoQuan:M}=(0,D.d4)((a=>a.DMCoQuan)),[k,I]=(0,o.useState)(2),[m,Q]=(0,o.useState)({}),[E,L]=(0,o.useState)(!1),[B,q]=(0,o.useState)({}),[F,R]=(0,o.useState)([]),[H,$]=(0,o.useState)([]),[_,P]=(0,o.useState)([]),[K,V]=(0,o.useState)([]),G=(0,D.wA)();(0,o.useEffect)((()=>{const a={...t,DenNgay:t.DenNgay?t.DenNgay:x()().format("YYYY/MM/DD")};n(a),S.A.DanhSachCapBaoCao().then((a=>{a.data.Status>0?C(a.data.Data):(h.Ay.destroy(),h.Ay.warning(a.data.Message))})).catch((a=>{h.Ay.destroy(),h.Ay.warning(a.toString())}))}),[]),(0,o.useEffect)((()=>{G(T.A.getInitData())}),[]),(0,o.useLayoutEffect)((()=>{G(c.A.clearData()),G(c.A.getCoQuan())}),[]),(0,o.useEffect)((()=>{(0,p._Y)(t)}),[t]);const X=(a,e)=>{let l=t,o={value:a,property:e},i=(0,p.D5)(l,o,null);n(i)},z=()=>{G(c.A.getData({...t}))};return(0,Y.jsx)(N,{children:(0,Y.jsxs)(i.A,{children:[(0,Y.jsx)(f.A,{children:(0,Y.jsx)(s.A,{children:"Qu\u1ea3n l\xfd nh\u1eadp li\u1ec7u"})}),(0,Y.jsxs)(r.A,{children:[(0,Y.jsx)(d.A,{Step:v,isLeft:!0,children:1===v?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(g.f7,{showSearch:!0,treeData:M,onChange:a=>X(a,"CoQuanID"),style:{width:400},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Ch\u1ecdn c\u01a1 quan",allowClear:!0,treeDefaultExpandAll:!0,notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",treeNodeFilterProp:"title"}),(0,Y.jsxs)(g.l6,{placeholder:"Tr\u1ea1ng th\xe1i",style:{width:"200px"},onChange:a=>X(a,"TrangThai"),children:[(0,Y.jsx)(g.c$,{value:1,children:"Ch\u01b0a nh\u1eadp li\u1ec7u"}),(0,Y.jsx)(g.c$,{value:2,children:"\u0110\xe3 nh\u1eadp li\u1ec7u"})]}),(0,Y.jsx)(A.A,{onFilter:X,filterData:t}),(0,Y.jsx)(g.$n,{onClick:z,children:"Th\u1ed1ng k\xea"}),(0,Y.jsx)(g.$n,{style:{float:"right"},onClick:()=>{const a={...t};S.A.ExportExcel(a).then((a=>{if(a.data.Status>0){const e=document.createElement("a");e.href=a.data.Data,e.target="_blank",e.click()}else h.Ay.destroy(),h.Ay.warning(a.data.Message)})).catch((a=>{h.Ay.destroy(),h.Ay.warning(a.toString())}))},disabled:!(null!==w&&void 0!==w&&null!==(e=w.DataTable)&&void 0!==e&&e.TableData),children:"Xu\u1ea5t excel"})]}):null}),(0,Y.jsx)("div",{className:"unit-report",dangerouslySetInnerHTML:{__html:null===w||void 0===w?void 0:w.DonViTinh}}),(0,Y.jsx)(u.A,{setThongTinBaoCaoChiTiet:Q,setLoadingDetailsReport:L,ThongTinBaoCaoChiTiet:m,DetailsReportPayload:B,loadingDetailsReport:E,handleCreateReport:z,GetChiTietDonThu:async(a,e,n,l,o)=>{var i,s;const r=null!==t&&void 0!==t&&t.DenNgay?(0,p.Yq)(null===t||void 0===t?void 0:t.DenNgay):"",d=null!==t&&void 0!==t&&t.TuNgay?(0,p.Yq)(null===t||void 0===t?void 0:t.TuNgay):"";1===v?null===w||void 0===w||null===(i=w.DataTable)||void 0===i||i.TableData:2===v&&(null===m||void 0===m||null===(s=m.DataTable)||void 0===s||s.TableData);let u=[];return q({CapID:a,Index:e,CoQuanID:n}),"set"===l?(L(!0),S.A.ChiTietDonThu({DenNgay:r,TuNgay:d,CapID:a,Index:e,CoQuanID:n}).then((a=>{if(L(!1),a.data.Status>0){const e={...a.data.Data};Q(e)}else h.Ay.destroy(),h.Ay.warning(a.data.Message)})).catch((a=>{L(!1),h.Ay.destroy(),h.Ay.warning(a.toString())}))):"get"===l&&(L(!0),await S.A.ChiTietDonThu({DenNgay:r,TuNgay:d,CapID:a,Index:e,CoQuanID:n,PageNumber:o}).then((a=>{L(!1),a.data.Status>0?u=a.data.Data.DataTable.TableData:(h.Ay.destroy(),h.Ay.warning(a.data.Message))})).catch((a=>{L(!1),h.Ay.destroy(),h.Ay.warning(a.toString())}))),"get"===l?u:[]},isViewDetail:!1,onRollBack:()=>{j(1),Q({})},ThongTinBaoCao:w,tableLoading:b,title:"B\xe1o c\xe1o 2A",setStep:j,Step:v,MaxLevel:2})]})]})})}},82859:(a,e,t)=>{t.d(e,{A:()=>r});var n=t(65828),l=t(18570),o=t(54686),i=t.n(o),s=t(56723);const r=a=>{const{onFilter:e,filterData:t}=a;return(0,s.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,s.jsx)(n.lr,{placeholder:"T\u1eeb ng\xe0y",format:"DD/MM/YYYY",value:t.TuNgay?i()(t.TuNgay,"YYYY/MM/DD"):null,onChange:(a,t)=>e(a?(0,l.Yq)(a):null,"TuNgay"),disabledDate:a=>(0,l.IH)(a,t.DenNgay)}),(0,s.jsx)(n.lr,{value:t.DenNgay?i()(t.DenNgay,"YYYY/MM/DD"):null,onChange:(a,t)=>e(a?(0,l.Yq)(a):null,"DenNgay"),placeholder:"\u0110\u1ebfn ng\xe0y",format:"DD/MM/YYYY",disabledDate:a=>(0,l.IH)(t.TuNgay,a,2)})]})}}}]);