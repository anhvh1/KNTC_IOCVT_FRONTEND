"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[5523],{67466:(n,e,a)=>{a.d(e,{D:()=>i});var t=a(82483);function i(n){const[e,a]=(0,t.useState)(0);return[e,()=>{a(e+1)}]}},75523:(n,e,a)=>{a.r(e),a.d(e,{default:()=>G});var t,i,o,r=a(93445),s=a(72741),h=a(256),d=a(63419),l=a(88701),c=a(50623),u=a(82483),g=a(82402),p=a(53660),m=a(34045),x=a(81538),A=a(64684),y=a(67353),C=a(53615),D=a(65828),w=a(18570),b=a(67466),S=a(92378),j=a(83106),T=(a(37735),a(94690),a(33713)),I=a(79948),f=(a(4816),a(24028)),P=a(57528),v=a(22953);const B=v.Ay.div(t||(t=(0,P.A)(["\n  .tree-custom {\n    padding: 0;\n    border: none;\n  }\n  .isoBoxWrapper {\n    border: none;\n    padding: 0;\n  }\n  .tree-custom div,\n  .isoLayoutContentWrapper,\n  .isoLayoutContentWrapper div {\n    padding: 0;\n  }\n\n  h1,\n  .d-none {\n    display: none;\n    padding: 0 !important;\n  }\n  .mg-top::-webkit-scrollbar {\n    background-color: #f5f5f5;\n  }\n\n  .ant-select.ant-select-single.ant-select-allow-clear.ant-select-show-arrow.ant-select-show-search {\n    width: 30% !important;\n  }\n  span.ant-input-group-wrapper.ant-input-search {\n    width: 65% !important;\n  }\n\n  span.ant-tree-title {\n    min-width: 450px;\n  }\n\n  .mg-top {\n    margin-top: 20px;\n    height: calc(100vh - 265px);\n    overflow: scroll;\n  }\n  /* @media only screen and (max-width: 1280px) {\n    .isoBoxWrapper {\n      height: auto !important;\n    }\n  } */\n  @media (max-width: 767px) {\n    span.ant-tree-title {\n      width: 100%;\n    }\n    .isoBoxWrapper {\n      height: 300px !important;\n    }\n    .mg-top {\n      height: 300px !important;\n    }\n    .esmvo {\n      height: 300px;\n    }\n  }\n  @media (min-width: 768px) and (max-width: 852px) {\n    .ant-select.ant-select-single.ant-select-allow-clear.ant-select-show-arrow.ant-select-show-search {\n      width: 100% !important;\n    }\n    span.ant-input-group-wrapper.ant-input-search {\n      width: 100% !important;\n    }\n  }\n"]))),k=(v.Ay.div(i||(i=(0,P.A)(["\n  .ant-input-number-handler-wrap {\n    display: none;\n    width: 100%;\n  }\n  .ant-input-number.ant-input-number-in-form-item {\n    width: 100%;\n  }\n"]))),v.Ay.div(o||(o=(0,P.A)(["\n  height: 40px;\n  line-height: 40px;\n  font-weight: 500;\n  font-size: 17px;\n  margin: 5px 0;\n"]))));var M=a(56723);const{Item:Q,useForm:E}=I.A,L=n=>{const[e]=E(),{dataEdit:a,loading:t,visible:i,action:o,IDmodal:r,CoQuanDonVi:s}=n,[h,d]=(0,u.useState)(!0),[l,c]=(0,u.useState)();(0,u.useEffect)((()=>{a&&e&&e.setFieldsValue({...a,CoQuanDonVi:s})}),[]),e.setFieldsValue({CoQuanID:r});return(0,M.jsx)(D.aF,{title:"".concat("edit"===o?"S\u1eeda":"Th\xeam"," th\xf4ng tin ph\xf2ng ban"),width:450,visible:i,onCancel:n.onCancel,footer:[(0,M.jsx)(D.$n,{onClick:n.onCancel,children:"H\u1ee7y"},"back"),(0,M.jsx)(D.$n,{disabled:h,htmlType:"submit",type:"primary",form:"formmonhoc",loading:t,onClick:async a=>{a.preventDefault();const t=await e.validateFields();n.onCreate(t)},children:"L\u01b0u"},"submit")],children:(0,M.jsxs)(I.A,{form:e,name:"formphongban",onChange:async(n,t)=>{const i=await e.getFieldsValue(),{SoDienThoai:o,TenPhongBan:r,GhiChu:s}=i;!r||r===a.TenPhongBan&&s===a.GhiChu&&o===a.SoDienThoai?d(!0):d(!1)},children:["edit"===o?(0,M.jsx)(Q,{name:"PhongBanID",hidden:!0}):"","edit"===o?(0,M.jsx)(Q,{name:"CoQuanID",hidden:!0}):(0,M.jsx)(Q,{label:"C\u01a1 Quan ID",name:"CoQuanID",...T.ITEM_LAYOUT,hidden:!0,children:(0,M.jsx)(D.pd,{})}),(0,M.jsx)(Q,{label:"C\u01a1 quan \u0111\u01a1n v\u1ecb",name:"CoQuanDonVi",...T.ITEM_LAYOUT,required:[T.REQUIRED],children:(0,M.jsx)(D.pd,{disabled:!0})}),(0,M.jsx)(Q,{label:"T\xean ph\xf2ng ban",name:"TenPhongBan",...T.ITEM_LAYOUT,required:[T.REQUIRED],children:(0,M.jsx)(D.pd,{})}),(0,M.jsx)(Q,{label:"\u0110i\u1ec7n tho\u1ea1i",name:"SoDienThoai",...T.ITEM_LAYOUT,rules:[{max:11,message:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7.",pattern:new RegExp(/^[0-9]+$/)}],children:(0,M.jsx)(D.pd,{maxLength:11})}),(0,M.jsx)(Q,{label:"Ghi ch\xfa",name:"GhiChu",...T.ITEM_LAYOUT,children:(0,M.jsx)(f.A,{})})]})})};var N=a(21428),z=a(38674),U=a(2782),V=a(58385),F=a(2637);const G=(0,g.Ng)((function(n){return{...n.DanhMucPhongBan,role:(0,w.vh)(n.Auth.role,"danh-muc-phong-ban")}}),c.A)((n=>{document.title="Danh M\u1ee5c Ph\xf2ng Ban";const[e,a]=(0,u.useState)(S.parse(n.location.search)),[t,i]=(0,u.useState)({}),[o,c]=(0,u.useState)(!1),[T,I]=(0,u.useState)(""),[f,P]=(0,b.D)(),[v,Q]=(0,u.useState)([]),[E,G]=(0,u.useState)(!1),[O,R]=(0,u.useState)(""),W=(0,g.d4)((n=>n.DMCoQuan.DanhSachCoQuan));(0,u.useEffect)((()=>{(0,w._Y)(e),n.getList(e)}),[e]),(0,u.useEffect)((()=>{n.getList(e)}),[]);const Y=(n,e)=>{n.forEach((n=>{n.Children?n.ID===e?R(n):Y(n.Children,e):n.ID===e&&R(n)}))},_=(n,t)=>{let i=e,o={value:n,property:t},r=(0,w.D5)(i,o,null);a(r),Q([]),Y(W,n)};(0,u.useEffect)((()=>{Y(W,parseInt(e.CoQuanID))}),[W]);const q=()=>{I(""),Q([]),i({}),c(!1)},$=t=>(0,M.jsxs)("div",{className:"action-btn",children:[H.edit?(0,M.jsx)(h.A,{title:"S\u1eeda",children:(0,M.jsx)(N.A,{onClick:()=>(n=>{const e=n;I("edit"),j.A.ChiTietPhongBan({PhongBanID:e}).then((n=>{n.data.Status>0?(i(n.data.Data),P(),c(!0)):(r.Ay.destroy(),r.Ay.error(n.data.Message))})).catch((n=>{r.Ay.destroy(),r.Ay.error(n.toString())}))})(t.PhongBanID)})}):"",H.delete?(0,M.jsx)(h.A,{title:"X\xf3a",children:(0,M.jsx)(z.A,{onClick:()=>{return i=t.PhongBanID,void s.A.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ph\xf2ng ban n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{G(!0),j.A.XoaPhongBan(i).then((t=>{t.data.Status>0?(G(!1),n.getList({...e,PageNumber:Math.ceil((K-1)/e.PageSize)<e.PageNumber?Math.ceil((K-1)/e.PageSize):e.PageNumber}),r.Ay.destroy(),r.Ay.success(t.data.Message),a({...e,PageNumber:Math.ceil((K-1)/e.PageSize)<e.PageNumber?Math.ceil((K-1)/e.PageSize):e.PageNumber})):(r.Ay.destroy(),r.Ay.error(t.data.Message))})).catch((n=>{r.Ay.destroy(),r.Ay.error(n.toString())}))}});var i}})}):""]}),{DanhSachPhongBan:X,TotalRow:K,role:H}=n,J=e.PageNumber?parseInt(e.PageNumber):1,Z=e.PageSize?parseInt(e.PageSize):(0,w.WT)(),nn=[{title:"STT",width:"5%",align:"center",render:(n,e,a)=>(0,M.jsx)("span",{children:(J-1)*Z+(a+1)})},{title:"T\xean Ph\xf2ng Ban",dataIndex:"TenPhongBan",align:"left",width:30},{title:"S\u1ed1 \u0110i\u1ec7n Tho\u1ea1i",dataIndex:"SoDienThoai",align:"left",width:15},{title:"Ghi Ch\xfa",dataIndex:"GhiChu",align:"left",width:30},{title:"Thao t\xe1c",width:"15%",align:"center",render:(n,e)=>$(e)}];return(0,M.jsxs)(p.A,{children:[(0,M.jsxs)(F.A,{children:[(0,M.jsx)(m.A,{children:"Danh M\u1ee5c Ph\xf2ng Ban"}),(0,M.jsx)(x.A,{children:H.add?(0,M.jsxs)(D.$n,{type:"primary",onClick:()=>{e.CoQuanID?(I("add"),i({props:n}),P(),c(!0)):r.Ay.error("Ch\u01b0a ch\u1ecdn c\u01a1 quan \u0111\u01a1n v\u1ecb.")},disabled:!e.CoQuanID,children:[(0,M.jsx)(U.A,{}),"Th\xeam m\u1edbi"]}):null})]}),(0,M.jsx)(A.A,{children:(0,M.jsxs)(d.A,{gutter:[40,0],children:[(0,M.jsxs)(l.A,{xl:7,md:7,xs:24,children:[(0,M.jsx)(y.A,{}),(0,M.jsx)(B,{children:(0,M.jsx)(V.default,{dispatch:n=>{_(n,"CoQuanID")},...n,styled:parseInt(e.CoQuanID)})})]}),(0,M.jsxs)(l.A,{xl:17,md:17,xs:24,children:[(0,M.jsxs)(k,{children:[" ",O.Ten?"Danh s\xe1ch c\xe1c ph\xf2ng ban thu\u1ed9c ".concat(O.Ten):""]}),(0,M.jsx)(C.Ay,{columns:nn,dataSource:X,onChange:(n,t,i)=>{let o=e,r={pagination:n,filters:t,sorter:i},s=(0,w.D5)(o,null,r);a(s),Q([])},pagination:{showSizeChanger:!0,showTotal:(n,e)=>"T\u1eeb ".concat(e[0]," \u0111\u1ebfn ").concat(e[1]," tr\xean ").concat(n," k\u1ebft qu\u1ea3"),total:K,current:J,pageSize:Z},rowKey:n=>n.PhongBanID})]})]})}),(0,M.jsx)(L,{visible:o,dataEdit:t,action:T,loading:E,onCreate:a=>{G(!0),"add"===T&&j.A.ThemPhongBan(a).then((n=>{G(!1),n.data.Status>0?(r.Ay.destroy(),r.Ay.success(n.data.Message),_(e.CoQuanID,"CoQuanID"),q()):(G(!1),r.Ay.destroy(),r.Ay.error(n.data.Message))})).catch((n=>{G(!1),r.Ay.destroy(),r.Ay.error(n.toString())})),"edit"===T&&j.A.CapNhatPhongBan(a).then((a=>{a.data.Status>0?(G(!1),r.Ay.destroy(),r.Ay.success(a.data.Message),q(),n.getList(e)):(G(!1),r.Ay.destroy(),r.Ay.error(a.data.Message))})).catch((n=>{G(!1),r.Ay.destroy(),r.Ay.error(n.toString())}))},onCancel:q,DanhSachPhongBan:X,IDmodal:e.CoQuanID,CoQuanDonVi:O.Ten},f)]})}))}}]);