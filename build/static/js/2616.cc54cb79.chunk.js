"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[2616],{2637:(e,n,a)=>{a.d(n,{A:()=>i});a(82483);var t,o=a(57528),c=a(22953);a(6535);const l=c.Ay.div(t||(t=(0,o.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 10px 0;\n  gap: 10px;\n  width: 100%;\n"])));var s=a(56723);const i=e=>(0,s.jsx)(l,{className:"wrapper-top",children:e.children})},67466:(e,n,a)=>{a.d(n,{D:()=>o});var t=a(82483);function o(e){const[n,a]=(0,t.useState)(0);return[n,()=>{a(n+1)}]}},49331:(e,n,a)=>{a.d(n,{M:()=>o});var t=a(82483);function o(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const[n,a]=(0,t.useState)(e);return[n,()=>{a(!0)},()=>{a(!1)}]}},32616:(e,n,a)=>{a.r(n),a.d(n,{default:()=>re});var t,o=a(82483),c=a(82402),l=a(92378),s=a(62136),i=a(54255),h=a(34304),r=a.n(h),u=a(67777),d=a(53660),g=a(34045),m=a(81538),p=a(64684),y=a(67353),N=a(53615),D=a(57528),x=a(22953);const A=x.Ay.div(t||(t=(0,D.A)(["\n  .ant-table-selection-column .ant-table-selection {display: none !important}\n"])));var f=a(33713),C=a(79948),b=a(53397),v=a(27957),S=a(18682),I=a(56723);const{Item:j,useForm:T}=C.A,M=e=>{const[n]=T(),{dataEdit:a,confirmLoading:t,visible:c,onCancel:l,NhomNguoiDungSelect:s}=e;(0,o.useEffect)((()=>{a.NhomNguoiDungID&&n.setFieldsValue({...a})}),[]);return(0,I.jsx)(S.A,{title:"".concat(a.NhomNguoiDungID?"S\u1eeda":"Th\xeam"," th\xf4ng tin nh\xf3m ng\u01b0\u1eddi d\xf9ng"),width:650,visible:c,onCancel:l,footer:[(0,I.jsx)(b.Ay,{onClick:l,children:"H\u1ee7y"},"back"),(0,I.jsx)(b.Ay,{htmlType:"submit",type:"primary",form:"myForm",loading:t,onClick:async a=>{a.preventDefault();let t=await n.validateFields();t.applyType=1,e.onCreate(t)},children:"L\u01b0u"},"submit")],children:(0,I.jsxs)(C.A,{form:n,children:[(0,I.jsx)(j,{name:"NhomNguoiDungID",hidden:!0}),(0,I.jsx)(j,{label:"T\xean nh\xf3m ng\u01b0\u1eddi d\xf9ng",name:"TenNhom",rules:[{...f.REQUIRED}],...f.ITEM_LAYOUT_SMALL_2,children:(0,I.jsx)(v.A,{})}),(0,I.jsx)(j,{label:"Ghi ch\xfa",name:"GhiChu",...f.ITEM_LAYOUT_SMALL_2,children:(0,I.jsx)(v.A.TextArea,{autoSize:{minRows:3}})})]})})};var k=a(93445),w=a(2370),X=a(22238),L=a(65828);const{Item:E}=C.A,_=e=>{const n=o.createRef(),{confirmLoading:a,visible:t,onCancel:c,dataModalAddUser:l,NhomNguoiDungID:s}=e,[h,r]=(0,o.useState)([]),[u,d]=(0,o.useState)([]);(0,o.useEffect)((()=>{const e=n.current;e&&e.setFieldsValue({NhomNguoiDungID:s}),X.A.GetAllCoQuan().then((e=>{e.data.Status>0?r(e.data.Data):(k.Ay.destroy(),k.Ay.warning(e.data.message))})).catch((e=>{k.Ay.destroy(),k.Ay.warning(e.toString())}))}),[]);return(0,I.jsx)(S.A,{title:"Th\xeam ng\u01b0\u1eddi d\xf9ng v\xe0o nh\xf3m",width:600,visible:t,onCancel:c,footer:[(0,I.jsx)(w.A,{onClick:c,children:"H\u1ee7y"},"back"),(0,I.jsx)(w.A,{htmlType:"submit",type:"primary",form:"myForm",loading:a,onClick:async a=>{a.preventDefault();const t=await n.current.validateFields(),{onCreate:o}=e;o(t)},children:"L\u01b0u"},"submit")],children:(0,I.jsxs)(C.A,{ref:n,children:[(0,I.jsx)(E,{name:"NhomNguoiDungID",hidden:!0}),(0,I.jsx)(E,{label:"Ch\u1ecdn c\u01a1 quan",name:"CoQuanID",rules:[{...f.REQUIRED}],...f.ITEM_LAYOUT_SMALL_2,children:(0,I.jsx)(L.l6,{showSearch:!0,noGetPopupContainer:!0,placeholder:"Ch\u1ecdn c\u01a1 quan",onChange:e=>(e=>{const a=n.current;e?s&&i.A.danhSachNguoiDung({NhomNguoiDungID:s,CoQuanID:e}).then((e=>{e.data.Status>0?d(e.data.Data):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())})):d([]),a&&a.setFieldsValue({NguoiDungID:[]})})(e),children:h.map((e=>(0,I.jsx)(L.w9,{value:e.CoQuanID,children:"".concat(e.TenCoQuan)},e.CoQuanID)))})}),(0,I.jsx)(E,{label:"Ch\u1ecdn ng\u01b0\u1eddi d\xf9ng",name:"NguoiDungID",rules:[{...f.REQUIRED}],...f.ITEM_LAYOUT_SMALL_2,children:(0,I.jsx)(L.l6,{showSearch:!0,noGetPopupContainer:!0,placeholder:"Ch\u1ecdn ng\u01b0\u1eddi d\xf9ng",mode:"multiple",children:u.map((e=>(0,I.jsx)(L.w9,{value:e.NguoiDungID,children:"".concat(e.TenNguoiDung," (").concat(e.TenCanBo,")")},e.NguoiDungID)))})})]})})};var P=a(26418),z=a(69973),Q=a(98456);const{Item:B,useForm:V}=C.A,H=e=>{const[n]=V(),[a,t]=(0,o.useState)(!1),[l,s]=(0,o.useState)([]),[i,h]=(0,o.useState)([]),[r,d]=(0,o.useState)([]),{ListSideBar:g}=(0,c.d4)((e=>e.ListSideBar)),{dataModalAddPermission:m,loading:p,visible:y,onCancel:N}=e,{NhomNguoiDungID:D,DanhSachChucNang:x}=m,A=g,b=(0,c.wA)();(0,o.useEffect)((()=>{b(Q.A.getList())}),[]),(0,o.useEffect)((()=>{let e=[];A.forEach((n=>{n.Children&&n.Children.length?n.Children.some((a=>!!x.find((e=>e.MaChucNang===a.MaMenu&&a.HienThi))&&(e.push({key:n.MaMenu,label:n.TenMenu,children:n.Children}),!0))):n.HienThi&&x.some((a=>n.MaMenu===a.MaChucNang&&(e.push({key:n.MaMenu,label:n.TenMenu}),!0)))}));let n=[];e.filter((e=>e.key)).forEach((e=>{let a={id:e.key,key:e.key,label:e.label,disabled:!1,isParent:!0};if(e.children&&e.children){a.children=[];let t=[];e.children.forEach((e=>{const n=x.find((n=>n.MaChucNang===e.MaMenu&&e.HienThi));n&&t.push({id:n.ChucNangID,key:n.MaChucNang,label:n.TenChucNang,disabled:n.disabled,children:[],isParent:!1})})),a.children=t,n.push(a),t.forEach((e=>{n.push(e)}))}else x.forEach((e=>{a.key===e.MaChucNang&&(a.id=e.ChucNangID,a.disabled=e.disabled,a.isToggle=e.isToggle,n.push(a))}))})),t(D),h(n)}),[]);const v=(e,n)=>{if(e.length){let a=[...r];a.some(((t,o)=>t.ChucNangID===n&&(a[o]={NhomNguoiDungID:D,ChucNangID:n,Xem:e.indexOf("Xem")>=0?1:0,Them:e.indexOf("Them")>=0?1:0,Sua:e.indexOf("Sua")>=0?1:0,Xoa:e.indexOf("Xoa")>=0?1:0},!0))),d(a)}else j(n)},j=e=>{let a=[],t=[],o=[];l.forEach((n=>{n.ChucNangID!==e&&(a.push(n),t.push(n.ChucNangID))})),r.forEach((n=>{n.ChucNangID!==e&&o.push(n)})),s(a),d(o),n.setFieldsValue({DanhSachChucNangThemID:t})},T=e=>{let a=[],t=e&&e.length?[...r]:[];x.forEach((n=>{if(e.indexOf(n.ChucNangID)>=0){a.push(n);let o=!1;if(t.forEach(((a,t)=>{n.ChucNangID===a.ChucNangID&&(o=!0),e.indexOf(a.ChucNangID)<0&&r.splice(t,1)})),!o){let e={NhomNguoiDungID:D,ChucNangID:n.ChucNangID,Xem:n.Xem?1:0,Them:n.Them?1:0,Sua:n.Sua?1:0,Xoa:n.Xoa?1:0};t.push(e)}}})),s(a),d(t),n.setFieldsValue({DanhSachChucNangThemID:e})};return a?(0,I.jsx)(S.A,{title:"Th\xeam ch\u1ee9c n\u0103ng cho nh\xf3m",width:600,visible:y,onCancel:N,footer:[(0,I.jsx)(w.A,{onClick:N,children:"H\u1ee7y"},"back"),(0,I.jsx)(w.A,{htmlType:"submit",type:"primary",form:"myForm",loading:p,onClick:async a=>{a.preventDefault(),await n.validateFields();const t=r,{onCreate:o}=e;o(t)},children:"L\u01b0u"},"submit")],children:(0,I.jsxs)(C.A,{form:n,children:[(0,I.jsx)(B,{label:"Ch\u1ecdn ch\u1ee9c n\u0103ng",name:"DanhSachChucNangThemID",...f.ITEM_LAYOUT_SMALL_2,rules:[{...f.REQUIRED}],children:(0,I.jsx)(z.Ay,{showSearch:!0,placeholder:"Ch\u1ecdn ch\u1ee9c n\u0103ng",onChange:e=>{let n=[];e.forEach(((e,a)=>{isNaN(e)?i.forEach((a=>{a.id===e&&a.children.forEach((e=>{!1===e.disabled&&n.push(e.id)}))})):n.push(e)}));let a=[];n.length&&i.forEach((e=>{!isNaN(e.id)&&n.indexOf(e.id)>=0&&a.push(e.id)})),T(a)},defaultActiveFirstOption:!1,allowClear:!0,noGetPopupContainer:!0,mode:"multiple",style:{marginTop:4},className:"scroll-select-selection--multiple",children:i.map((e=>e.isParent?(0,I.jsx)(z.c$,{value:e.id,disabled:e.disabled,style:{fontWeight:"bold"},children:e.label},e.id):(0,I.jsx)(z.c$,{value:e.id,disabled:e.disabled,style:{paddingLeft:20},children:e.label},e.id)))})}),l&&l.length?(e=>{let n="";return e&&e.length&&(n=e.map(((e,n)=>{let a=[],t=[];const o=e.ChucNangID;let c=null;if([...x].some((e=>e.ChucNangID===o&&(c={...e},!0))),c)return a=[{label:"Xem",value:"Xem",disabled:0===c.Xem},{label:"Th\xeam",value:"Them",disabled:0===c.Them},{label:"S\u1eeda",value:"Sua",disabled:0===c.Sua},{label:"X\xf3a",value:"Xoa",disabled:0===c.Xoa}],e.Xem&&t.push("Xem"),e.Them&&t.push("Them"),e.Sua&&t.push("Sua"),e.Xoa&&t.push("Xoa"),(0,I.jsxs)("div",{className:"content_row",children:[(0,I.jsx)("div",{className:"tenchucnang",style:{display:"inline-block",width:184},children:(0,I.jsx)("b",{children:e.TenChucNang})}),(0,I.jsxs)("div",{className:"chonxoaquyen",style:{display:"inline-block"},children:[u.gO.includes(e.MaChucNang)?(0,I.jsx)(P.A.Group,{defaultValue:t,options:[{label:"",value:"Xem",disabled:0===c.Xem}],onChange:n=>v(n,e.ChucNangID)}):(0,I.jsx)(P.A.Group,{options:a,defaultValue:t,onChange:n=>v(n,e.ChucNangID)}),(0,I.jsx)("button",{style:{border:"none",background:"none",outline:"none",cursor:"pointer"},onClick:()=>j(e.ChucNangID),children:"\u2716"})]})]},e.ChucNangID)}))),n})(l):null]})}):null};var O;const F=x.Ay.div(O||(O=(0,D.A)(["\n  position: relative;\n  margin-bottom: 10px !important;\n  .closeButton {\n    position: absolute !important;\n    top: -20px;\n    right: -20px;\n    border: none;\n    background: none;\n    outline: none;\n    font-size: 22px;\n    height: 40px;\n    width: 40px;\n    cursor: pointer;\n    @media only screen and (max-width: 767px) {\n      top: -48px;\n    }\n  }\n  .box_class {\n    padding: 15px !important;\n    height: 340px;\n  }\n  .ant-col {\n    margin-top: 28px;\n  }\n  h3 {\n    font-size: 14px;\n    position: absolute;\n    left: 15px;\n    top: -10px;\n    background: #ffffff;\n    padding: 0 5px;\n  }\n  .action_class {\n    padding-bottom: 8px;\n    button {\n      margin-left: 10px;\n      margin-right: 0px;\n      @media only screen and (max-width: 992px) {\n        margin-left: 0px;\n        margin-right: 10px;\n      }\n    }\n    @media only screen and (min-width: 992px) {\n      text-align: right;\n    }\n  }\n  .content_class {\n    height: 270px;\n    overflow: auto;\n    button {\n      border: none;\n      box-shadow: none;\n      background: none;\n      height: auto;\n      cursor: pointer;\n      outline: none;\n      margin-left: 10px;\n    }\n    button::focus, button:active{ outline: none !important }\n    ul {\n      padding: 20px;\n      list-style-type: circle;\n    }\n    .content_row {\n      display: flex;\n      .tenchucnang {\n        display: inline-block;\n        width: calc(100% - 300px);\n      }\n      .chonxoaquyen {\n        display: inline-block;\n        width: 305px;\n      }\n    }\n    .content_row:hover, li:hover {\n      background: #e6f7ff;\n    }\n    \n    .ul {\n      padding: 20px;\n      \n      .li {\n        button {\n          margin: 0 10px 0 0;\n        }\n      }\n    }\n  }\n  \n  .content_class::-webkit-scrollbar {\n    width: 4px;\n    background-color: #F5F5F5;\n  }\n   \n  .content_class::-webkit-scrollbar-track {\n      background-color: #F5F5F5;\n  }\n   \n  .content_class::-webkit-scrollbar-thumb {\n    background-color: rgba(0,0,0,0.05);\n  }\n"])));var R=a(72741),G=a(63419),U=a(88701),q=a(256),K=a(18570),Y=a(58168);const $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892 772h-80v-80c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v80h-80c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h80v80c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-80h80c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM373.5 498.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.8-1.7-203.2 89.2-203.2 200 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.8-1.1 6.4-4.8 5.9-8.8zM824 472c0-109.4-87.9-198.3-196.9-200C516.3 270.3 424 361.2 424 472c0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C357 742.6 326 814.8 324 891.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5C505.8 695.7 563 672 624 672c110.4 0 200-89.5 200-200zm-109.5 90.5C690.3 586.7 658.2 600 624 600s-66.3-13.3-90.5-37.5a127.26 127.26 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4-.1 34.2-13.4 66.3-37.6 90.5z"}}]},name:"usergroup-add",theme:"outlined"};var W=a(56594),J=function(e,n){return o.createElement(W.A,(0,Y.A)({},e,{ref:n,icon:$}))};const Z=o.forwardRef(J);var ee=a(87734),ne=a(32549);const ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};var te=function(e,n){return o.createElement(W.A,(0,Y.A)({},e,{ref:n,icon:ae}))};const oe=o.forwardRef(te);var ce=a(21428),le=a(38674),se=a(67466),ie=a(49331),he=a(2637);const re=e=>{document.title="Qu\u1ea3n l\xfd ph\xe2n quy\u1ec1n";const n=(0,c.wA)(),[a,t]=(0,o.useState)(l.parse(e.location.search)),[h,D]=(0,o.useState)(!1),[x,f]=(0,se.D)(),[C,b,v]=(0,ie.M)(),[S,j]=(0,o.useState)({}),[T,w]=(0,o.useState)([]),[X,E,z]=(0,ie.M)(),[Q,B]=(0,se.D)(),[V,O]=(0,o.useState)(null),[Y,$]=(0,o.useState)({NhomNguoiDungID:0,DanhSachNguoiDung:[]}),[W,J,ae]=(0,ie.M)(),[te,re]=(0,o.useState)([]),[ue,de]=(0,o.useState)({NhomNguoiDungID:0,DanhSachChucNang:[]}),[ge,me,pe]=(0,ie.M)(),[ye,Ne]=(0,o.useState)("add"),[De,xe]=(0,o.useState)(0),{ListSideBar:Ae}=(0,c.d4)((e=>e.ListSideBar)),fe=Ae,{DanhSachNhom:Ce,TotalRow:be,DanhSachCanBo:ve,TableLoading:Se}=(0,c.d4)((e=>e.QLPhanQuyen)),Ie=(0,c.d4)((e=>(0,K.vh)(e.Auth.role,"phan-quyen")));(0,o.useEffect)((()=>{n(s.A.getInitData())}),[]),(0,o.useEffect)((()=>{(0,K._Y)(a),n(s.A.getList(a))}),[a]);const je=(e,n)=>{let o={value:e,property:n},c=(0,K.D5)(a,o,null);t(c)},Te=()=>{De&&i.A.danhSachNguoiDung({NhomNguoiDungID:De}).then((e=>{e.data.Status>0?(J(),$({NhomNguoiDungID:De,DanhSachNguoiDung:e.data.Data}),f()):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())}))},Me=()=>{ae(),$({NhomNguoiDungID:0,DanhSachNguoiDung:[]})},ke=e=>{const n=e.NguoiDungID;delete e.NguoiDungID,D(!0),i.A.themNhieuNguoiDung({...e,DanhSachNguoiDungID:n}).then((e=>{D(!1),e.data.Status>0?(k.Ay.success("Th\xeam th\xe0nh c\xf4ng"),Me(),Qe("open")):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{D(!1),k.Ay.destroy(),k.Ay.error(e.toString())}))},we=(e,n)=>{const a={...V};let t={PhanQuyenID:parseInt(n),Xem:0,Them:0,Sua:0,Xoa:0},o={};e.forEach((e=>{t[e]=1})),a.DanhSachChucNang.some((e=>e.PhanQuyenID===n&&(o={PhanQuyenID:parseInt(e.PhanQuyenID),Xem:parseInt(e.Xem),Them:parseInt(e.Them),Sua:parseInt(e.Sua),Xoa:parseInt(e.Xoa)},!0)));let c=[...te];c.some(((e,n)=>e.PhanQuyenID===t.PhanQuyenID&&(c.splice(n,1),!0))),r().isEqual(t,o)||c.push(t),re(c)},Xe=()=>{const e=te;e&&e.length&&R.A.confirm({title:"L\u01b0u thay \u0111\u1ed5i",content:"B\u1ea1n c\xf3 mu\u1ed1n c\u1eadp nh\u1eadt thay \u0111\u1ed5i kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{i.A.suaChucNang(e).then((e=>{e.data.Status>0?(k.Ay.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),re([]),Qe("open")):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())}))},onCancel:()=>{re([]),Qe("open")}})},Le=e=>{let n=[],a=(0,I.jsx)(N.ab,{scroll:{}});return e&&e.length&&(fe.forEach((a=>{a.Children&&a.Children.length?a.Children.some((t=>!!e.find((e=>e.MaChucNang===t.MaMenu&&t.HienThi))&&(n.push({key:a.MaMenu,label:a.TenMenu,children:a.Children,isParent:!0}),!0))):a.HienThi&&e.some((e=>a.MaMenu===e.MaChucNang&&(n.push({key:a.MaMenu,label:a.TenMenu,isParent:e.ChucNangChaID>0}),!0)))})),a=n.map(((n,a)=>n.isParent?(0,I.jsxs)("div",{children:[(0,I.jsx)("div",{children:(0,I.jsx)("b",{children:n.label})}),e.map(((e,a)=>{if(n.children&&n.children.find((n=>n.MaMenu===e.MaChucNang))){let n=[],t=[];const o=e.ChucNangID;let c=null;if([...T].some((e=>e.ChucNangID===o&&(c={...e},!0))),c)return n=[{label:"Xem",value:"Xem",disabled:0===c.Xem},{label:"Th\xeam",value:"Them",disabled:0===c.Them},{label:"S\u1eeda",value:"Sua",disabled:0===c.Sua},{label:"X\xf3a",value:"Xoa",disabled:0===c.Xoa}],e.Xem&&t.push("Xem"),e.Them&&t.push("Them"),e.Sua&&t.push("Sua"),e.Xoa&&t.push("Xoa"),(0,I.jsxs)("div",{className:"content_row",children:[(0,I.jsx)("div",{className:"tenchucnang",children:e.TenChucNang}),(0,I.jsxs)("div",{className:"chonxoaquyen",children:[u.gO.includes(e.MaChucNang)?(0,I.jsx)(P.A.Group,{defaultValue:t,options:[{label:"",value:"Xem"}],onChange:n=>we(n,e.PhanQuyenID)}):(0,I.jsx)(P.A.Group,{defaultValue:t,options:n,onChange:n=>we(n,e.PhanQuyenID)}),(0,I.jsx)("button",{className:"float-right",onClick:()=>Ee({PhanQuyenID:e.PhanQuyenID}),children:"\u2716"}),(0,I.jsx)("div",{className:"clearfix"})]})]},a)}}))]}):e.map(((e,a)=>{if(n.key===e.MaChucNang){let n=[{label:"Xem",value:"Xem",disabled:!1},{label:"Th\xeam",value:"Them",disabled:!1},{label:"S\u1eeda",value:"Sua",disabled:!1},{label:"X\xf3a",value:"Xoa",disabled:!1}],t=[];return e.Xem&&t.push("Xem"),e.Them&&t.push("Them"),e.Sua&&t.push("Sua"),e.Xoa&&t.push("Xoa"),(0,I.jsxs)("div",{className:"content_row",children:[(0,I.jsx)("b",{className:"tenchucnang",children:e.TenChucNang}),(0,I.jsxs)("div",{className:"chonxoaquyen",children:[u.gO.includes(e.MaChucNang)?(0,I.jsx)(P.A.Group,{defaultValue:t,options:[{label:"",value:"Xem"}],onChange:n=>we(n,e.PhanQuyenID)}):(0,I.jsx)(P.A.Group,{options:n,defaultValue:t,onChange:n=>we(n,e.PhanQuyenID)}),(0,I.jsx)("button",{className:"float-right",onClick:()=>Ee({PhanQuyenID:e.PhanQuyenID}),children:"\u2716"}),(0,I.jsx)("div",{className:"clearfix"})]})]},a)}}))))),a},Ee=e=>{R.A.confirm({title:"X\xf3a d\u1eef li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ch\u1ee9c n\u0103ng n\xe0y ra kh\u1ecfi nh\xf3m?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{i.A.xoaChucNang(e).then((e=>{e.data.Status>0?(k.Ay.success("X\xf3a th\xe0nh c\xf4ng"),Qe("open")):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())}))}})},_e=()=>{if(De){let e=De,n=[];const a=V.DanhSachChucNang,t=a&&a.length?a.map((e=>e.ChucNangID.toString())):[];T.map((e=>{t.indexOf(e.ChucNangID.toString())<0?n.push({...e,disabled:!1}):n.push({...e,disabled:!0})})),me(),de({NhomNguoiDungID:e,DanhSachChucNang:n}),f()}},Pe=()=>{pe(),de({NhomNguoiDungID:0,DanhSachChucNang:[]})},ze=e=>{D(!0),i.A.themChucNang(e).then((e=>{D(!1),e.data.Status>0?(k.Ay.success("Th\xeam th\xe0nh c\xf4ng"),Pe(),Qe("open")):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{D(!1),k.Ay.destroy(),k.Ay.error(e.toString())}))},Qe=e=>{if("open"===e){if(De){let e=De;i.A.sieuChiTietNhom({NhomNguoiDungID:e}).then((n=>{n.data.Status>0?i.A.danhSachChucNang({NhomNguoiDungID:e}).then((e=>{E(),O(n.data.Data),re([]),w(e.data.Data),B()})):(k.Ay.destroy(),k.Ay.error(n.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())}))}}else z(),O(null),re([]),w([]),xe(0)},Be=e=>(0,I.jsxs)("div",{className:"action-btn",children:[Ie.edit?(0,I.jsx)(q.A,{title:"C\u1ea5u h\xecnh",children:(0,I.jsx)(oe,{onClick:()=>{return n=e.NhomNguoiDungID,void(De!==n&&i.A.sieuChiTietNhom({NhomNguoiDungID:n}).then((e=>{e.data.Status>0?i.A.danhSachChucNang({NhomNguoiDungID:n}).then((a=>{E(),O(e.data.Data),re([]),w(a.data.Data),xe(n),B()})):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())})));var n}})}):"",Ie.edit?(0,I.jsx)(q.A,{title:"S\u1eeda",children:(0,I.jsx)(ce.A,{onClick:()=>{return n=e.NhomNguoiDungID,void i.A.chiTietNhom({NhomNguoiDungID:n}).then((e=>{e.data.Status>0?(j(e.data.Data),b(),Ne("edit"),f()):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())}));var n}})}):"",Ie.delete?(0,I.jsx)(q.A,{title:"X\xf3a",children:(0,I.jsx)(le.A,{onClick:()=>{return t=e.NhomNguoiDungID,void R.A.confirm({title:"X\xf3a d\u1eef li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a nh\xf3m ng\u01b0\u1eddi d\xf9ng n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{i.A.xoaNhom({NhomNguoiDungID:t}).then((e=>{e.data.Status>0?(k.Ay.success("X\xf3a th\xe0nh c\xf4ng"),n(s.A.getList(a)),Qe("close")):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())}))}});var t}})}):""]}),Ve=a.PageNumber?parseInt(a.PageNumber):1,He=a.PageSize?parseInt(a.PageSize):(0,K.WT)(),Oe=[{title:"STT",align:"center",width:5,render:(e,n,a)=>n.NhomNguoiDungID===De?(0,I.jsx)("b",{children:(Ve-1)*He+(a+1)}):(Ve-1)*He+(a+1)},{title:"T\xean nh\xf3m ng\u01b0\u1eddi d\xf9ng",dataIndex:"TenNhom",width:50,render:(e,n)=>n.NhomNguoiDungID===De?(0,I.jsx)("b",{children:e}):e},{title:"Ghi ch\xfa",dataIndex:"GhiChu",width:30,render:e=>(0,I.jsx)("span",{className:"text-area-content",children:e})},{title:"Thao t\xe1c",width:15,align:"center",render:(e,n)=>Be(n)}];return(0,I.jsxs)(d.A,{children:[(0,I.jsxs)(he.A,{children:[(0,I.jsx)(g.A,{children:"QU\u1ea2N L\xdd PH\xc2N QUY\u1ec0N NG\u01af\u1edcI D\xd9NG"}),(0,I.jsx)(m.A,{children:Ie.add?(0,I.jsxs)(L.$n,{type:"primary",onClick:()=>{b(),j({}),Ne("add"),f()},children:[(0,I.jsx)(Z,{})," Th\xeam"]}):""})]}),(0,I.jsxs)(p.A,{children:[(0,I.jsxs)(y.A,{children:[(0,I.jsx)(L.l6,{allowClear:!0,showSearch:!0,onChange:e=>je(e,"CanBoID"),value:a.CanBoID,placeholder:"Ch\u1ecdn c\xe1n b\u1ed9",style:{width:200},children:null===ve||void 0===ve?void 0:ve.map((e=>(0,I.jsx)(L.c$,{value:e.CanBoID.toString(),children:e.TenCanBo},e.CanBoID)))}),(0,I.jsx)(L.NJ,{allowClear:!0,defaultValue:a.Keyword,placeholder:"T\xecm ki\u1ebfm theo t\xean nh\xf3m ng\u01b0\u1eddi d\xf9ng",onSearch:e=>je(e,"Keyword"),style:{width:300}})]}),(0,I.jsxs)(A,{children:[(()=>{if(V&&X){const e={...V};if(e)return(0,I.jsx)("div",{style:{marginBottom:20,border:"1px solid #f9f9f9",padding:10},children:(0,I.jsxs)(F,{children:[(0,I.jsx)("button",{className:"closeButton",onClick:()=>Qe("close"),children:"\u2716"}),(0,I.jsxs)(G.A,{gutter:8,children:[(0,I.jsx)(U.A,{lg:12,md:24,children:(0,I.jsxs)(p.A,{className:"box_class",children:[(0,I.jsx)("h3",{children:"Th\xeam ng\u01b0\u1eddi d\xf9ng"}),(0,I.jsxs)("div",{className:"action_class",children:[Ie.add?(0,I.jsxs)(L.$n,{type:"primary",onClick:Te,children:[(0,I.jsx)(Z,{})," Th\xeam ng\u01b0\u1eddi d\xf9ng"]}):"",(0,I.jsx)(_,{loading:h,visible:W,dataModalAddUser:Y,onCancel:Me,onCreate:ke,NhomNguoiDungID:De},"user_".concat(x))]}),(0,I.jsx)("div",{className:"content_class",children:e.DanhSachNguoiDung&&e.DanhSachNguoiDung.length?(0,I.jsx)("div",{className:"ul",children:e.DanhSachNguoiDung.map(((n,a)=>(0,I.jsxs)("div",{className:"li",children:[(0,I.jsx)("button",{onClick:()=>{return a={NhomNguoiDungID:e.NhomNguoiDungID,NguoiDungID:n.NguoiDungID},void R.A.confirm({title:"X\xf3a d\u1eef li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ng\u01b0\u1eddi d\xf9ng n\xe0y ra kh\u1ecfi nh\xf3m?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{i.A.xoaNguoiDung(a).then((e=>{e.data.Status>0?(k.Ay.success("X\xf3a th\xe0nh c\xf4ng"),Qe("open")):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())}))}});var a},children:"\u2716"}),n.TenNguoiDung]},a)))}):(0,I.jsx)(N.ab,{style:{width:"100%",border:"none"},scroll:{}})})]})}),(0,I.jsx)(U.A,{lg:12,md:24,children:(0,I.jsxs)(p.A,{className:"box_class",children:[(0,I.jsx)("h3",{children:"Th\xeam ch\u1ee9c n\u0103ng"}),(0,I.jsxs)("div",{className:"action_class",children:[Ie.edit?(0,I.jsxs)(L.$n,{type:"primary",disabled:!te.length,onClick:Xe,children:[(0,I.jsx)(ee.A,{})," L\u01b0u"]}):"",Ie.edit?(0,I.jsxs)(L.$n,{type:"primary",onClick:_e,children:[(0,I.jsx)(ne.A,{})," Th\xeam ch\u1ee9c n\u0103ng"]}):"",(0,I.jsx)(H,{loading:h,visible:ge,dataModalAddPermission:ue,onCancel:Pe,onCreate:ze},"permission_".concat(x))]}),(0,I.jsx)("div",{className:"content_class",children:Le(e.DanhSachChucNang)})]})})]})]})},Q)}return null})(),(0,I.jsx)(N.Ay,{columns:Oe,rowKey:"NhomNguoiDungID",dataSource:Ce,loading:Se||h,onChange:(e,n,o)=>{let c={pagination:e,filters:n,sorter:o},l=(0,K.D5)(a,null,c);t(l)},pagination:{showSizeChanger:!0,showTotal:(e,n)=>"T\u1eeb ".concat(n[0]," \u0111\u1ebfn ").concat(n[1]," tr\xean ").concat(e," k\u1ebft qu\u1ea3"),total:be,current:Ve,pageSize:He}})]}),(0,I.jsx)(M,{loading:h,visible:C,onCancel:v,onCreate:e=>{delete e.applyType,D(!0),"add"===ye?(delete e.NhomNguoiDungID,i.A.themNhom(e).then((e=>{D(!1),e.data.Status>0?(k.Ay.success("Th\xeam th\xe0nh c\xf4ng"),v(),n(s.A.getList(a))):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{k.Ay.destroy(),k.Ay.error(e.toString())}))):"edit"===ye&&i.A.suaNhom(e).then((e=>{D(!1),e.data.Status>0?(k.Ay.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),v(),n(s.A.getList(a))):(k.Ay.destroy(),k.Ay.error(e.data.Message))})).catch((e=>{D(!1),k.Ay.destroy(),k.Ay.error(e.toString())}))},dataEdit:S},"group_".concat(x))]})]})}},38674:(e,n,a)=>{a.d(n,{A:()=>i});var t=a(58168),o=a(82483);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var l=a(56594),s=function(e,n){return o.createElement(l.A,(0,t.A)({},e,{ref:n,icon:c}))};const i=o.forwardRef(s)},21428:(e,n,a)=>{a.d(n,{A:()=>i});var t=a(58168),o=a(82483);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};var l=a(56594),s=function(e,n){return o.createElement(l.A,(0,t.A)({},e,{ref:n,icon:c}))};const i=o.forwardRef(s)},32549:(e,n,a)=>{a.d(n,{A:()=>i});var t=a(58168),o=a(82483);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};var l=a(56594),s=function(e,n){return o.createElement(l.A,(0,t.A)({},e,{ref:n,icon:c}))};const i=o.forwardRef(s)},87734:(e,n,a)=>{a.d(n,{A:()=>i});var t=a(58168),o=a(82483);const c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"};var l=a(56594),s=function(e,n){return o.createElement(l.A,(0,t.A)({},e,{ref:n,icon:c}))};const i=o.forwardRef(s)},88701:(e,n,a)=>{a.d(n,{A:()=>t});const t=a(1011).A},63419:(e,n,a)=>{a.d(n,{A:()=>t});const t=a(53749).A}}]);