"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[5997],{46131:(n,a,e)=>{e.r(a),e.d(a,{default:()=>_});var t,i=e(93445),l=e(256),o=e(65828),r=e(82483),s=e(82402),h=e(21939),d=e(53660),c=e(34045),u=e(81538),g=e(64684),y=e(67353),D=e(53615),p=e(74405),x=e(69973),T=e(57528);const v=e(22953).Ay.div(t||(t=(0,T.A)(["\n  .ant-tabs-nav::before {\n    display: none !important;\n  }\n  .ant-tabs-nav-wrap div:first-child {\n    transform: none !important;\n  }\n  .ant-tabs-ink-bar {\n    display: none;\n  }\n  .ant-tabs-ink-bar-animated {\n    display: none;\n  }\n  .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n  .ant-tabs-tab {\n    padding: 10px 0;\n  }\n  .ant-tabs .ant-tabs-tab {\n  }\n  .ant-tabs .ant-tabs-tab + .ant-tabs-tab {\n    margin: 0 !important;\n  }\n  .ant-tabs__title {\n    width: 200px;\n    /* height: 35px; */\n    background: #eaf1fb;\n    color: #000;\n    padding: 10px 0;\n    height: 36px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-left: 1px solid #0b57d0;\n  }\n  .ant-tabs-tab-active .ant-tabs__title {\n    background: rgb(40, 120, 215) !important;\n    color: #fff;\n    background: #94cef7;\n    font-weight: 600;\n  }\n"])));var m=e(27957),b=e(54686),A=e.n(b),j=e(5103),S=e(33713),C=e(18570),f=e(82859),N=e(67466),w=e(92378),I=e(61042),H=e(11473),L=e(60559),k=e(86880),X=(e(94690),e(32870)),Q=e(2637),M=e(56723);const _=(0,s.Ng)((function(n){return{...n.CapNhatQDGiaoXacMinh,role:(0,C.vh)(n.Auth.role,"giao-xac-minh")}}),h.A)((n=>{var a,e;document.title="C\u1eadp nh\u1eadt v\u0103n b\u1ea3n giao x\xe1c minh";const[t,s]=(0,r.useState)(w.parse(n.location.search)),[h,T]=(0,r.useState)({}),[b,_]=(0,r.useState)(!1),[K,G]=(0,r.useState)(""),[Y,P]=(0,N.D)(),[z,F]=(0,r.useState)([]),[W,q]=(0,r.useState)(!1),[E,V]=(0,r.useState)(0),[O,$]=(0,r.useState)(0),[R,B]=(0,r.useState)(!1),[J,U]=(0,r.useState)(!1),[Z,nn]=(0,r.useState)(0),[an,en]=(0,r.useState)({}),{DanhSachQDGiaoXacMinh:tn,DanhSachHuongXuLy:ln,TotalRow:on,role:rn}=n;(0,r.useEffect)((()=>{(0,C._Y)(t),n.getInitData(t)}),[t]),(0,r.useEffect)((()=>{n.getData()}),[]);const sn=(n,a,e)=>{let i=t,l={pagination:n,filters:a,sorter:e},o=(0,C.D5)(i,null,l);s(o),F([])},hn=(n,a)=>{let e=t,i={value:n,property:a},l=(0,C.D5)(e,i,null);s(l),F([])},dn=()=>{T({}),_(!1)},cn=n=>{const a=[...z];a.includes(n.key)?F(a.filter((a=>a!==n.key))):F([...a,n.key])},un=()=>{const{Search:a}=m.A,{DanhSachLoaiKhieuTo:e}=n;return(0,M.jsxs)(y.A,{isCenter:!0,children:[(0,M.jsxs)(x.Ay,{style:{width:"200px"},value:t.TrangThai,placeholder:"Ch\u1ecdn tr\u1ea1ng th\xe1i c\u1eadp nh\u1eadt",allowClear:!0,onChange:n=>hn(n,"TrangThai"),children:[(0,M.jsx)(Option,{value:"0",children:"Ch\u01b0a c\u1eadp nh\u1eadt quy\u1ebft \u0111\u1ecbnh"}),(0,M.jsx)(Option,{value:"1",children:"\u0110\xe3 c\u1eadp nh\u1eadt quy\u1ebft \u0111\u1ecbnh"})]}),(0,M.jsx)(x.Ay,{style:{width:"200px"},value:t.LoaiKhieuToID,placeholder:"Ch\u1ecdn lo\u1ea1i khi\u1ebfu t\u1ed1",allowClear:!0,onChange:n=>hn(n,"LoaiKhieuToID"),children:e?e.map((n=>(0,M.jsx)(Option,{value:n.LoaiKhieuToID.toString(),children:n.TenLoaiKhieuTo},n.LoaiKhieuToID))):null}),(0,M.jsx)(x.Ay,{style:{width:"200px"},value:t.HuongXuLyID,placeholder:"Ch\u1ecdn h\u01b0\u1edbng x\u1eed l\xfd",allowClear:!0,onChange:n=>hn(n,"HuongXuLyID"),children:ln?ln.map((n=>{var a;return(0,M.jsx)(Option,{value:null===(a=n.HuongGiaiQuyetID)||void 0===a?void 0:a.toString(),children:n.TenHuongGiaiQuyet},n.HuongGiaiQuyetID)})):null}),(0,M.jsx)(f.A,{onFilter:hn,filterData:t}),(0,M.jsx)(o.NJ,{allowClear:!0,defaultValue:null===t||void 0===t?void 0:t.Keyword,placeholder:"Nh\u1eadp \u0111\u1ed1i t\u01b0\u1ee3ng KNTC, KNPA ho\u1eb7c n\u1ed9i dung ti\u1ebfp",style:{width:300},onSearch:n=>hn(n,"Keyword")})]})},gn=t.PageNumber?parseInt(t.PageNumber):1,yn=t.PageSize?parseInt(t.PageSize):(0,C.WT)(),Dn=[{title:"S\u1ed1 \u0111\u01a1n th\u01b0",dataIndex:"SoDonThu",align:"left",width:"10%",render:(n,a,e)=>(0,M.jsx)("p",{style:{color:1===a.TrangThaiQuaHan?"red":""},children:a.SoDonThu})},{title:"Ng\xe0y ti\u1ebfp nh\u1eadn",dataIndex:"NgayTiepNhan",align:"left",width:"10%",render:(n,a,e)=>(0,M.jsx)("p",{style:{color:1===a.TrangThaiQuaHan?"red":""},children:a.NgayTiepNhan?A()(a.NgayTiepNhan).format("DD/MM/YYYY"):null})},{title:"Ngu\u1ed3n \u0111\u01a1n \u0111\u1ebfn",dataIndex:"TenNguonDonDen",align:"left",width:"10%",render:(n,a,e)=>(0,M.jsx)("p",{style:{color:1===a.TrangThaiQuaHan?"red":""},children:(0,C.rl)(a)})},{title:"Th\xf4ng tin ch\u1ee7 \u0111\u01a1n",dataIndex:"TenChuDon",align:"left",width:"20%",render:(n,a,e)=>(0,M.jsx)("div",{children:null!==a&&void 0!==a&&a.listDoiTuongKN?a.listDoiTuongKN.map((n=>(0,M.jsxs)("div",{children:[(0,M.jsx)("p",{style:{fontWeight:"600",color:1===a.TrangThaiQuaHan?"red":"",textTransform:"capitalize"},children:n.HoTen}),(0,M.jsx)("p",{style:{color:1===a.TrangThaiQuaHan?"red":""},children:n.DiaChiCT})]}))):null})},{title:"N\u1ed9i dung v\u1ee5 vi\u1ec7c",dataIndex:"NoiDungDon",align:"left",width:"30%",render:(n,a,e)=>(0,M.jsx)(l.A,{title:a.NoiDungDon,children:(0,M.jsx)("p",{style:{color:1===a.TrangThaiQuaHan?"red":""},children:(0,C.Mi)(a.NoiDungDon,150)})})},{title:"Lo\u1ea1i khi\u1ebfu t\u1ed1",dataIndex:"NoiDungDon",align:"left",width:"10%",render:(n,a,e)=>(0,M.jsx)(l.A,{title:a.NoiDungDon,children:(0,M.jsx)("p",{style:{color:1===a.TrangThaiQuaHan?"red":""},children:a.TenLoaiKhieuTo})})},{title:"H\u01b0\u1edbng x\u1eed l\xfd",dataIndex:"HuongXuLy",align:"left",width:"10%",render:(n,a,e)=>(0,M.jsx)("p",{style:{color:1===a.TrangThaiQuaHan?"red":""},children:a.TenHuongGiaiQuyet})},{title:"H\u1ea1n gi\u1ea3i quy\u1ebft",dataIndex:"HanGiaiQuyet",align:"left",width:"10%",render:(n,a,e)=>(0,M.jsx)("p",{style:{color:1===a.TrangThaiQuaHan?"red":""},children:a.HanGiaiQuyet?A()(a.HanGiaiQuyet).format("DD/MM/YYYY"):null})},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"TenTrangThai",align:"left",width:"10%",render:(n,a,e)=>(0,M.jsx)("p",{style:{color:1===a.TrangThaiQuaHan?"red":""},children:(0,C.l6)(a,"TenTrangThai")})}],{DanhSachCoQuan:pn}=n,xn=null===tn||void 0===tn||null===(a=tn.find((n=>n.XuLyDonID===z[0])))||void 0===a?void 0:a.TrangThaiIDMoi,Tn=(null===tn||void 0===tn||null===(e=tn.find((n=>n.XuLyDonID===z[0])))||void 0===e?void 0:e.CheckTrangThai)?!(1===z.length)&&xn===S.TrangThaiMoi.ChuaCapNhapVBGXM:!(1===z.length);return(0,M.jsxs)(d.A,{children:[(0,M.jsxs)(Q.A,{children:[(0,M.jsx)(c.A,{children:"C\u1eadp nh\u1eadt v\u0103n b\u1ea3n giao x\xe1c minh"}),(0,M.jsxs)(u.A,{children:[(0,M.jsxs)(o.$n,{type:"primary",className:"btn-center",onClick:()=>{var n;const a=z[0],e=null===tn||void 0===tn||null===(n=tn.find((n=>n.XuLyDonID===a)))||void 0===n?void 0:n.DonThuID;I.A.ChiTietDonThu2({XuLyDonID:a,DonThuID:e}).then((n=>{n.data.Status>0&&(en(n.data.Data),U(!0),nn((n=>n+1)))}))},disabled:!(1===z.length),children:[(0,M.jsx)("img",{className:"btn-icon__img",src:1!==z.length?X.A.viewDetail:X.A.viewDetailWhite}),"Xem chi ti\u1ebft \u0111\u01a1n th\u01b0"]}),(0,M.jsxs)(o.$n,{type:"primary",className:"btn-center",onClick:()=>{const n=z[0];I.A.KetQuaXuLyDon({XuLyDonID:n}).then((n=>{n.data.Status>0?($({isViewDetails:!0,...n.data.Data}),P(),q(!0)):(i.Ay.destroy(),i.Ay.error(n.data.Message))})).catch((n=>{i.Ay.destroy(),i.Ay.error(n.toString())}))},disabled:!(1===z.length),children:[(0,M.jsx)("img",{className:"btn-icon__img",src:1!==z.length?X.A.viewDetail:X.A.viewDetailWhite}),"Xem k\u1ebft qu\u1ea3 x\u1eed l\xfd \u0111\u01a1n"]}),(0,M.jsxs)(o.$n,{className:"btn-center",type:"primary",onClick:()=>(()=>{const n=z[0];I.A.ChiTietGiaoXacMinh({XuLyDonID:n}).then((n=>{n.data.Status>0?(T({isViewDetails:!0,...n.data.Data}),P(),_(!0)):(i.Ay.destroy(),i.Ay.error(n.data.Message))})).catch((n=>{i.Ay.destroy(),i.Ay.error(n.toString())}))})(),disabled:!(1===z.length),children:[(0,M.jsx)("img",{className:"btn-icon__img",src:1!==z.length?X.A.viewDetail:X.A.viewDetailWhite}),"Xem v\u0103n b\u1ea3n giao x\xe1c minh"]}),(0,M.jsxs)(o.$n,{className:"btn-center",type:"primary",onClick:()=>{return n=!1,G("add"),T({isViewDetails:n}),P(),void _(!0);var n},disabled:Tn,children:[(0,M.jsx)("img",{className:"btn-icon__img",src:Tn?X.A.Process:X.A.ProcessWhite}),"C\u1eadp nh\u1eadt v\u0103n b\u1ea3n giao x\xe1c minh"]})]})]}),(0,M.jsx)(g.A,{children:(0,M.jsx)(v,{children:(()=>{const n={selectedRowsKey:z,renderCell:(n,a,e,t)=>(0,M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,M.jsx)(L.A,{className:"ant-icon__table",style:{marginRight:4,fontSize:14,visibility:"hidden"}}),(0,M.jsx)("div",{children:(0,M.jsx)(p.A,{className:"selected__table",checked:z.includes(a.XuLyDonID),onChange:()=>cn(a)})})]}),onChange:n=>{F(n)}},a=null===tn||void 0===tn?void 0:tn.map((n=>({...n,key:null===n||void 0===n?void 0:n.XuLyDonID})));return(0,M.jsxs)(M.Fragment,{children:[un(),(0,M.jsx)(D.Ay,{rowSelection:n,columns:Dn,dataSource:a,onChange:sn,pagination:{showSizeChanger:!0,showTotal:(n,a)=>"T\u1eeb ".concat(a[0]," \u0111\u1ebfn ").concat(a[1]," tr\xean ").concat(n," k\u1ebft qu\u1ea3"),total:on,current:gn,pageSize:yn}})]})})()})}),(0,M.jsx)(H.A,{visible:b,dataEdit:h,action:K,loading:R,onCreate:a=>{const e=z[0];a.XuLyDonID=e,B(!0);const l={FileType:S.LoaiFileDinhKem.FileCapNhatGiaoXacMinh};if("add"===K){const e=[];a.DanhSachHoSoTaiLieu&&(0,C.Yj)(a.DanhSachHoSoTaiLieu,e,l,I.A),Promise.all(e).then((e=>{I.A.CapNhatQuyetDinhGiaoXacMinh(a).then((a=>{B(!1),a&&a.data&&1===a.data.Status?(i.Ay.success(a.data.Message),F([]),dn(),n.getInitData(t)):i.Ay.error("".concat(a&&a.data?a.data.Message:"L\u1ed7i h\u1ec7 th\u1ed1ng"))}))}))}else{const e=[];a.DanhSachHoSoTaiLieu?(0,C.Yj)(a.DanhSachHoSoTaiLieu,e,l,I.A):delete a.FileDinhkem,Promise.all(e).then((e=>{I.A.CapNhatBanHanh(a).then((a=>{B(!1),a.data.Status>0?(i.Ay.destroy(),i.Ay.success(a.data.Message),F([]),dn(),n.getInitData(t)):(i.Ay.destroy(),i.Ay.error("".concat(a.data.Message)))})).catch((n=>{i.Ay.destroy(),i.Ay.error("".concat(n.toString()))}))}))}},onCancel:dn,dataSource:tn,DanhSachHuongXuLy:ln,XuLyDonID:z[0],DanhSachCoQuan:pn},Y),(0,M.jsx)(k.A,{visible:W,dataEdit:O,onCancel:()=>{q(!1),$({})}},E),(0,M.jsx)(j.A,{visible:J,dataEdit:an,onCancel:()=>{en({}),U(!1)}},Z)]})}))}}]);