"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[3723,2782],{2637:(e,t,a)=>{a.d(t,{A:()=>h});a(82483);var i,n=a(57528),s=a(22953);a(6535);const o=s.Ay.div(i||(i=(0,n.A)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  padding: 10px 0;\n  gap: 10px;\n  width: 100%;\n"])));var d=a(56723);const h=e=>(0,d.jsx)(o,{className:"wrapper-top",children:e.children})},23723:(e,t,a)=>{a.r(t),a.d(t,{default:()=>W});var i=a(82483),n=a(82402),s=a(92378),o=a(32222),d=a(43909),h=a(33713),r=a.n(h),l=a(92997),c=a(43477),u=a(58168);const p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"};var A=a(56594),g=function(e,t){return i.createElement(A.A,(0,u.A)({},e,{ref:t,icon:p}))};const m=i.forwardRef(g);var T=a(38450),f=a(27077),x=a(2782),L=a(53660),y=a(34045),K=a(81538),v=a(64684),D=a(67353),S=a(53615),M=a(23511),C=a(79948),j=a(65828),E=(a(4816),a(56723));const{Item:w,useForm:b}=C.A,I=e=>{const[t]=b(),{dataModalAdd:a,loading:n,visible:s,action:o,DanhSachLoaiKhieuTo:d}=e,[r,l]=(0,i.useState)(),[c,u]=(0,i.useState)(!0);(0,i.useEffect)((()=>{if("add"===o&&a&&a.LoaiKhieuToCha&&t&&t.setFieldsValue({...a,TenLoaiKhieuToCha:a.Ten}),"edit"===o&&a){const e=null===a||void 0===a?void 0:a.LoaiKhieuToCha;let i;const n=(e,t)=>{e.forEach((e=>{e.DanhMucLoaiKhieuToCon?e.LoaiKhieuToID===t?i=e.TenLoaiKhieuTo:n(e.DanhMucLoaiKhieuToCon,t):e.LoaiKhieuToID===t&&(i=e.TenLoaiKhieuTo)}))};n(d,e),t&&t.setFieldsValue({...a,TenLoaiKhieuToCha:i})}}),[]);return(0,E.jsx)(j.aF,{title:"".concat("edit"===o?"S\u1eeda":"Th\xeam"," lo\u1ea1i khi\u1ebfu t\u1ed1"),width:450,visible:s,onCancel:e.onCancel,style:{color:"red"},footer:[(0,E.jsx)(j.$n,{onClick:e.onCancel,children:"H\u1ee7y"},"back"),(0,E.jsx)(j.$n,{disabled:c,htmlType:"submit",type:"primary",form:"formbuocxacminh",loading:n,onClick:async i=>{const n=await t.validateFields();"add"==o&&(i.preventDefault(),e.onCreate({...n,SuDung:void 0===r||r})),"edit"===o&&(i.preventDefault(),e.onCreate({...a,...n,SuDung:n.SuDung}))},children:"L\u01b0u"},"submit")],children:(0,E.jsxs)(C.A,{form:t,name:"formbuocxacminh",onChange:async(e,i)=>{const n=await t.getFieldsValue(),{MappingCode:s,TenLoaiKhieuTo:d,SuDung:h,ThuTu:r}=n;"edit"===o&&(s&&parseInt(r)&&d&&(s!==a.MappingCode||d!==a.TenLoaiKhieuTo||h!==a.SuDung||parseInt(r)!==parseInt(a.ThuTu))?u(!1):u(!0)),"add"===o&&(s&&d&&(s!==a.MappingCode||d!==a.TenLoaiKhieuTo)?u(!!(r&&r<=0)):u(!0))},children:[a.Ten?(0,E.jsx)(w,{label:"Lo\u1ea1i khi\u1ebfu t\u1ed1 cha",name:"TenLoaiKhieuToCha",...h.ITEM_LAYOUT,children:(0,E.jsx)(j.pd,{disabled:!0})}):null,(0,E.jsx)(w,{label:"M\xe3 lo\u1ea1i khi\u1ebfu t\u1ed1",name:"MappingCode",...h.ITEM_LAYOUT,rules:[h.REQUIRED],children:(0,E.jsx)(j.mS,{})}),(0,E.jsx)(w,{label:"T\xean lo\u1ea1i khi\u1ebfu t\u1ed1",name:"TenLoaiKhieuTo",...h.ITEM_LAYOUT,rules:[h.REQUIRED],children:(0,E.jsx)(j.pd,{})}),(0,E.jsx)(w,{label:"Th\u1ee9 t\u1ef1 s\u1eafp x\u1ebfp",name:"ThuTu",...h.ITEM_LAYOUT,rules:[{max:11,message:"S\u1ed1 th\u1ee9 t\u1ef1 kh\xf4ng h\u1ee3p l\u1ec7.",pattern:new RegExp(/^[1-900000000]+$/)}],children:(0,E.jsx)(j.pd,{maxLength:7})}),"add"===o?(0,E.jsx)(E.Fragment,{}):(0,E.jsx)(w,{label:"S\u1eed d\u1ee5ng",name:"SuDung",...h.ITEM_LAYOUT,children:(0,E.jsxs)(M.Ay.Group,{onChange:e=>{l(e.target.value)},value:r,defaultValue:!0,children:[(0,E.jsx)(M.Ay,{value:!0,children:"C\xf3"}),(0,E.jsx)(M.Ay,{value:!1,children:"Kh\xf4ng"})]})})]})})};var k,R,N,z=a(41236),H=a(93445),O=a(72741),V=a(84950),_=a(59827),q=a(27957),F=a(2370),U=a(18570),B=a(57528),Q=a(22953);const Y=Q.Ay.div(k||(k=(0,B.A)(["\n    .ant-tree .ant-tree-treenode:not(.ant-tree .ant-tree-treenode-disabled).filter-node .ant-tree-title {\n        color: red;\n    }\n    span.ant-tree-iconEle.ant-tree-icon__customize {\n        display: none !important;\n    }\n"]))),P=Q.Ay.span(R||(R=(0,B.A)(["\n    svg {\n        margin-right: 10px;\n    }\n    .delete {\n        color: red;\n    }\n    .add {\n        color: green;\n        font-weight: 800;\n    }\n    .stop {\n        color: red;\n    }\n    .check {\n        color: green;\n    }\n"]))),X=Q.Ay.div(N||(N=(0,B.A)(["\n    margin-top: 20px;\n    height: calc(100vh - 265px);\n    overflow-y: scroll;\n"])));var $=a(2637);const{TreeNode:G}=z.A;class J extends i.Component{constructor(e){super(e),this.componentDidMount=()=>{this.props.getInitData(this.state.filterData)},this.onFilter=(e,t)=>{let a={...this.state.filterData},i={value:e,property:t},n=(0,U.D5)(a,i,null);this.setState({filterData:n},(()=>{let e=this.state.filterData.Keyword?this.state.filterData.Keyword:"";(0,U._Y)({Keyword:e}),this.props.getList(this.state.filterData)}))},this.deleteData=e=>{this.props.role.delete?O.A.confirm({title:"X\xf3a d\u1eef li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a lo\u1ea1i khi\u1ebfu t\u1ed1 n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:()=>{d.A.xoaCoQuan(e).then((e=>{e.data.Status>0?(H.Ay.destroy(),H.Ay.success("X\xf3a th\xe0nh c\xf4ng"),this.props.getInitData(this.state.filterData)):O.A.error({title:"L\u1ed7i",content:e.data.Message})})).catch((e=>{O.A.error(r().API_ERROR)}))}}):(H.Ay.destroy(),H.Ay.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n ch\u1ee9c n\u0103ng n\xe0y"))},this.submitModalAddEdit=e=>{this.setState({confirmLoading:!0}),"add"===this.state.action&&d.A.themCoQuan({...this.state.dataModalAddEdit,...e,ThuTu:e.ThuTu||this.state.DanhSachLoaiKhieuTo.length+1}).then((e=>{this.setState({confirmLoading:!0}),e.data.Status>0?(H.Ay.destroy(),H.Ay.success(e.data.Message),this.hideModalAddEdit(),this.props.getInitData(this.state.filterData)):(this.setState({setConfirmLoading:!1}),H.Ay.destroy(),H.Ay.error(e.data.Message))})).catch((e=>{this.setState({setConfirmLoading:!1}),H.Ay.destroy(),H.Ay.error(e.toString())})),"edit"===this.state.action&&this.setState({confirmLoading:!0},(()=>{d.A.suaCoQuan(e).then((e=>{e.data.Status>0?(H.Ay.destroy(),H.Ay.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.hideModalAddEdit(),this.props.getList(this.state.filterData)):(this.setState({confirmLoading:!1}),O.A.error({title:"L\u1ed7i",content:e.data.Message}))})).catch((e=>{O.A.error(r().API_ERROR)}))}))},this.showModalEdit=e=>{this.props.role.edit?(this.setState({action:"edit"}),d.A.chiTietCoQuan({LoaiKhieuToID:e}).then((e=>{if(e.data.Status>0){let t=this.state.modalKey+1,a=e.data.Data;this.setState({visibleModalAddEdit:!0,dataModalAddEdit:{...a},confirmLoading:!1,modalKey:t})}else O.A.error({title:"L\u1ed7i",content:e.data.Message})})).catch((e=>{O.A.error(r().API_ERROR)}))):(H.Ay.destroy(),H.Ay.warning("B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n th\u1ef1c hi\u1ec7n ch\u1ee9c n\u0103ng n\xe0y"))},this.showModalAdd=(e,t,a,i)=>{let n=this.state.modalKey+1;this.setState({action:"add",visibleModalAddEdit:!0,dataModalAddEdit:{LoaiKhieuToCha:e,Cap:t+1,Ten:a},confirmLoading:!1,modalKey:n})},this.showModalAddbtn=()=>{let e=this.state.modalKey+1;this.setState({action:"add",visibleModalAddEdit:!0,dataModalAddEdit:{LoaiKhieuToCha:-1,Cap:0},confirmLoading:!1,modalKey:e})},this.setStatusItem=(e,t)=>{d.A.setSuDung({LoaiKhieuToID:e,SuDung:t}).then((e=>{e.data.Status>0?(H.Ay.destroy(),H.Ay.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),this.props.getInitData(this.state.filterData)):O.A.error({title:"L\u1ed7i",content:e.data.Message})})).catch((e=>{O.A.error(r().API_ERROR)}))},this.hideModalAddEdit=()=>{this.setState({dataModalAddEdit:{},visibleModalAddEdit:!1})},this.onExpandNode=(e,t)=>{let a=t.nativeEvent.target.outerHTML.toString(),i=t.nativeEvent.target.parentElement.className.toString(),n=a.includes("ant-dropdown-menu"),s=i.includes("ant-dropdown-menu");if(!n&&!s){let a=t.node.props.eventKey.toString();if(a&&!t.node.props.isLeaf){let t=[...this.state.expandedKeys],i=t.indexOf(a);i>-1?t.splice(i,1):t=this.state.expandedKeys.concat([a]),this.setState({expandedKeys:t}),this.setState({openTree:e})}}},this.renderTreeNodes=e=>e.map((e=>{let t=(0,E.jsxs)(V.A,{children:[(0,E.jsx)(V.A.Item,{disabled:!1===e.SuDung,onClick:()=>this.showModalAdd(e.LoaiKhieuToID,e.Cap,e.TenLoaiKhieuTo),children:(0,E.jsxs)(P,{children:[(0,E.jsx)(l.A,{className:"add"})," Th\xeam m\u1edbi"]})}),(0,E.jsx)(V.A.Item,{onClick:()=>this.showModalEdit(e.LoaiKhieuToID),children:(0,E.jsxs)(P,{children:[(0,E.jsx)(c.A,{className:"edit"})," S\u1eeda"]})}),(0,E.jsx)(V.A.Item,{onClick:()=>this.setStatusItem(e.LoaiKhieuToID,!e.SuDung),children:e.SuDung?(0,E.jsxs)(P,{children:[(0,E.jsx)(m,{className:"stop"})," Kh\xf4ng s\u1eed d\u1ee5ng"]}):(0,E.jsxs)(P,{children:[(0,E.jsx)(T.A,{className:"check"})," S\u1eed d\u1ee5ng"]})}),(0,E.jsx)(V.A.Item,{disabled:!!e.DanhMucLoaiKhieuToCon.length,onClick:()=>this.deleteData(e.LoaiKhieuToID),children:(0,E.jsxs)(P,{children:[(0,E.jsx)(f.A,{className:"delete"})," X\xf3a"]})})]}),a=(0,E.jsx)("div",{children:(0,E.jsx)(_.A,{overlay:t,placement:"bottomLeft",trigger:["contextMenu"],children:(0,E.jsx)("span",{style:!1===e.SuDung?{textDecoration:"line-through"}:{},children:e.TenLoaiKhieuTo})})});return e.DanhMucLoaiKhieuToCon?(0,E.jsx)(G,{title:a,isLeaf:e.isLeaf,children:e.DanhMucLoaiKhieuToCon,dataRef:e,children:this.renderTreeNodes(e.DanhMucLoaiKhieuToCon)},e.key):(0,E.jsx)(G,{title:a,isLeaf:e.isLeaf,children:e.DanhMucLoaiKhieuToCon,dataRef:e},e.key)})),this.renderContent=()=>{if(this.state.DanhSachLoaiKhieuTo.length){const e=this.filterTreeNode(this.props.DanhSachLoaiKhieuTo);return(0,E.jsx)(Y,{children:(0,E.jsx)(z.A,{showLine:!0,filterTreeNode:e=>1===e.props.dataRef.Highlight,onSelect:this.onExpandNode,onExpand:this.onExpandNode,defaultExpandedKeys:this.state.openTree,expandedKeys:this.state.filterData.Keyword?this.props.expandedKeys:this.state.expandedKeys,children:this.renderTreeNodes(e)})})}return(0,E.jsx)(S.ab,{loading:this.props.TableLoading})},this.filterTreeNode=e=>e,this.renderActionAddEdit=()=>(0,E.jsxs)("span",{children:[(0,E.jsxs)(F.A,{type:"primary",onClick:()=>this.showModalAdd(-1,-1,null),children:[(0,E.jsx)(x.A,{}),"Th\xeam m\u1edbi"]}),(0,E.jsx)(I,{confirmLoading:this.state.confirmLoading,visible:this.state.visibleModalAddEdit,onCancel:this.hideModalAddEdit,onCreate:this.submitModalAddEdit,dataModalAdd:this.state.dataModalAddEdit,action:this.state.action,DanhSachLoaiKhieuTo:this.state.DanhSachLoaiKhieuTo},this.state.modalKey)]}),document.title="Danh M\u1ee5c Lo\u1ea1i Khi\u1ebfu T\u1ed1";const t=s.parse(this.props.location.search);this.state={action:"",visibleModalAddEdit:!1,dataModalAddEdit:{},expandedKeys:[],filterData:{...t},treeKey:0,modalKey:0,DanhSachLoaiKhieuTo:[],confirmLoading:!1,openTree:[]}}componentDidUpdate(e,t,a){if(e.DanhSachLoaiKhieuTo!==this.props.DanhSachLoaiKhieuTo&&this.props.DanhSachLoaiKhieuTo){let e=this.state.treeKey+1;this.setState({DanhSachLoaiKhieuTo:this.props.DanhSachLoaiKhieuTo,treeKey:e})}}render(){const{role:e}=this.props;(0,U.b5)("user",{}).VaiTro;return(0,E.jsxs)(L.A,{children:[(0,E.jsxs)($.A,{children:[(0,E.jsx)(y.A,{children:"DANH M\u1ee4C LO\u1ea0I KHI\u1ebeU T\u1ed0"}),(0,E.jsx)(K.A,{children:e.add?this.renderActionAddEdit():null})]}),(0,E.jsxs)(v.A,{style:{minHeight:"calc(100vh - 265px)"},children:[(0,E.jsx)(D.A,{children:(0,E.jsx)(q.A.Search,{allowClear:!0,defaultValue:this.state.filterData.Keyword,placeholder:"T\xecm ki\u1ebfm theo t\xean lo\u1ea1i khi\u1ebfu t\u1ed1",onSearch:e=>this.onFilter(e,"Keyword"),style:{width:300}})}),(0,E.jsx)(X,{style:{userSelect:"none"},children:this.renderContent()},this.state.treeKey)]})]})}}const W=(0,n.Ng)((function(e){return{...e.DanhMucLoaiKhieuTo}}),o.A)(J)},27077:(e,t,a)=>{a.d(t,{A:()=>h});var i=a(58168),n=a(82483);const s={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"};var o=a(56594),d=function(e,t){return n.createElement(o.A,(0,i.A)({},e,{ref:t,icon:s}))};const h=n.forwardRef(d)},43477:(e,t,a)=>{a.d(t,{A:()=>h});var i=a(58168),n=a(82483);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"};var o=a(56594),d=function(e,t){return n.createElement(o.A,(0,i.A)({},e,{ref:t,icon:s}))};const h=n.forwardRef(d)},92997:(e,t,a)=>{a.d(t,{A:()=>h});var i=a(58168),n=a(82483);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var o=a(56594),d=function(e,t){return n.createElement(o.A,(0,i.A)({},e,{ref:t,icon:s}))};const h=n.forwardRef(d)},2782:(e,t,a)=>{a.d(t,{A:()=>h});var i=a(58168),n=a(82483);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"};var o=a(56594),d=function(e,t){return n.createElement(o.A,(0,i.A)({},e,{ref:t,icon:s}))};const h=n.forwardRef(d)}}]);